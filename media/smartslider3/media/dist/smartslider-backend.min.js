function strip_tags(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(n,"").replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})}var NextendSmartSliderAdminStorage=function(){this.timelineManager=null,this.timelineControl=null,this.slide=null,this.frontend=null,this.generator=null,this.layerManager=null,this.history=null,this.oneSecWidth=200,this.oneSecMs=1e3,this.fps=20,this.pxToFrame=this.oneSecWidth/this.fps,this.$currentSlideElement=null};NextendSmartSliderAdminStorage.prototype.durationToOffsetX=function(t){return t*this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.offsetXToDuration=function(t){return t/this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.normalizeOffsetX=function(t){return Math.round(t/this.pxToFrame)*this.pxToFrame},NextendSmartSliderAdminStorage.prototype.startEditor=function(t,e,i,n,a,r){return null===this.slide&&window[t].started(function(){new SmartSliderAdminSlide(t,e,i,n,a,r)}),this.slide},window.nextend.pre="div#n2-ss-0 ",window.nextend.smartSlider=new NextendSmartSliderAdminStorage,function(t,e,i){function n(){this.type="backgroundanimation",NextendVisualManagerMultipleSelection.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerMultipleSelection.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerMultipleSelection.prototype.loadDefaults.apply(this,arguments),this.type="backgroundanimation",this.labels={visual:"Background animation",visuals:"Background animations"}},n.prototype.initController=function(){return new NextendBackgroundAnimationEditorController},n.prototype.createVisual=function(t,e){return new NextendVisualWithSetRowMultipleSelection(t,e,this)},i.NextendBackgroundAnimationManager=n}(nextend.smartSlider,n2,window),function(t,e){function i(){this.parameters={shiftedBackgroundAnimation:0},NextendVisualEditorController.prototype.constructor.call(this,!1),this.bgAnimationElement=t(".n2-bg-animation"),this.slides=t(".n2-bg-animation-slide"),this.bgImages=t(".n2-bg-animation-slide-bg"),NextendTween.set(this.bgImages,{rotationZ:1e-4}),this.directionTab=new NextendElementRadio("n2-background-animation-preview-tabs",["0","1"]),this.directionTab.element.on("nextendChange.n2-editor",t.proxy(this.directionTabChanged,this)),nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d||nextend.notificationCenter.error("Background animations are not available in your browser. It works if the <i>transform-style: preserve-3d</i> feature available. ")}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="backgroundanimation",this.current=0,this.animationProperties=!1,this.direction=0},i.prototype.get=function(){return null},i.prototype.load=function(t,e,i,n){this.lightbox.addClass("n2-editor-loaded")},i.prototype.setTabs=function(t){},i.prototype.directionTabChanged=function(){this.direction=parseInt(this.directionTab.element.val())},i.prototype.start=function(){this.animationProperties&&(this.timeline?this.timeline.play():this.next())},i.prototype.pause=function(){this.timeline&&this.timeline.pause()},i.prototype.next=function(){this.timeline=new NextendTimeline({paused:!0,onComplete:t.proxy(this.ended,this)});var e=this.bgImages.eq(this.current),i=this.bgImages.eq(1-this.current);nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d?(this.currentAnimation=new window["NextendSmartSliderBackgroundAnimation"+this.animationProperties.type](this,e,i,this.animationProperties,1,this.direction),this.slides.eq(this.current).css("zIndex",2),this.slides.eq(1-this.current).css("zIndex",3),this.timeline.to(this.slides.eq(this.current),.5,{opacity:0},this.currentAnimation.getExtraDelay()),this.timeline.to(this.slides.eq(1-this.current),.5,{opacity:1},this.currentAnimation.getExtraDelay()),this.currentAnimation.postSetup()):(this.timeline.to(this.slides.eq(this.current),1.5,{opacity:0},0),this.timeline.to(this.slides.eq(1-this.current),1.5,{opacity:1},0)),this.current=1-this.current,this.timeline.play()},i.prototype.ended=function(){this.currentAnimation&&this.currentAnimation.ended(),this.next()},i.prototype.setAnimationProperties=function(t){var e=this.animationProperties;this.animationProperties=t,e||this.next()},e.NextendBackgroundAnimationEditorController=i}(n2,window),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],a=arguments[1],r=0;i>r;r++)if(r in e){var s=e[r];t.call(a,s,r,e)&&n.push(s)}return n}),function(t,e,i){function n(){this.$input=t('<input type="text" name="name" />').on({mouseup:function(t){t.stopPropagation()},keyup:t.proxy(function(t){27==t.keyCode&&this.cancel()},this),blur:t.proxy(this.save,this)}),this.$form=t('<form class="n2-inline-form"></form>').append(this.$input).on("submit",t.proxy(this.save,this))}n.prototype.injectNode=function(t,e){this.$input.val(e),t.append(this.$form),this.$input.focus()},n.prototype.save=function(t){t.preventDefault(),this.$input.trigger("valueChanged",[this.$input.val()]),this.$input.off("blur"),this.destroy()},n.prototype.cancel=function(){this.$input.trigger("cancel"),this.destroy()},n.prototype.destroy=function(){this.$input.off("blur"),this.$form.remove()},e.NextendSmartSliderAdminInlineField=n}(n2,window),function(t,e,i){function n(){NextendVisualManagerEditableSets.prototype.constructor.apply(this,arguments)}function a(){NextendVisualWithSetRow.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerEditableSets.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerEditableSets.prototype.loadDefaults.apply(this,arguments),this.type="layout",this.labels={visual:"layout",visuals:"layouts"},this.fontClassName=""},n.prototype.initController=function(){return new NextendLayoutEditorController},n.prototype.createVisual=function(t,e){return new a(t,e,this)},i.NextendLayoutManager=n,a.prototype=Object.create(NextendVisualWithSetRow.prototype),a.prototype.constructor=a,a.prototype.activate=function(i){"undefined"!=typeof i&&i.preventDefault();var n=e.proxy(function(e,i){t.slide.loadLayout(this.value,e,i)},this);new NextendModal({zero:{size:[500,140],title:n2_("Load layout"),back:!1,close:!0,content:"",controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-grey n2-uc n2-h4">'+n2_("Load whole slide")+"</a>",'<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Load only layers")+"</a>"],fn:{show:function(){this.controls.find(".n2-button-green").on("click",e.proxy(function(t){t.preventDefault(),n(!1,!1),this.hide(t)},this)),this.controls.find(".n2-button-grey").on("click",e.proxy(function(t){t.preventDefault(),n(!0,!0),this.hide(t)},this))}}}},!0)},i.NextendSmartSliderLayout=a}(nextend.smartSlider,n2,window),function(t,e){function i(){NextendVisualEditorController.prototype.constructor.call(this,!1)}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="layout",this.preview=null},i.prototype.get=function(){return window.nextend.smartSlider.slide.getLayout()},e.NextendLayoutEditorController=i}(n2,window),function(t,e,i,n){"use strict";function a(){this.historyStates=50,this.isEnabled=0!=this.historyStates,this.historyAddAllowed=!0,this.isBatched=!1,this.index=-1,this.history=[],this.preventUndoRedo=!1,this.undoBTN=e("#n2-ss-undo").on("click",e.proxy(this.undo,this)),this.redoBTN=e("#n2-ss-redo").on("click",e.proxy(this.redo,this)),this.updateUI()}a.prototype.updateUI=function(){0==this.index||0==this.history.length?this.undoBTN.removeClass("n2-active"):this.undoBTN.addClass("n2-active"),-1==this.index||this.index>=this.history.length?this.redoBTN.removeClass("n2-active"):this.redoBTN.addClass("n2-active")},a.prototype.throttleUndoRedo=function(){return this.preventUndoRedo?!0:(this.preventUndoRedo=!0,setTimeout(e.proxy(function(){this.preventUndoRedo=!1},this),100),!1)},a.prototype.add=function(t){if(this.isEnabled&&this.historyAddAllowed){-1!=this.index&&this.history.splice(this.index,this.history.length),this.index=-1;var i=t();return this.isBatched?this.history[this.history.length-1].push(i):(this.history.push([i]),this.isBatched=!0,setTimeout(e.proxy(function(){this.isBatched=!1},this),100)),this.history.length>this.historyStates&&this.history.unshift(),this.updateUI(),i}},a.prototype.off=function(){this.historyAddAllowed=!1},a.prototype.on=function(){this.historyAddAllowed=!0},a.prototype.undo=function(t){if(t&&t.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1==this.index?this.index=this.history.length-1:this.index--,this.index>=0)for(var e=this.history[this.index],i=e.length-1;i>=0;i--){var n=e[i];n[0].history(n[1],n[3],n[4],n)}else this.index=0;this.on(),this.updateUI()},a.prototype.redo=function(t){if(t&&t.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1!=this.index&&this.index<this.history.length){var e=this.history[this.index];this.index++;for(var i=0;i<e.length;i++){var n=e[i];n[0].history(n[1],n[2],n[4],n)}}this.on(),this.updateUI()},a.prototype.changeFuture=function(t,e){for(var i=0;i<this.history.length;i++)for(var n=0;n<this.history[i].length;n++){this.history[i][n][0]===t&&(this.history[i][n][0]=e);for(var a=2;a<this.history[i][n].length;a++)for(var r=0;r<this.history[i][n][a].length;r++)this.history[i][n][a][r]===t&&(this.history[i][n][a][r]=e)}},n2(window).ready(function(){t.history=new a})}(nextend.smartSlider,n2,window),function(t,e){function i(e,i,n){nextend.smartSlider.license=this,this.addLicenseModal=!1,this.hasKey=e,this.maybeActive=i,this.ajaxUrl=n,this.boxAddLicense=t(".n2-box-add-license"),this.boxDeAuthorize=t(".n2-box-license-activated"),window.addLicense=t.proxy(this.addLicense,this),window.checkLicense=t.proxy(this.checkLicense,this)}i.prototype.checkLicense=function(t,e){return NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"check",cacheAccepted:t+0,verbose:e+0}),dataType:"json"})},i.prototype.addLicense=function(e){if(e=e||0,this._deferred=t.Deferred(),!this.addLicenseModal){var i=this,n=!1,a={show:function(){n=!1,this.controls.find(".n2-button-grey").on("click",t.proxy(function(t){t.preventDefault(),i._deferred.resolve(),this.hide(t)},this));var e=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),e.trigger("click")});a.append(this.createInput(n2_("License key")+' - <a style="font-size:11px;" href="https://secure.nextendweb.com/" target="_blank">'+n2_("Forgot your license key?")+"</a>","license-key","width: 440px;"));var r=t("#license-key").val("").focus();e.on("click",t.proxy(function(e){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(i.ajaxUrl,{nextendaction:"add"}),data:{licenseKey:r.val().replace(/\s/g,"")},dataType:"json"}).done(t.proxy(function(t){t.data.valid&&(i.boxAddLicense.addClass("n2-ss-license-has-active-key"),i.boxDeAuthorize.removeClass("n2-ss-license-no-active-key"),i.hasKey=!0,i.maybeActive=!0,n=!0,this.hide(e),i._deferred.resolve(),nextend.notificationCenter.notice(n2_("Smart Slider 3 activated!")))},this))},this))},hide:function(){n||"pending"!=i._deferred.state()||i._deferred.reject()}};this.addLicenseModal=new NextendModal({zero:{size:[500,230],title:n2_("Add license"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Authorize")+"</a>"],fn:a},skippable:{size:[500,230],title:n2_("Add license"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-grey n2-uc n2-h4">'+n2_("Skip")+"</a>",'<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Authorize")+"</a>"],fn:a}})}return e?this.addLicenseModal.show("skippable"):this.addLicenseModal.show(),this._deferred},i.prototype.isActiveAsync=function(e){var i=t.Deferred(),n=t.proxy(function(){this.addLicense(e).done(function(){i.resolve()}).fail(function(){i.reject()})},this);return this.hasKey?this.maybeActive?i.resolve():this.checkLicense(!0,!1).done(function(){i.resolve()}).fail(function(){n()}):n(),i.fail(t.proxy(function(){this.maybeActive=!1},this)),i},e.NextendSmartSliderLicense=i}(n2,window),function(t,e,i){function n(){this.type="postbackgroundanimation",NextendVisualManagerMultipleSelection.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerMultipleSelection.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerMultipleSelection.prototype.loadDefaults.apply(this,arguments),this.type="postbackgroundanimation",this.labels={visual:"Ken Burns effect",visuals:"Ken Burns effects"}},n.prototype.initController=function(){return new NextendPostBackgroundAnimationEditorController},n.prototype.createVisual=function(t,e){return new NextendVisualWithSetRowMultipleSelection(t,e,this)},n.prototype.show=function(t,e){var i=[];""!=t&&(t=t.split("|*|"),i[0]=t[0],i[1]=t[1],t=t[2]),NextendVisualManagerMultipleSelection.prototype.show.call(this,t,e,i)},n.prototype.getAsString=function(){return this.controller.transformOrigin+"|*|"+NextendVisualManagerMultipleSelection.prototype.getAsString.call(this)},i.NextendPostBackgroundAnimationManager=n}(nextend.smartSlider,n2,window),function(t,e){function i(){NextendVisualEditorController.prototype.constructor.call(this,!1),this.bgAnimationElement=t(".n2-postbg-animation-slider").on("click",t.proxy(this.clickFocusPoint,this)),this.bgImage=this.bgAnimationElement.find(".n2-postbg-animation-slide"),nModernizr.csstransforms3d||nextend.notificationCenter.error("Background animations are not available in your browser. It works if the <i>3D transform</i> feature available. "),this.transformOriginField=t("#n2-post-backgroundtransformorigin").on("nextendChange",t.proxy(this.changeFocus,this))}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="postbackgroundanimation",this.tween=null,this.animationProperties=!1,this.transformOrigin="50||50"},i.prototype.clickFocusPoint=function(t){var e=this.bgAnimationElement.offset(),i=Math.round((t.pageX-e.left)/this.bgAnimationElement.width()*100),n=Math.round((t.pageY-e.top)/this.bgAnimationElement.height()*100);this.transformOriginField.data("field").insideChange(i+"|*|"+n)},i.prototype.changeFocus=function(){this.transformOrigin=this.transformOriginField.val(),this.animationProperties&&this.setAnimationProperties(this.animationProperties)},i.prototype.setImage=function(){if(nextend&&nextend.smartSlider&&nextend.smartSlider.frontend){var t=nextend.smartSlider.frontend;if("undefined"!=typeof t){var e=t.backgroundImages.getBackgroundImages();this.bgImage.html(""),e[t.currentSlideIndex].image.clone().appendTo(this.bgImage);var i=this.bgAnimationElement.parent().width()-40,n=t.dimensions.width,a=t.dimensions.height;n>i&&(a=a*i/n,n=i),this.bgAnimationElement.css({width:n,height:a})}}},i.prototype.get=function(){return null},i.prototype.load=function(t,e,i,n){this.lightbox.addClass("n2-editor-loaded")},i.prototype.setTabs=function(t){},i.prototype.start=function(t){this.setImage(),this.transformOriginField.data("field").insideChange(t[0]+"|*|"+t[1])},i.prototype.pause=function(){this.tween&&this.tween.pause()},i.prototype.next=function(){var e=t.extend(!0,{},this.animationProperties);"undefined"==typeof e.from.transformOrigin&&NextendTween.set(this.bgImage,{transformOrigin:this.transformOrigin.split("|*|").join("% ")+"%"}),e.to.delay=.5,e.to.onComplete=t.proxy(this.next,this),this.tween=NextendTween.fromTo(this.bgImage,e.duration,e.from,e.to)},i.prototype.setAnimationProperties=function(t){this.animationProperties=t,this.pause(),NextendTween.set(this.bgImage,{scale:1,x:0,y:0,rotationZ:1e-4,transformOrigin:"50% 50%"}),this.next()},e.NextendPostBackgroundAnimationEditorController=i}(n2,window),function(t,e,i){function n(e){var i=t("#n2-quick-slides-edit");i.length<1||(this.ajaxUrl=e,i.on("click",t.proxy(this.openEdit,this)))}n.prototype.openEdit=function(e){e.preventDefault();var i=t("#n2-ss-slides .n2-box-slide"),n=this;this.modal=new NextendModal({zero:{fit:!0,fitX:!1,overflow:"auto",size:[1200,700],title:n2_("Quick Edit - Slides"),back:!1,close:!0,content:'<form class="n2-form"><table></table></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Save")+"</a>"],fn:{show:function(){var e=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),e.trigger("click")}),r=a.find("table");i.each(t.proxy(function(e,i){var a=t(i),s=t("<tr />").appendTo(r),o=a.data("slideid");s.append(t("<td />").append('<img src="'+a.data("image")+'" style="width:100px;"/>')),s.append(t("<td />").append(n.createInput("Name","title-"+o,a.data("title"),"width: 240px;"))),s.append(t("<td />").append(n.createTextarea("Description","description-"+o,a.data("description"),"width: 330px;height:24px;")));var l=a.data("link").split("|*|");s.append(t("<td />").append(n.createLink("Link","link-"+o,l[0],"width: 180px;"))),s.append(t("<td />").append(n.createTarget("Target","target-"+o,l.length>1?l[1]:"_self",""))),new NextendElementUrl("link-"+o,nextend.NextendElementUrlParams)},this)),e.on("click",t.proxy(function(e){var a={};i.each(t.proxy(function(e,i){var n=t(i),r=n.data("slideid"),s=t("#title-"+r).val(),o=t("#description-"+r).val(),l=t("#link-"+r).val()+"|*|"+t("#target-"+r).val();s==n.data("title")&&o==n.data("description")&&l==n.data("link")||(a[r]={name:s,description:o,link:l})},this)),jQuery.isEmptyObject(a)?this.hide(e):(this.hide(e),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(n.ajaxUrl),data:{changed:Base64.encode(JSON.stringify(a))},dataType:"json"}).done(t.proxy(function(e){var i=e.data;for(var n in i){var a=t('.n2-box-slide[data-slideid="'+n+'"]');a.find(".n2-box-placeholder a.n2-h4").html(i[n].title),a.attr("data-title",i[n].rawTitle),a.data("title",i[n].rawTitle),a.attr("data-description",i[n].rawDescription),a.data("description",i[n].rawDescription),a.attr("data-link",i[n].rawLink),a.data("link",i[n].rawLink)}},this)))},this))}}}}),this.modal.setCustomClass("n2-ss-quick-slides-edit-modal"),this.modal.show()},n.prototype.createInput=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var r=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+a+'"></div></div></div></div>');return r.find("input").val(n),r},n.prototype.createTextarea=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var r=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-textarea n2-border-radius"><textarea id="'+i+'" class="n2-h5" autocomplete="off" style="resize:y;'+a+'"></textarea></div></div></div></div>');return r.find("textarea").val(n),r},n.prototype.createLink=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var r=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+a+'"><a href="#" class="n2-form-element-clear"><i class="n2-i n2-it n2-i-empty n2-i-grey-opacity"></i></a><a id="'+i+'_button" class="n2-form-element-button n2-h5 n2-uc" href="#">Link</a></div></div></div></div>');return r.find("input").val(n),r},n.prototype.createTarget=function(e,i,n){var a="";4==arguments.length&&(a=arguments[3]);var r=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select id="'+i+'" autocomplete="off" style="'+a+'"><option value="_self">Self</option><option value="_blank">Blank</option></select</div></div></div></div>');return r.find("select").val(n),r},e.NextendSmartSliderQuickSlides=n}(n2,window),function(t,e,i){function n(e){this.showGuides=1,this.guides=[],this.ratios={w:1,h:1},this.container=t('<div class="n2-ruler-container" />').appendTo("#smartslider-adjust-height .n2-ss-slider-outer-container"),this.scale=10,this.vertical=t('<div class="n2-ruler n2-ruler-vertical unselectable"></div>').appendTo(".n2-ss-slider-real-container"),this.horizontal=t('<div class="n2-ruler n2-ruler-horizontal unselectable"></div>').appendTo(this.container),this.verticalSpans=t(),this.horizontalSpans=t(),this.onResize(),nextend.smartSlider.frontend.sliderElement.on("SliderResize",t.proxy(this.onSliderResize,this)),t(window).on("resize",t.proxy(this.onResize,this)),this.positionDisplay=t('<div class="n2 n2-ss-position-display"/>').appendTo("body"),this.horizontal.on("mousedown",t.proxy(function(t){this.showGuides&&new r(this,this.horizontal,this.ratios.w,t)},this)),this.vertical.on("mousedown",t.proxy(function(t){this.showGuides&&new s(this,this.vertical,this.ratios.h,t)},this));try{e=t.extend({vertical:[],horizontal:[]},JSON.parse(Base64.decode(e)));for(var i=0;i<e.horizontal.length;i++){var n=new r(this,this.horizontal,this.ratios.w);n.setPosition(e.horizontal[i])}for(var i=0;i<e.vertical.length;i++){var n=new s(this,this.vertical,this.ratios.h);n.setPosition(e.vertical[i])}}catch(a){}nextend.ruler=this,this.measureToolVertical(),this.measureToolHorizontal()}function a(e,i,n,a){this.ruler=e,this.container=i,this.position=0,this.ratio=n,this.guide=t('<div class="n2-ruler-guide"><div class="n2-ruler-guide-border"></div><div class="n2-ruler-guide-handle"></div></div>').appendTo(i).on("mousedown",t.proxy(function(t){t.preventDefault(),t.stopPropagation(),nextend.smartSlider.layerManager.settings["n2-ss-lock-guides"]||this["delete"]()},this)),this.ruler.addGuide(this),a&&this.create(a)}function r(){a.prototype.constructor.apply(this,arguments)}function s(){a.prototype.constructor.apply(this,arguments)}n.prototype.addGuide=function(t){this.guides.push(t)},n.prototype.removeGuide=function(e){this.guides.splice(t.inArray(e,this.guides),1)},n.prototype.clearGuides=function(){for(var t=this.guides.length-1;t>=0;t--)this.guides[t]["delete"]()},n.prototype.onSliderResize=function(t,e){this.ratios=e;for(var i=0;i<this.guides.length;i++)this.guides[i].setRatio(e.w,e.h);this.onResize()},n.prototype.onResize=function(){var e=nextend.smartSlider.frontend.responsive.responsiveDimensions,i=Math.max(e.slider.width,t("#n2-tab-smartslider-editor").outerWidth(!0)-40),n=Math.max(e.slider.height,t("#n2-tab-smartslider-editor").outerHeight(!0));this.container.css({width:i+40,height:n+40});for(var a=this.horizontalSpans.length-3;a<i/this.scale;a++){var r=t("<span />").appendTo(this.horizontal);a%10==0?r.addClass("n2-ss-ruler-mark-large").append("<span>"+a/10*100+"</span>"):a%2==0&&r.addClass("n2-ss-ruler-mark-medium"),this.horizontalSpans=this.horizontalSpans.add(r)}for(var a=this.verticalSpans.length-3;a<n/this.scale;a++){var r=t("<span />").appendTo(this.vertical);a%10==0?r.addClass("n2-ss-ruler-mark-large").append("<span>"+a/10*100+"</span>"):a%2==0&&r.addClass("n2-ss-ruler-mark-medium"),this.verticalSpans=this.verticalSpans.add(r)}},n.prototype.toArray=function(){for(var t={horizontal:[],vertical:[]},e=0;e<this.guides.length;e++)this.guides[e]instanceof r?t.horizontal.push(this.guides[e].position):this.guides[e]instanceof s&&t.vertical.push(this.guides[e].position);return t},n.prototype.measureToolVertical=function(){var e=t('<div class="n2-ruler-guide" style="z-index:1;"><div class="n2-ruler-guide-border" style="border-color: #f00;"></div></div>').css("display","none").appendTo(this.vertical),i=!1,n=t.proxy(function(){i||(i=!0,e.css("display",""),this.positionDisplay.addClass("n2-active"))},this),a=t.proxy(function(){i&&(i=!1,e.css("display","none"),this.positionDisplay.removeClass("n2-active"))},this);this.vertical.on({mouseenter:t.proxy(function(i){if(this.showGuides){var r=0,s=Math.round(this.vertical.offset().top);n(),this.vertical.on("mousemove.n2-ruler-measure-tool",t.proxy(function(i){if(t(i.target).hasClass("n2-ruler-guide-border")&&t(i.target).parent()[0]!=e[0])a();else if(n(),r!=i.pageY){var o=i.pageY-s;e.css("top",o),this.positionDisplay.html(o-40+"px").css({left:i.pageX+10,top:i.pageY+10}),r=i.pageY}},this))}},this),mouseleave:t.proxy(function(){this.vertical.off(".n2-ruler-measure-tool"),a()},this)})},n.prototype.measureToolHorizontal=function(){var e=t('<div class="n2-ruler-guide" style="z-index:1;"><div class="n2-ruler-guide-border" style="border-color: #f00;"></div></div>').css("display","none").appendTo(this.horizontal),i=!1,n=t.proxy(function(){i||(i=!0,e.css("display",""),this.positionDisplay.addClass("n2-active"))},this),a=t.proxy(function(){i&&(i=!1,e.css("display","none"),this.positionDisplay.removeClass("n2-active"))},this);this.horizontal.on({mouseenter:t.proxy(function(i){if(this.showGuides){var r=0,s=Math.round(this.horizontal.offset().left);n(),this.horizontal.on("mousemove.n2-ruler-measure-tool",t.proxy(function(i){if(t(i.target).hasClass("n2-ruler-guide-border")&&t(i.target).parent()[0]!=e[0])a();else if(n(),r!=i.pageX){var o=Math.max(i.pageX-s,40);e.css("left",o),this.positionDisplay.html(o-40+"px").css({left:i.pageX+10,top:i.pageY+10}),r=i.pageX}},this))}},this),mouseleave:t.proxy(function(){this.horizontal.off(".n2-ruler-measure-tool"),a()},this)})},e.NextendSmartSliderRuler=n,a.prototype._position=function(t,e){return Math.max(0,t)},a.prototype.setPosition=function(t){this.position=t,this.refresh()},a.prototype.refresh=function(){this.positionRender(this.position)},a.prototype["delete"]=function(){this.ruler.removeGuide(this),this.guide.remove()},r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.prototype.create=function(t){var e=Math.round(this.container.offset().left)+40;this.position=this._position((t.pageX-e)/this.ratio,t),this.positionRender(this.position)},r.prototype.rawPositionRender=function(t){this.guide.css("left",Math.max(0,t)+40)},r.prototype.positionRender=function(t){this.guide.css("left",Math.max(0,t)*this.ratio+40)},r.prototype.setRatio=function(t,e){this.ratio=e,this.refresh()},s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.create=function(t){var e=Math.round(this.container.offset().top)+40;this.position=this._position((t.pageY-e)/this.ratio,t),this.positionRender(this.position)},s.prototype.rawPositionRender=function(t){this.guide.css("top",Math.max(0,t)+40)},s.prototype.positionRender=function(t){this.guide.css("top",Math.max(0,t)*this.ratio+40)},s.prototype.setRatio=function(t,e){this.ratio=t,this.refresh()}}(n2,window),function(t,e,i){function n(e,i,n,r,s,o){this.quickPostModal=null,this.quickVideoModal=null,this.parameters=n,this.slides=[],this.ajaxUrl=e,this.contentAjaxUrl=i,this.slidesPanel=t("#n2-ss-slides-container"),this.slidesContainer=this.slidesPanel.find(".n2-ss-slides-container"),this.initMenu(),this.initSlidesOrderable();for(var l=this.slidesContainer.find(".n2-box-slide"),d=0;d<l.length;d++)this.slides.push(new a(this,l.eq(d)));if(t("html").attr("data-slides",this.slides.length),t(".n2-add-quick-image, .n2-box-slide-dummy").on("click",t.proxy(this.addQuickImage,this)),t(".n2-add-quick-video").on("click",t.proxy(this.addQuickVideo,this)),t(".n2-add-quick-post").on("click",t.proxy(this.addQuickPost,this)),this.initBulk(),!r){var h=[];this.slidesContainer.fileupload({url:s,pasteZone:!1,dataType:"json",paramName:"image",dropZone:t("undefined"==typeof nextend.smartSlider?document:".n2-ss-slides-outer-container"),add:t.proxy(function(t,e){e.formData={path:"/"+o},e.submit()},this),done:t.proxy(function(t,e){var i=e.result;i.data&&i.data.name?h.push({title:i.data.name,description:"",image:i.data.url}):NextendAjaxHelper.notification(i)},this),fail:t.proxy(function(t,e){NextendAjaxHelper.notification(e.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:t.proxy(function(){h.length?this._addQuickImages(h):setTimeout(function(){NextendAjaxHelper.stopLoading()},100),h=[]},this)});var p=null;this.slidesContainer.on("dragover",t.proxy(function(e){null!==p?(clearTimeout(p),p=null):this.slidesContainer.addClass("n2-drag-over"),p=setTimeout(t.proxy(function(){this.slidesContainer.removeClass("n2-drag-over"),p=null},this),400)},this))}}function a(e,i){this.selected=!1,this.manager=e,this.box=i.data("slide",this).addClass("n2-clickable"),this.box.on("mouseenter",t.proxy(function(){this.manager.showMenu(this)},this)).on("mouseleave",t.proxy(function(){this.manager.hideMenu()},this)).on("click.n2-slide",t.proxy(this.goToEdit,this)),this.publishElement=this.box.find(".n2-slide-published").on("click",t.proxy(this.switchPublished,this)),this.box.find(".n2-ss-box-select").on("click",t.proxy(function(t){t.stopPropagation(),t.preventDefault(),this.invertSelection()},this))}n.prototype.changed=function(){},n.prototype.initSlidesOrderable=function(){this.slidesContainer.sortable({items:".n2-box-slide",tolerance:"pointer",stop:t.proxy(this.saveSlideOrder,this),helper:"clone",placeholder:"n2-box-sortable-placeholder n2-box n2-box-small",distance:10})},n.prototype.saveSlideOrder=function(e){for(var i=this.slidesContainer.find(".n2-box-slide"),n=[],a=[],r=[],s=0;s<i.length;s++){var o=i.eq(s).data("slide");n.push(o),a.push(o.getId())}for(var s=0;s<this.slides.length;s++)r.push(this.slides[s].getId());if(JSON.stringify(r)!=JSON.stringify(a)){t(window).triggerHandler("SmartSliderSidebarSlidesOrderChanged");var l={nextendcontroller:"slides",nextendaction:"order"};NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,l),data:{slideorder:a}}),this.slides=n,this.changed()}},n.prototype.initSlides=function(){for(var e=(this.slides.length,this.slidesContainer.find(".n2-box-slide")),i=[],n=0;n<e.length;n++){var a=e.eq(n).data("slide");i.push(a)}this.slides=i,this.changed(),t(window).triggerHandler("SmartSliderSidebarSlidesChanged"),t("html").attr("data-slides",this.slides.length)},n.prototype.unsetFirst=function(){for(var t=0;t<this.slides.length;t++)this.slides[t].unsetFirst();this.changed()},n.prototype.addQuickImage=function(e){e.preventDefault(),nextend.imageHelper.openMultipleLightbox(t.proxy(this._addQuickImages,this))},n.prototype.addBoxes=function(e){e.insertBefore(this.slidesContainer.find(".n2-clear")),e.addClass("n2-ss-box-just-added").each(t.proxy(function(e,i){new a(this,t(i))},this)),this.initSlides(),setTimeout(function(){e.removeClass("n2-ss-box-just-added")},200)},n.prototype._addQuickImages=function(e){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickImages"}),data:{images:Base64.encode(JSON.stringify(e))}}).done(t.proxy(function(e){this.addBoxes(t(e.data))},this))},n.prototype.addQuickVideo=function(e){e.preventDefault();var i=this;this.quickVideoModal||(this.quickVideoModal=new NextendModal({zero:{size:[500,350],title:n2_("Add video"),
back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Add video")+"</a>"],fn:{show:function(){var e=this.controls.find(".n2-button"),n=(this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),e.trigger("click")}).append(this.createInput(n2_("Video url"),"n2-slide-video-url","width: 446px;")),this.content.find("#n2-slide-video-url").focus());this.content.append(this.createHeading(n2_("Examples"))),this.content.append(this.createTable([["YouTube","https://www.youtube.com/watch?v=MKmIwHAFjSU"],["Vimeo","https://vimeo.com/144598279"]],["",""])),e.on("click",t.proxy(t.proxy(function(e){e.preventDefault();var a=n.val(),r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,s=a.match(r),o=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,l=a.match(o),d=a.match(/\.(mp4|ogv|ogg|webm)/i);s?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(s[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(t.proxy(function(t){if(t.items.length){var e=t.items[0].snippet,n=t.items[0].snippet.thumbnails,r=n.maxres||n.standard||n.high||n.medium||n["default"];i._addQuickVideo(this,{type:"youtube",title:e.title,description:e.description,image:r.url,video:a})}},this)).fail(function(t){nextend.notificationCenter.error(t.error.errors[0].message)}):l?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+l[3]+".json").done(t.proxy(function(t){i._addQuickVideo(this,{type:"vimeo",title:t[0].title,description:t[0].description,video:l[3],image:t[0].thumbnail_large})},this)).fail(function(t){nextend.notificationCenter.error(t.responseText)}):d?i._addQuickVideo(this,{type:"video",title:a,description:"",format:d[1],video:a,image:""}):nextend.notificationCenter.error("This video url is not supported!")},this)))}}}})),this.quickVideoModal.show()},n.prototype._addQuickVideo=function(e,i){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickVideo"}),data:{video:Base64.encode(JSON.stringify(i))}}).done(t.proxy(function(e){this.addBoxes(t(e.data)),this.initSlides()},this)),e.hide()},n.prototype.addQuickPost=function(e){if(e.preventDefault(),!this.quickPostModal){var i=this,n={},a=t.proxy(function(t){return"undefined"==typeof n[t]&&(n[t]=NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.contentAjaxUrl),data:{keyword:t},dataType:"json"})),n[t]},this);this.quickPostModal=new NextendModal({zero:{size:[600,430],title:n2_("Add post"),back:!1,close:!0,content:'<div class="n2-form"></div>',fn:{show:function(){this.content.find(".n2-form").append(this.createInput(n2_("Keyword"),"n2-ss-keyword","width:546px;"));var e=t("#n2-ss-keyword"),n=this.createHeading("").appendTo(this.content),r=this.createResult().appendTo(this.content),s="";e.on("keyup",t.proxy(function(){s=e.val(),a(s).done(t.proxy(function(a){if(e.val()==s){""==s?n.html(n2_("No search term specified. Showing recent items.")):n.html(n2_printf(n2_('Showing items match for "%s"'),s));for(var o=a.data,l=[],d=this,h=0;h<o.length;h++)l.push([o[h].title,o[h].info,t('<div class="n2-button n2-button-normal n2-button-xs n2-button-green n2-radius-s n2-uc n2-h5">'+n2_("Select")+"</div>").on("click",{post:o[h]},function(t){i._addQuickPost(d,t.data.post)})]);r.html(""),this.createTable(l,["width:100%;","",""]).appendTo(this.createTableWrap().appendTo(r))}},this))},this)).trigger("keyup").focus()}}}})}this.quickPostModal.show()},n.prototype._addQuickPost=function(e,i){i.image||(i.image=""),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickPost"}),data:{post:i}}).done(t.proxy(function(e){this.addBoxes(t(e.data)),this.initSlides()},this)),e.hide()},n.prototype.initBulk=function(){this.selection=[],this.isBulkSelection=!1;var e=t(".n2-bulk-select").find("a");e.eq(0).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.select()})},this)),e.eq(1).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.deSelect()})},this)),e.eq(2).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.box.hasClass("n2-slide-state-published")?t.select():t.deSelect()})},this)),e.eq(3).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.box.hasClass("n2-slide-state-published")?t.deSelect():t.select()})},this));var i=t(".n2-bulk-actions").find("a");i.eq(0).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("deleteSlides")},this)),i.eq(1).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("duplicateSlides")},this)),i.eq(2).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("publishSlides")},this)),i.eq(3).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("unPublishSlides")},this))},n.prototype.addSelection=function(t){0==this.selection.length&&this.enterBulk(),this.selection.push(t)},n.prototype.removeSelection=function(e){this.selection.splice(t.inArray(e,this.selection),1),0==this.selection.length&&this.leaveBulk()},n.prototype.bulkSelect=function(t){for(var e=0;e<this.slides.length;e++)t(this.slides[e])},n.prototype.bulkAction=function(t){var e=[],i=[];this.bulkSelect(function(t){t.selected&&(e.push(t),i.push(t.getId()))}),i.length?this[t](i,e):nextend.notificationCenter.notice("Please select one or more slides for the action!")},n.prototype.enterBulk=function(){this.isBulkSelection||(this.isBulkSelection=!0,this.slidesContainer.sortable("option","disabled",!0),t("#n2-admin").addClass("n2-ss-has-box-selection"))},n.prototype.leaveBulk=function(){if(this.isBulkSelection){this.slidesContainer.sortable("option","disabled",!1),t("#n2-admin").removeClass("n2-ss-has-box-selection");for(var e=0;e<this.slides.length;e++)this.slides[e].deSelect();this.selection=[],this.isBulkSelection=!1}},n.prototype.deleteSlides=function(e,i){this.hideMenu();var n=i[0].box.find(".n2-box-button a").text();i.length>1&&(n+=" and "+(i.length-1)+" more"),NextendDeleteModal("slide-delete",n,t.proxy(function(){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"delete"}),type:"POST",data:{slides:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].deleted();this.initSlides(),this.leaveBulk()},this))},this))},n.prototype.duplicateSlides=function(e,i){for(var n=0;n<this.slides.length;n++)this.slides[n].selected&&this.slides[n].duplicate(t.Event("click",{currentTarget:null}))},n.prototype.publishSlides=function(e,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"publish"}),type:"POST",data:{slides:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].published();this.changed()},this))},n.prototype.unPublishSlides=function(e,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"unpublish"}),type:"POST",data:{slides:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].unPublished();this.changed()},this))},n.prototype.initMenu=function(){this.slide=null,this.menu=t("#n2-ss-slide-menu").detach().addClass("n2-inited"),this.menuActions={publish:this.menu.find(".n2-ss-publish").on("click",t.proxy(function(t){this.slide.switchPublished(t)},this)),unpublish:this.menu.find(".n2-ss-unpublish").on("click",t.proxy(function(t){this.slide.switchPublished(t)},this)),generator:this.menu.find(".n2-ss-generator").on("click",t.proxy(function(t){t.preventDefault(),t.stopPropagation(),window.location=this.slide.box.data("generator")},this)),duplicate:this.menu.find(".n2-ss-duplicate").on("click",t.proxy(function(t){this.slide.duplicate(t)},this)),"delete":this.menu.find(".n2-ss-delete").on("click",t.proxy(function(t){this.slide["delete"](t)},this)),setFirst:this.menu.find(".n2-ss-setFirst").on("click",t.proxy(function(t){this.slide.setFirst(t)},this)),saveLayout:this.menu.find(".n2-ss-saveLayout")},this.menu.find(".n2-button").on("click",t.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.menu.hasClass("n2-active")?this.menu.removeClass("n2-active").off("mouseleave"):this.menu.addClass("n2-active").on("mouseleave",function(){t(this).removeClass("n2-active")})},this))},n.prototype.showMenu=function(t){this.slide=t,this.menu.appendTo(t.box)},n.prototype.hideMenu=function(){this.menu.detach()},e.NextendSmartSliderAdminSidebarSlides=n,a.prototype.getId=function(){return this.box.data("slideid")},a.prototype.setFirst=function(e){e.stopPropagation(),e.preventDefault(),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.manager.ajaxUrl,{nextendaction:"first"}),type:"POST",data:{id:this.getId()}}).done(t.proxy(function(){this.manager.unsetFirst(),this.box.addClass("n2-slide-state-first")},this))},a.prototype.unsetFirst=function(){this.box.removeClass("n2-slide-state-first")},a.prototype.switchPublished=function(t){t.stopPropagation(),t.preventDefault(),this.isPublished()?this.manager.unPublishSlides([this.getId()],[this]):this.manager.publishSlides([this.getId()],[this])},a.prototype.isPublished=function(){return this.box.hasClass("n2-slide-state-published")},a.prototype.published=function(){this.box.addClass("n2-slide-state-published")},a.prototype.unPublished=function(){this.box.removeClass("n2-slide-state-published")},a.prototype.goToEdit=function(t,e){var i=this.box.data("editurl");"undefined"!=typeof e&&e?window.open(i,"_blank"):i==location.href?n2("#n2-admin").toggleClass("n2-ss-slides-outer-container-visible"):window.location=i},a.prototype.duplicate=function(e){e.stopPropagation(),e.preventDefault();var i=t.Deferred();return NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.box.data("editurl"),{nextendaction:"duplicate"})}).done(t.proxy(function(e){var n=t(e.data).insertAfter(this.box),r=new a(this.manager,n);this.manager.initSlides(),i.resolve(r)},this)),i},a.prototype["delete"]=function(t){t.stopPropagation(),t.preventDefault(),this.manager.deleteSlides([this.getId()],[this])},a.prototype.deleted=function(){this.box.remove()},a.prototype.invertSelection=function(t){t&&t.preventDefault(),this.selected?this.deSelect():this.select()},a.prototype.select=function(){this.selected||(this.selected=!0,this.box.addClass("n2-selected"),this.manager.addSelection(this))},a.prototype.deSelect=function(){this.selected&&(this.selected=!1,this.box.removeClass("n2-selected"),this.manager.removeSelection(this))},e.NextendSmartSliderAdminSlide=a}(n2,window),function(t,e,i,n){function a(i){this.detachedPosition={left:e.jStorage.get("ssPanelLeft")||100,top:e.jStorage.get("ssPanelTop")||100,height:e.jStorage.get("ssPanelHeight")||400},this.autoPosition=e.jStorage.get("ssPanelAutoPosition",1),this.lastHeight=this.detachedPosition.height,this.admin=e("#n2-admin"),this.sidebar=e("#n2-ss-slide-sidebar").on("mousedown",e.proxy(nextend.context.setMouseDownArea,nextend.context,"sidebarClicked")),this.title=this.sidebar.find(".n2-panel-titlebar-title"),this.sidebarTD=this.sidebar.parent(),this.layerManager=i,t.sidebarManager=this,this.editorPanel=e(".n2-ss-editor-panel"),this.views={layerEdit:e("#n2-ss-layer-edit")},this.viewPanes={layerEdit:e("#n2-tabbed-slide-editor-settings > .n2-tabs").addClass("n2-scrollable")};for(var n in this.viewPanes)this.viewPanes[n].on("DOMMouseScroll mousewheel",function(t){var i=!1;t.originalEvent&&(t.originalEvent.wheelDelta&&(i=t.originalEvent.wheelDelta/-1<0),t.originalEvent.deltaY&&(i=t.originalEvent.deltaY<0),t.originalEvent.detail&&(i=t.originalEvent.detail<0));var n=function(){return t.stopPropagation(),t.preventDefault(),t.returnValue=!1,!1};return!i&&this.scrollHeight<=e(this).innerHeight()+this.scrollTop+1?n():i&&0>=this.scrollTop-1?n():void 0});this.panelHeading=e("#n2-tabbed-slide-editor-settings").find(".n2-sidebar-tab-switcher .n2-td");var a=this.sidebar.find(".n2-panel-titlebar-nav-right");this.magnet=e('<a href="#"><i class="n2-i n2-i-magnet n2-i-grey-opacity" data-n2tip="Auto position layer window"></i></a>').on("click",e.proxy(function(t){t.preventDefault(),this.magnetize()},this)).css("display","none").appendTo(a),e('<a href="#"><i class="n2-i n2-i-closewindow n2-i-grey-opacity"></i></a>').on("click",e.proxy(function(t){t.preventDefault(),this.hide()},this)).appendTo(a),nextend.tooltip.add(a);var r=e("#n2-ss-slide-vertical-bar");e(".n2-ss-add-layer-button").on("click",function(t){t.preventDefault(),r.toggleClass("n2-active")}),e(".n2-ss-core-item").on("click",function(t){r.removeClass("n2-active")});var s=e("#wpadminbar, .navbar-fixed-top").height()+e(".n2-top-bar").height();this.$verticalBarInner=e(".n2-ss-slide-vertical-bar-inner").each(function(){var t=e(this);t.fixTo(t.parent(),{top:s})}),this.$resizeInnerContainer=e("#n2-ss-layers-switcher_0, #n2-ss-layers-switcher_1"),this.extraHeightToRemove=60,this.$resizeInnerContainer.length||(this.extraHeightToRemove=0,this.$resizeInnerContainer=this.$verticalBarInner),this.$resizeInnerContainer.css("overflow","auto"),this.detach(),e("#n2-admin").on("resize",e.proxy(this.resizeVerticalBar,this)),e(window).on("resize",e.proxy(this.onResize,this))}a.prototype.magnetize=function(){if(!this.autoPosition){this.autoPosition=1,e.jStorage.set("ssPanelAutoPosition",1),this.magnet.css("display","none");var t=this.layerManager.getSelectedLayer();t&&t.positionSidebar()}},a.prototype.show=function(t,i){this.setTitle(t.property.name),e("body").addClass("n2-ss-layer-edit-visible"),this.autoPosition&&this.sidebar.position({my:"left top",at:"right+10 top",collision:"flipfit",of:i.is(":visible")?i:"#n2-ss-layer-list"})},a.prototype._show=function(){e("body").addClass("n2-ss-layer-edit-visible")},a.prototype.hide=function(){e("body").removeClass("n2-ss-layer-edit-visible")},a.prototype.hideWithDeferred=function(t){e("body").hasClass("n2-ss-layer-edit-visible")&&(this.hide(),t.done(e.proxy(this._show,this)))},a.prototype.setTitle=function(t){this.title.html(t)},a.prototype.getLayerEditExcludedHeight=function(){return 85},a.prototype.resizeVerticalBar=function(){this.$resizeInnerContainer.height((window.innerHeight||document.documentElement.clientHeight)-(e("#n2-ss-layers").is(":visible")&&e("#n2-ss-layers").hasClass("n2-active")?e("#n2-ss-layers").height():0)-e("#wpadminbar, .navbar-fixed-top").height()-e(".n2-top-bar").height()-this.extraHeightToRemove)},a.prototype.onResize=function(){this.sidebar.css("display","block"),this.resizeVerticalBar();var t=window.innerHeight||document.documentElement.clientHeight,e=this.sidebar.height()-this.getLayerEditExcludedHeight();this.viewPanes.layerEdit.height(e);var i={},n=window.innerWidth||document.documentElement.clientWidth,a=this.sidebar[0].getBoundingClientRect();a.left<0?i.left=0:a.left+a.width>n&&(i.left=Math.max(0,n-a.width)),a.height>t-a.top&&(i.top=t-a.top-a.height+a.top,i.top<0&&(this.lastHeight=i.height=a.height+i.top,i.top=0)),this.sidebar.css(i),this.sidebar.css("display","")},a.prototype.detach=function(){this.autoPosition?(this.sidebar.css("height",this.detachedPosition.height),this.magnet.css("display","none")):(this.sidebar.css(this.detachedPosition),this.magnet.css("display","inline-block")),this.sidebar.appendTo(this.admin),this.admin.addClass("n2-sidebar-hidden"),e(window).off(".n2-ss-panel"),this.sidebar.removeClass("n2-sidebar-fixed"),this.sidebar.draggable({distance:5,handle:".n2-panel-titlebar",containment:"window",stop:e.proxy(function(t,i){this.sidebar.css("height",this.lastHeight);var n=this.sidebar[0].getBoundingClientRect();this.detachedPosition.left=n.left,this.detachedPosition.top=n.top,e.jStorage.set("ssPanelLeft",n.left),e.jStorage.set("ssPanelTop",n.top),this.autoPosition=0,e.jStorage.set("ssPanelAutoPosition",0),this.magnet.css("display","inline-block")},this),scroll:!1}).resizable({distance:5,handles:"s",stop:e.proxy(function(t,i){this.lastHeight=this.detachedPosition.height=this.sidebar.height(),e.jStorage.set("ssPanelHeight",this.detachedPosition.height)},this),create:e.proxy(function(t,i){e(t.target).find(".ui-resizable-handle").addClass("n2-ss-panel-resizer")},this)}),this.onResize(),nextend.triggerResize()},a.prototype.switchTab=function(t){this.panelHeading.filter('[data-tab="'+t+'"]').trigger("click")},i.NextendSmartSliderSidebar=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i,n,a,r,s,o){this.options=e.extend({slideAsFile:0},o),this.readyDeferred=e.Deferred(),t.slide=this,this._warnInternetExplorerUsers(),this.$slideContentElement=e("#"+n),this.$slideGuidesElement=e("#slideguides"),this.slideStartValue=this.$slideContentElement.val(),this.$sliderElement=e("#"+i),t.frontend=window["n2-ss-0"],t.ruler=new NextendSmartSliderRuler(this.$slideGuidesElement.val()),t.frontend.visible(function(){e("body").addClass("n2-ss-slider-visible");var t=e("#n2-tab-smartslider-editor"),i=t.tinyscrollbar({axis:"x",wheel:!1,wheelLock:!1}).data("plugin_tinyscrollbar");"function"==typeof t.get(0).move&&(t.get(0).move=null),this.sliderElement.on("SliderResize",function(){i.update("relative")})});var l=this.$sliderElement.data("fontsize");nextend.fontManager.setFontSize(l),nextend.styleManager.setFontSize(l),t.$currentSlideElement=t.frontend.adminGetCurrentSlideElement(),new SmartSliderAdminGenerator,t.$currentSlideElement.addClass("n2-ss-currently-edited-slide");var d=t.frontend.parameters.isStaticEdited;new NextendSmartSliderAdminSlideLayerManager(t.$currentSlideElement.data("slide"),d,a,r,s),d||this._initializeBackgroundChanger(),this.readyDeferred.resolve(),e("#smartslider-form").on({checkChanged:e.proxy(this.prepareFormForCheck,this),submit:e.proxy(this.onSlideSubmit,this)}),this.createHistory()}a.prototype.ready=function(t){this.readyDeferred.done(t)},a.prototype.prepareFormForCheck=function(){var e=JSON.stringify(t.layerManager.getData()),i=JSON.stringify(JSON.parse(Base64.decode(this.slideStartValue)));this.$slideContentElement.val(i==e?this.slideStartValue:Base64.encode(e))},a.prototype.onSlideSubmit=function(i){if(!nextend.isPreview)if(t.timelineControl.exitPreviewMode(),this.prepareForm(),i.preventDefault(),nextend.askToSave=!1,this.options.slideAsFile&&typeof window.FormData!==n&&"undefined"!=typeof window.File){var a=new FormData,r=e("#smartslider-form").serializeArray();e.each(r,function(t,e){"slide[slide]"==e.name?a.append("slide",new File([e.value],"slide.txt")):a.append(e.name,e.value)}),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(window.location.href),type:"POST",data:a,contentType:!1,processData:!1}).done(function(){nextend.askToSave=!0,e("#smartslider-form").trigger("saved")})}else NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(window.location.href),data:e("#smartslider-form").serialize(),dataType:"json"}).done(function(){nextend.askToSave=!0,e("#smartslider-form").trigger("saved")})},a.prototype.prepareForm=function(){this.$slideGuidesElement.val(Base64.encode(JSON.stringify(t.ruler.toArray()))),this.$slideContentElement.val(Base64.encode(JSON.stringify(t.layerManager.getData())))},a.prototype._initializeBackgroundChanger=function(){this.background={type:e("#slidebackground-type").on("nextendChange",e.proxy(this.__onAfterBackgroundTypeChange,this)),slideBackgroundColorField:e("#slidebackgroundColor").on("nextendChange",e.proxy(this.__onAfterBackgroundColorChange,this)),slideBackgroundGradientField:e("#slidebackgroundGradient").on("nextendChange",e.proxy(this.__onAfterBackgroundColorChange,this)),slideBackgroundColorEndField:e("#slidebackgroundColorEnd").on("nextendChange",e.proxy(this.__onAfterBackgroundColorChange,this)),slideBackgroundImageField:e("#slidebackgroundImage").on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),slideBackgroundImageOpacity:e("#slidebackgroundImageOpacity").on("nextendChange",e.proxy(this.__onAfterBackgroundImageOpacityChange,this)),slidebackgroundFocusX:e("#slidebackgroundFocusX").on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),slidebackgroundFocusY:e("#slidebackgroundFocusY").on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),slideBackgroundModeField:e("#slidebackgroundMode").on("nextendChange",e.proxy(this.__onAfterBackgroundImageChange,this)),backgroundImageElement:t.$currentSlideElement.find(".nextend-slide-bg"),canvas:t.$currentSlideElement.find(".n2-ss-slide-background")},this.currentBackgroundType=this.background.type.val();var i=e("#slidethumbnail");if(""==i.val()){var n=e("#item_imageimage"),a=e.proxy(function(t){""!=t&&"$system$/images/placeholder/image.png"!=t&&(i.val(t).trigger("change"),this.background.slideBackgroundImageField.off(".slidethumbnail"),n.off(".slidethumbnail"))},this);this.background.slideBackgroundImageField.on("nextendChange.slidethumbnail",e.proxy(function(){a(this.background.slideBackgroundImageField.val())},this)),n.on("nextendChange.slidethumbnail",e.proxy(function(){a(n.val())},this))}},a.prototype.__onAfterBackgroundTypeChange=function(){var e=this.background.type.val();switch(this.currentBackgroundType=e,e){case"image":this.__onAfterBackgroundImageChange();break;case"video":this.__onAfterBackgroundImageChange();break;case"color":t.$currentSlideElement.data("slideBackground").changeDesktop("","",this.background.slideBackgroundModeField.val(),this.background.slidebackgroundFocusX.val(),this.background.slidebackgroundFocusY.val()),this.__onAfterBackgroundColorChange()}},a.prototype.__onAfterBackgroundColorChange=function(){var t=this.background.slideBackgroundColorField.val(),e=this.background.slideBackgroundGradientField.val();if("off"!=e){var i=this.background.slideBackgroundColorEndField.val(),n=this.background.canvas.css({background:"",filter:""});switch(e){case"horizontal":n.css("background","#"+t.substr(0,6)).css("background","-moz-linear-gradient(left, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(left, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(to right, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+t.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=1)");break;case"vertical":n.css("background","#"+t.substr(0,6)).css("background","-moz-linear-gradient(top, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(top, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(to bottom, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+t.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=0)");break;case"diagonal1":n.css("background","#"+t.substr(0,6)).css("background","-moz-linear-gradient(45deg, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(45deg, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(45deg, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+t.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=1)");break;case"diagonal2":n.css("background","#"+t.substr(0,6)).css("background","-moz-linear-gradient(-45deg, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background"," -webkit-linear-gradient(-45deg, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","linear-gradient(-45deg, "+N2Color.hex2rgbaCSS(t)+" 0%,"+N2Color.hex2rgbaCSS(i)+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+t.substr(0,6)+"', endColorstr='#"+i.substr(0,6)+"',GradientType=1)")}}else"00"==t.substr(6,8)?this.background.canvas.css("background",""):this.background.canvas.css("background","#"+t.substr(0,6)).css("background",N2Color.hex2rgbaCSS(t))},a.prototype.__onAfterBackgroundImageChange=function(){t.$currentSlideElement.data("slideBackground").changeDesktop(t.generator.fill(this.background.slideBackgroundImageField.val()),"",this.background.slideBackgroundModeField.val(),this.background.slidebackgroundFocusX.val(),this.background.slidebackgroundFocusY.val()),this.__onAfterBackgroundImageOpacityChange()},a.prototype.__onAfterBackgroundImageOpacityChange=function(){t.$currentSlideElement.data("slideBackground").setOpacity(this.background.slideBackgroundImageOpacity.val()/100)},a.prototype._warnInternetExplorerUsers=function(){var t=this.__isInternetExplorer();t&&10>t&&alert(window.ss2lang.The_editor_was_tested_under_Internet_Explorer_10_Firefox_and_Chrome_Please_use_one_of_the_tested_browser)},a.prototype.__isInternetExplorer=function(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):!1},a.prototype.getLayout=function(){for(var i=e("#smartslider-form").serializeArray(),n={},a=0;a<i.length;a++){var r=i[a].name.match(/slide\[(.*?)\]/);r&&(n[r[1]]=i[a].value)}return delete n.generator,delete n.published,delete n.publishdates,delete n["record-start"],delete n["record-slides"],delete n.slide,n.slide=t.layerManager.getData(),n},a.prototype.loadLayout=function(i,n,a){var r=i.slide;if(delete i.slide,a?t.layerManager.loadData(r,!0):t.layerManager.loadData(r,!1),n)for(var s in i)e("#slide"+s).val(i[s]).trigger("change");i.slide=r},a.prototype.createHistory=function(){this.slideValues={},n2("#smartslider-form").find('input[id][name^="slide"], textarea[id][name^="slide"]').not("#slideslide").each(e.proxy(function(i,n){var a=e(n),r=a.data("field"),s=a.attr("id");this.slideValues[s]=a.val(),a.on("nextendChange",e.proxy(function(){var i=a.val(),n=this.slideValues[s];this.slideValues[s]=i,t.history.add(e.proxy(function(){return[this,"slideValueChange",i,n,[a,r]]},this))},this))},this))},a.prototype.history=function(t,e,i){switch(t){case"slideValueChange":i[1].insideChange(e)}},i.SmartSliderAdminSlide=a}(nextend.smartSlider,n2,window),function(t,e,i){function n(){NextendVisualManagerSetsAndMore.prototype.constructor.apply(this,arguments),this.setFontSize(16)}function a(){NextendVisualWithSetRow.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerSetsAndMore.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerSetsAndMore.prototype.loadDefaults.apply(this,arguments),this.type="splittextanimation",this.labels={visual:"Split text animation",visuals:"Split text animations"},this.styleClassName="",this.fontClassName=""},n.prototype.initController=function(){return new NextendSplitTextAnimationEditorController},n.prototype.createVisual=function(t,e){return new a(t,e,this)},n.prototype.setConnectedStyle=function(t){this.styleClassName=e("#"+t).data("field").renderStyle()},n.prototype.setConnectedFont=function(t){this.fontClassName=e("#"+t).data("field").renderFont()},n.prototype.setFontSize=function(t){this.controller.setFontSize(t)},n.prototype.setVisualAsStatic=function(t){if(null!==this.transformOriginElement){var e=this.transformOriginElement.data("field");e.insideChange(this.controller.transformOrigin),e.triggerOutsideChange()}switch(t.preventDefault(),this.mode){case"static":this.setAndClose(this.getBase64(n2_("Static"))),this.hide(t);break;default:NextendVisualManagerSetsAndMore.prototype.setVisualAsStatic.call(this,t)}},n.prototype.getBase64=function(t){return Base64.encode(JSON.stringify({name:t,data:this.controller.get("set")}))},n.prototype.show=function(t,i,n){this.transformOriginElement=n.transformOrigin,NextendVisualManagerSetsAndMore.prototype.show.call(this,t,i,n),""==t&&e.when(this.activeSet._loadVisuals()).done(e.proxy(function(){for(var t in this.activeSet.visuals){this.activeSet.visuals[t].activate();break}},this))},i.NextendSplitTextAnimationManager=n,a.prototype=Object.create(NextendVisualWithSetRow.prototype),a.prototype.constructor=a,a.prototype.activate=function(t){"undefined"!=typeof t&&t.preventDefault(),this.visualManager.changeActiveVisual(this),"undefined"!=typeof this.value.transformOrigin&&this.visualManager.controller.loadTransformOrigin(this.value.transformOrigin),this.visualManager.controller.load(this.value.animation,!1,this.visualManager.showParameters)},i.NextendSplitTextAnimation=a}(nextend.smartSlider,n2,window),function($,scope){function NextendSplitTextAnimationEditorController(){this.timeline=new NextendTimeline,NextendVisualEditorControllerWithEditor.prototype.constructor.apply(this,arguments),this.preview=$("#n2-splittextanimation-editor-preview"),this.initBackgroundColor()}function NextendSplitTextAnimationEditor(){NextendVisualEditor.prototype.constructor.apply(this,arguments),this.fields={mode:{element:$("#n2-splittextanimation-editormode"),events:{"outsideChange.n2-editor":$.proxy(this.changeMode,this)}},sort:{element:$("#n2-splittextanimation-editorsort"),events:{"outsideChange.n2-editor":$.proxy(this.changeSort,this)}},duration:{element:$("#n2-splittextanimation-editorduration"),events:{"outsideChange.n2-editor":$.proxy(this.changeDuration,this)}},stagger:{element:$("#n2-splittextanimation-editorstagger"),events:{"outsideChange.n2-editor":$.proxy(this.changeStagger,this)}},easing:{element:$("#n2-splittextanimation-editoreasing"),events:{"outsideChange.n2-editor":$.proxy(this.changeEasing,this)}},opacity:{element:$("#n2-splittextanimation-editoropacity"),events:{"outsideChange.n2-editor":$.proxy(this.changeOpacity,this)}},offset:{element:$("#n2-splittextanimation-editoroffset"),events:{"outsideChange.n2-editor":$.proxy(this.changeOffset,this)}},rotate:{element:$("#n2-splittextanimation-editorrotate"),events:{"outsideChange.n2-editor":$.proxy(this.changeRotate,this)}},scale:{element:$("#n2-splittextanimation-editorscale"),events:{"outsideChange.n2-editor":$.proxy(this.changeScale,this)}},transformOrigin:{element:$("#n2-splittextanimation-editortransformorigin"),events:{"outsideChange.n2-editor":$.proxy(this.changeTransformOrigin,this)}}}}NextendSplitTextAnimationEditorController.prototype=Object.create(NextendVisualEditorControllerWithEditor.prototype),NextendSplitTextAnimationEditorController.prototype.constructor=NextendSplitTextAnimationEditorController,NextendSplitTextAnimationEditorController.prototype.loadDefaults=function(){NextendVisualEditorControllerWithEditor.prototype.loadDefaults.call(this),this.type="splittextanimation",this.group="in",this.preview=null,this.playing=!1,this.transformOrigin="0|*|0|*|0",this.mySplitText=null,this.repeatTimeout=null},NextendSplitTextAnimationEditorController.prototype.initRenderer=function(){return new NextendVisualRenderer(this)},NextendSplitTextAnimationEditorController.prototype.initEditor=function(){return new NextendSplitTextAnimationEditor},NextendSplitTextAnimationEditorController.prototype._load=function(t,e,i){this.group=i.group,NextendVisualEditorControllerWithEditor.prototype._load.call(this,$.extend(!0,{},this.getEmptyVisual(),t),e,i),this.render(i.previewHTML)},NextendSplitTextAnimationEditorController.prototype.propertyChanged=function(t,e,i){NextendVisualEditorControllerWithEditor.prototype.propertyChanged.call(this,t,e,i),this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.get=function(t){return"saveAsNew"==t?{transformOrigin:this.transformOrigin,animation:this.currentVisual}:this.currentVisual},NextendSplitTextAnimationEditorController.prototype.getEmptyVisual=function(){return{mode:"chars",sort:"normal",duration:.4,stagger:.05,ease:"easeOutCubic",opacity:1,scale:1,x:0,y:0,rotationX:0,rotationY:0,rotationZ:0}},NextendSplitTextAnimationEditorController.prototype.initBackgroundColor=function(){new NextendElementText("n2-splittextanimation-editor-background-color"),new NextendElementColor("n2-splittextanimation-editor-background-color",0);var t=this.lightbox.find(".n2-editor-preview-box");
$("#n2-splittextanimation-editor-background-color").on("nextendChange",function(){t.css("background","#"+$(this).val())})},NextendSplitTextAnimationEditorController.prototype.render=function(html){var fontClassName=nextend.splittextanimationManager.fontClassName,styleClassName=nextend.splittextanimationManager.styleClassName;html=html.replace(/\{([^]*?)\}/g,function(match,script){return eval(script)}),this.preview.html(html),this.visible&&this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.refreshTimeline=function(){this.killPreview();var t=$.extend({},this.currentVisual),e=t.mode;"chars"==e&&(e+=",words"),this.mySplitText=new NextendSplitText(this.preview.find("span"),{type:e});var i=[];switch(t.mode){case"words":i=this.mySplitText.words;break;case"lines":i=this.mySplitText.lines;break;default:i=this.mySplitText.chars}delete t.mode,this.timeline=new NextendTimeline({repeat:-1});var n=t.duration,a=t.stagger;delete t.duration,delete t.stagger,NextendTween.set(i,{transformOrigin:this.transformOrigin.split("|*|").join("% ")+"px"});var r=null;switch(t.sort){case"reversed":i.reverse();break;case"random":var s=function(t,e,i,n){for(i=t.length;i;)e=Math.random()*i--|0,n=t[i],t[i]=t[e],t[e]=n};s(i);break;case"side":case"center":var o=[];for(r=[];i.length>1;)o.push(i.shift()),r.push(i.pop());1==i.length&&o.push(i.shift()),i=o,"center"==t.sort&&(i.reverse(),r.reverse());break;case"sideShifted":case"centerShifted":for(var o=[];i.length>1;)o.push(i.shift()),o.push(i.pop());1==i.length&&o.push(i.shift()),i=o,"centerShifted"==t.sort&&i.reverse()}if(delete t.sort,"out"==this.group){var l=this.getEmptyVisual();delete l.mode,delete l.sort,delete l.duration,delete l.easing,delete l.stagger,this.timeline.staggerFromTo(i,n,l,t,-a,.3),r&&r.length&&this.timeline.staggerFromTo(r,n,l,t,-a,.3)}else this.timeline.staggerFrom(i,n,t,a,.3),r&&r.length&&this.timeline.staggerFrom(r,n,t,a,.3);this.timeline.eventCallback("onComplete",$.proxy(function(){this.repeatTimeout=setTimeout($.proxy(function(){this.timeline.play(0,!1)},this),500)},this)),this.timeline.play()},NextendSplitTextAnimationEditorController.prototype.killPreview=function(){this.repeatTimeout&&clearTimeout(this.repeatTimeout),this.timeline.pause(),this.mySplitText&&this.mySplitText.revert()},NextendSplitTextAnimationEditorController.prototype.show=function(){this.loadTransformOrigin(nextend.splittextanimationManager.transformOriginElement.val()),NextendVisualEditorControllerWithEditor.prototype.show.call(this),this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.close=function(){this.killPreview(),NextendVisualEditorControllerWithEditor.prototype.close.call(this)},NextendSplitTextAnimationEditorController.prototype.loadTransformOrigin=function(t){this.editor.fields.transformOrigin.element.data("field").insideChange(t),this.refreshTransformOrigin(t,!1)},NextendSplitTextAnimationEditorController.prototype.refreshTransformOrigin=function(t,e){this.transformOrigin=t,NextendTween.set(this.preview.parent().get(0),{perspective:"1000px"}),e&&this.refreshTimeline()},NextendSplitTextAnimationEditorController.prototype.setFontSize=function(t){this.preview.css("fontSize",t),this.preview.css("margin","100px 30px")},scope.NextendSplitTextAnimationEditorController=NextendSplitTextAnimationEditorController,NextendSplitTextAnimationEditor.prototype=Object.create(NextendVisualEditor.prototype),NextendSplitTextAnimationEditor.prototype.constructor=NextendSplitTextAnimationEditor,NextendSplitTextAnimationEditor.prototype.load=function(t){this._off(),this.fields.mode.element.data("field").insideChange(t.mode),t.sort||(t.sort="normal"),this.fields.sort.element.data("field").insideChange(t.sort),this.fields.duration.element.data("field").insideChange(1e3*t.duration),this.fields.stagger.element.data("field").insideChange(1e3*t.stagger),this.fields.easing.element.data("field").insideChange(t.ease),this.fields.opacity.element.data("field").insideChange(100*t.opacity),this.fields.offset.element.data("field").insideChange(t.x+"|*|"+t.y),this.fields.rotate.element.data("field").insideChange(t.rotationX+"|*|"+t.rotationY+"|*|"+t.rotationZ),this.fields.scale.element.data("field").insideChange(100*t.scale),this.fields.transformOrigin.element.data("field").insideChange(nextend.splittextanimationManager.controller.transformOrigin),this._on()},NextendSplitTextAnimationEditor.prototype.changeMode=function(){this.trigger("mode",this.fields.mode.element.val())},NextendSplitTextAnimationEditor.prototype.changeSort=function(){this.trigger("sort",this.fields.sort.element.val())},NextendSplitTextAnimationEditor.prototype.changeDuration=function(){this.trigger("duration",this.fields.duration.element.val()/1e3)},NextendSplitTextAnimationEditor.prototype.changeStagger=function(){this.trigger("stagger",this.fields.stagger.element.val()/1e3)},NextendSplitTextAnimationEditor.prototype.changeEasing=function(){this.trigger("ease",this.fields.easing.element.val())},NextendSplitTextAnimationEditor.prototype.changeOpacity=function(){this.trigger("opacity",this.fields.opacity.element.val()/100)},NextendSplitTextAnimationEditor.prototype.changeOffset=function(){var t=this.fields.offset.element.val().split("|*|");this.trigger("x",t[0]),this.trigger("y",t[1])},NextendSplitTextAnimationEditor.prototype.changeRotate=function(){var t=this.fields.rotate.element.val().split("|*|");this.trigger("rotationX",t[0]),this.trigger("rotationY",t[1]),this.trigger("rotationZ",t[2])},NextendSplitTextAnimationEditor.prototype.changeScale=function(){this.trigger("scale",this.fields.scale.element.val()/100)},NextendSplitTextAnimationEditor.prototype.changeTransformOrigin=function(){nextend.splittextanimationManager.controller.refreshTransformOrigin(this.fields.transformOrigin.element.val(),!0)},scope.NextendSplitTextAnimationEditor=NextendSplitTextAnimationEditor}(n2,window),function(t,e,i,n){function a(t){this.key="n2-ss-editor-device-lock-mode",this.devices={unknownUnknown:e("<div />")},this.responsives=[t],t.setOrientation("portrait"),t.parameters.onResizeEnabled=0,t.parameters.forceFull=0,t._getDevice=t._getDeviceZoom,this.lock=e("#n2-ss-lock").on("click",e.proxy(this.switchLock,this));var i=t.parameters.sliderWidthToDevice.desktopPortrait;this.container=t.containerElement.closest(".n2-ss-container-device").addBack(),this.container.width(i),this.containerWidth=i,this.initZoom();var n=e("#n2-ss-devices .n2-tr"),a=t.parameters.deviceModes;this.devices.desktopPortrait=e('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-desktop"></i></div>').prependTo(n),a.desktopLandscape?this.devices.desktopLandscape=e('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-desktop-landscape"></i></div>').prependTo(n):this.devices.desktopLandscape=this.devices.desktopPortrait,a.tabletPortrait?this.devices.tabletPortrait=e('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-tablet"></i></div>').prependTo(n):this.devices.tabletPortrait=this.devices.desktopPortrait,a.tabletLandscape?this.devices.tabletLandscape=e('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-tablet-landscape"></i></div>').prependTo(n):this.devices.tabletLandscape=this.devices.desktopLandscape,a.mobilePortrait?this.devices.mobilePortrait=e('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-mobile"></i></div>').prependTo(n):this.devices.mobilePortrait=this.devices.tabletPortrait,a.mobileLandscape?this.devices.mobileLandscape=e('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-mobile-landscape"></i></div>').prependTo(n):this.devices.mobileLandscape=this.devices.tabletLandscape,this.deviceOptions=e("#n2-ss-devices .n2-panel-option"),this.deviceOptions.each(e.proxy(function(t,i){e(i).on({mousedown:e.proxy(nextend.context.setMouseDownArea,nextend.context,"zoomDeviceClicked"),click:e.proxy(this.setDeviceMode,this)})},this)),t.sliderElement.on("SliderDeviceOrientation",e.proxy(this.onDeviceOrientationChange,this))}var r=null;nextend.ssBeforeResponsive=function(){r=new a(this),nextend.ssBeforeResponsive=function(){r.add(this)}},a.prototype.add=function(t){this.responsives.push(t),t.setOrientation("portrait"),t.parameters.onResizeEnabled=0,t.parameters.forceFull=0,t._getDevice=t._getDeviceZoom},a.prototype.onDeviceOrientationChange=function(t,i){e("#n2-admin").removeClass("n2-ss-mode-"+i.lastDevice+i.lastOrientation).addClass("n2-ss-mode-"+i.device+i.orientation),this.devices[i.lastDevice+i.lastOrientation].removeClass("n2-active"),this.devices[i.device+i.orientation].addClass("n2-active")},a.prototype.setDeviceMode=function(i){var n=e(i.currentTarget);if((i.ctrlKey||i.metaKey)&&t.layerManager){var a=n.data("orientation");t.layerManager.copyOrResetMode(n.data("device")+a[0].toUpperCase()+a.substr(1))}else for(var r=0;r<this.responsives.length;r++)this.responsives[r].setOrientation(n.data("orientation")),this.responsives[r].setMode(n.data("device"),this.responsives[0])},a.prototype.switchLock=function(t){t.preventDefault(),this.lock.toggleClass("n2-active"),this.lock.hasClass("n2-active")?(this.setZoomSyncMode(),this.zoomChange(this.zoom.slider("value"),"sync",!1),e.jStorage.set(this.key,"sync")):(this.setZoomFixMode(),e.jStorage.set(this.key,"fix"))},a.prototype.initZoom=function(){var t=e("#n2-ss-slider-zoom");if(t.length>0){"undefined"!=typeof t[0].slide&&(t[0].slide=null),this.zoom=t.removeAttr("slide").slider({range:"min",step:1,value:1,min:0,max:102}),this.responsives[0].sliderElement.on("SliderResize",e.proxy(this.sliderResize,this)),"fix"==e.jStorage.get(this.key,"sync")?this.setZoomFixMode():(this.setZoomSyncMode(),this.lock.addClass("n2-active"));var i=t.parent(),n=e.proxy(function(t){var e=this.zoom.slider("value");this.zoom.slider("value",e+t)},this),a=null,r=e.proxy(function(t){n(t),a=setInterval(e.proxy(n,this,t),40)},this);i.find(".n2-i-minus").on({mousedown:e.proxy(r,this,-1),"mouseup mouseleave":function(){a&&(clearInterval(a),a=null)}}),i.find(".n2-i-plus").on({mousedown:e.proxy(r,this,1),"mouseup mouseleave":function(){a&&(clearInterval(a),a=null)}})}},a.prototype.sliderResize=function(t,e){this.setZoom()},a.prototype.setZoomFixMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":e.proxy(this.zoomChangeFixMode,this),"slidechange.n2-ss-zoom":e.proxy(this.zoomChangeFixMode,this)})},a.prototype.setZoomSyncMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":e.proxy(this.zoomChangeSyncMode,this),"slidechange.n2-ss-zoom":e.proxy(this.zoomChangeSyncMode,this)})},a.prototype.zoomChangeFixMode=function(t,e){this.zoomChange(e.value,"fix",e)},a.prototype.zoomChangeSyncMode=function(t,e){this.zoomChange(e.value,"sync",e)},a.prototype.zoomChange=function(t,e,i){var n=1;50>t?n=nextend.smallestZoom/this.containerWidth+Math.max(t/50,0)*(1-nextend.smallestZoom/this.containerWidth):t>52&&(n=1+(t-52)/50);var a=parseInt(n*this.containerWidth);this.container.width(a);for(var r=1;r<this.responsives.length;r++)this.responsives[r].containerElement.width(a);for(var r=0;r<this.responsives.length;r++)switch(e){case"sync":this.responsives[r].doResize();break;default:this.responsives[r].doResize(!0)}i&&(i.handle.innerHTML=a+"px")},a.prototype.setZoom=function(){var t=this.responsives[0].containerElement.width()/this.containerWidth,e=50;1>t?e=(t-nextend.smallestZoom/this.containerWidth)/(1-nextend.smallestZoom/this.containerWidth)*50:t>1&&(e=50*(t-1)+52);this.zoom.slider("value");this.zoom.slider("value",e)}}(nextend.smartSlider,n2,window),function(t,e){function i(e){this.createSliderModal=null,this.ajaxUrl=e,t(".n2-ss-create-slider").click(t.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),nextend.smartSlider.license.isActiveAsync(!0).done(t.proxy(this.showModal,this))},this)),this.notificationStack=new NextendNotificationCenterStackModal(t("body")),t(".n2-ss-add-sample-slider").click(t.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),nextend.smartSlider.license.isActiveAsync().done(t.proxy(this.showDemoSliders,this))},this)),"createslider"==window.location.hash.substring(1)&&this.showModal()}i.prototype.showModal=function(){if(!this.createSliderModal){var e=this.ajaxUrl,i=[];i.push({key:"default",name:n2_("Default"),image:"$ss$/admin/images/sliderpresets/default.png"}),i.push({key:"fullwidth",name:n2_("Full width"),image:"$ss$/admin/images/sliderpresets/fullwidth.png"}),i.push({key:"fullpage",name:n2_("Full page"),image:"$ss$/admin/images/sliderpresets/fullpage.png"}),i.push({key:"block",name:n2_("Block"),image:"$ss$/admin/images/sliderpresets/block.png"}),i.push({key:"carousel",name:n2_("Carousel"),image:"$ss$/admin/images/sliderpresets/carousel.png"}),i.push({key:"showcase",name:n2_("Showcase"),image:"$ss$/admin/images/sliderpresets/showcase.png"}),i.push({key:"thumbnailhorizontal",name:n2_("Thumbnail - horizontal"),image:"$ss$/admin/images/sliderpresets/thumbnailhorizontal.png"}),i.push({key:"thumbnailvertical",name:n2_("Thumbnail - vertical"),image:"$ss$/admin/images/sliderpresets/thumbnailvertical.png"}),i.push({key:"caption",name:n2_("Bar"),image:"$ss$/admin/images/sliderpresets/caption.png"}),i.push({key:"horizontalaccordion",name:n2_("Horizontal accordion"),image:"$ss$/admin/images/sliderpresets/horizontalaccordion.png"}),i.push({key:"verticalaccordion",name:n2_("Vertical accordion"),image:"$ss$/admin/images/sliderpresets/verticalaccordion.png"}),this.createSliderModal=new NextendModal({zero:{size:[N2SSPRO?750:550,N2SSPRO?630:520],title:n2_("Create Slider"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Create")+"</a>"],fn:{show:function(){var n=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),n.trigger("click")});a.append(this.createInput(n2_("Slider name"),"slidertitle","width: 240px;")),a.append(this.createInputUnit(n2_("Width"),"sliderwidth","px","width: 30px;")),a.append(this.createInputUnit(n2_("Height"),"sliderheight","px","width: 30px;")),new NextendElementAutocompleteSimple("sliderwidth",["1920","1200","1000","800","600","400"]),new NextendElementAutocompleteSimple("sliderheight",["800","600","500","400","300","200"]);var r=t("#slidertitle").val(n2_("Slider")).focus(),s=t("#sliderwidth").val(900),o=t("#sliderheight").val(500);s.parent().addClass("n2-form-element-autocomplete ui-front"),o.parent().addClass("n2-form-element-autocomplete ui-front"),this.createHeading(n2_("Preset")).appendTo(this.content);var l=this.createImageRadio(i).css("height",N2SSPRO?360:100).appendTo(this.content),d=l.find("input");n.on("click",t.proxy(function(){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(e,{nextendaction:"create"}),data:{sliderTitle:r.val(),sliderSizeWidth:s.val(),sliderSizeHeight:o.val(),preset:d.val()},dataType:"json"}).done(t.proxy(function(t){NextendAjaxHelper.startLoading()},this))},this))}}}})}this.createSliderModal.show()},i.prototype.showDemoSliders=function(){var e=this;t("body").css("overflow","hidden");var i=0;i=1;var n=t('<iframe src="//smartslider3.com/demo-import/?pro='+i+"&version="+N2SS3VERSION+"&utm_campaign="+N2SS3C+"&utm_source=import-slider-frame&utm_medium=smartslider-"+N2PLATFORM+"-"+(i?"pro":"free")+'" frameborder="0"></iframe>').css({position:"fixed",zIndex:1e5,left:0,top:0,width:"100%",height:"100%"}).appendTo("body"),a=function(){t("body").css("overflow",""),n.remove(),window.removeEventListener("message",s,!1),e.notificationStack.popStack()},r=function(t){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(e.ajaxUrl,{nextendaction:"importDemo"}),data:{key:Base64.encode(t.replace(/^(http(s)?:)?\/\//,"//"))},dataType:"json"}).fail(function(){})},s=function(t){if("http://smartslider3.com"===t.origin||"https://smartslider3.com"===t.origin){var e=t.data;switch(e.key){case"importSlider":return void r(e.data.href);case"closeWindow":a()}}};this.notificationStack.enableStack(),NextendEsc.add(t.proxy(function(){return a(),!0},this)),window.addEventListener("message",s,!1)},e.NextendSmartSliderCreateSlider=i}(n2,window),function(t,e){function i(e,i){this.ajaxUrl=i,this.sliders=[],this.sliderPanel=t("#n2-ss-slider-container"),this.orderBy="ordering"==this.sliderPanel.data("orderby"),this.slidersContainer=this.sliderPanel.find(".n2-ss-sliders-container");for(var n=this.slidersContainer.find(".n2-ss-box-slider"),a=0;a<n.length;a++)this.sliders.push(new NextendSmartSliderAdminSlider(this,n.eq(a)));this.changed(),this.initMenu(),this.initOrderable(),this.create=new NextendSmartSliderCreateSlider(i),this.initBulk()}i.prototype.changed=function(){t("html").attr("data-sliders",this.sliders.length)},i.prototype.initSliders=function(){for(var e=(this.sliders.length,this.slidersContainer.find(".n2-ss-box-slider")),i=[],n=0;n<e.length;n++){var a=e.eq(n).data("slider");i.push(a)}this.sliders=i,this.changed(),t(window).triggerHandler("SmartSliderSidebarSlidersChanged")},i.prototype.initOrderable=function(){this.orderBy&&this.slidersContainer.sortable({items:".n2-ss-box-slider",tolerance:"pointer",stop:t.proxy(this.saveOrder,this),helper:"clone",placeholder:"n2-box-sortable-placeholder n2-box",distance:10})},i.prototype.saveOrder=function(e){for(var i=this.slidersContainer.find(".n2-ss-box-slider"),n=[],a=[],r=[],s=0;s<i.length;s++){var o=i.eq(s).data("slider");n.push(o),a.push(o.getId())}for(var s=0;s<this.sliders.length;s++)r.push(this.sliders[s].getId());if(JSON.stringify(r)!=JSON.stringify(a)){t(window).triggerHandler("SmartSliderSidebarSlidersOrderChanged");var l={nextendcontroller:"sliders",nextendaction:"order"};NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,l),data:{sliderorder:a,isReversed:"DESC"==this.sliderPanel.data("orderbydirection")?1:0}}),this.sliders=n}},i.prototype.initMenu=function(){this.slider=null,this.menu=t("#n2-ss-slider-menu").detach().addClass("n2-inited"),this.menuActions={duplicate:this.menu.find(".n2-ss-duplicate").on("click",t.proxy(function(t){this.slider.duplicate(t)},this)),"delete":this.menu.find(".n2-ss-delete").on("click",t.proxy(function(t){this.slider["delete"](t)},this)),preview:this.menu.find(".n2-ss-preview").on("click",t.proxy(function(t){this.slider.preview(t)},this))},this.menu.find(".n2-button").on("click",t.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.menu.hasClass("n2-active")?this.menu.removeClass("n2-active").off("mouseleave"):this.menu.addClass("n2-active").on("mouseleave",function(){t(this).removeClass("n2-active")})},this))},i.prototype.showMenu=function(t){this.slider=t,this.menu.appendTo(t.box)},i.prototype.hideMenu=function(){this.menu.detach()},i.prototype.deleteSliders=function(e,i){this.hideMenu();var n=i[0].box.find(".n2-box-button a").text();i.length>1&&(n+=" and "+(i.length-1)+" more"),NextendDeleteModal("slider-delete",n,t.proxy(function(){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendcontroller:"sliders",nextendaction:"delete"}),type:"POST",data:{sliders:e}}).done(t.proxy(function(){for(var t=0;t<i.length;t++)i[t].deleted();this.initSliders(),this.leaveBulk()},this))},this))},i.prototype.duplicateSliders=function(e,i){for(var n=0;n<this.sliders.length;n++)this.sliders[n].selected&&this.sliders[n].duplicate(t.Event("click",{currentTarget:null}))},i.prototype.exportSliders=function(e,i){window.location.href=NextendAjaxHelper.makeFallbackUrl(this.ajaxUrl,{nextendcontroller:"sliders",nextendaction:"exportAll"})+"&"+t.param({sliders:e})},i.prototype.initBulk=function(){this.selection=[],this.isBulkSelection=!1;var e=t(".n2-bulk-select").find("a");e.eq(0).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.select()})},this)),e.eq(1).on("click",t.proxy(function(t){t.preventDefault(),this.bulkSelect(function(t){t.deSelect()})},this));var i=t(".n2-bulk-actions").find("a");i.eq(0).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("deleteSliders")},this)),i.eq(1).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("duplicateSliders")},this)),i.eq(2).on("click",t.proxy(function(t){t.preventDefault(),this.bulkAction("exportSliders")},this))},i.prototype.addSelection=function(t){0==this.selection.length&&this.enterBulk(),this.selection.push(t)},i.prototype.removeSelection=function(e){this.selection.splice(t.inArray(e,this.selection),1),0==this.selection.length&&this.leaveBulk()},i.prototype.bulkSelect=function(t){for(var e=0;e<this.sliders.length;e++)t(this.sliders[e])},i.prototype.bulkAction=function(t){var e=[],i=[];this.bulkSelect(function(t){t.selected&&(e.push(t),i.push(t.getId()))}),i.length?this[t](i,e):nextend.notificationCenter.notice("Please select one or more sliders for the action!")},i.prototype.enterBulk=function(){this.isBulkSelection||(this.isBulkSelection=!0,this.orderBy&&this.slidersContainer.sortable("option","disabled",!0),t("#n2-admin").addClass("n2-ss-has-box-selection"))},i.prototype.leaveBulk=function(){if(this.isBulkSelection){this.orderBy&&this.slidersContainer.sortable("option","disabled",!1),t("#n2-admin").removeClass("n2-ss-has-box-selection");for(var e=0;e<this.sliders.length;e++)this.sliders[e].deSelect();this.selection=[],this.isBulkSelection=!1}},e.NextendSmartSliderManageSliders=i}(n2,window),function(t,e){function i(e,i){this.selected=!1,this.manager=e,this.box=i.data("slider",this).addClass("n2-clickable"),this.box.on("mouseenter",t.proxy(function(){this.manager.showMenu(this)},this)).on("mouseleave",t.proxy(function(){this.manager.hideMenu()},this)).on("click.n2-slider",t.proxy(this.goToEdit,this)),this.box.find(".n2-ss-box-select").on("click",t.proxy(function(t){t.stopPropagation(),t.preventDefault(),this.invertSelection()},this))}i.prototype.getId=function(){return this.box.data("sliderid")},i.prototype.goToEdit=function(t,e){var i=this.box.data("editurl");"undefined"!=typeof e&&e?window.open(i,"_blank"):window.location=i},i.prototype.preview=function(t){t.stopPropagation(),t.preventDefault(),window.open(NextendAjaxHelper.makeFallbackUrl(this.box.data("editurl"),{nextendcontroller:"preview",nextendaction:"index"}),"_blank")},i.prototype.duplicate=function(e){e.stopPropagation(),e.preventDefault();var n=t.Deferred();return NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.box.data("editurl"),{nextendcontroller:"slider",nextendaction:"duplicate"})}).done(t.proxy(function(e){var a=t(e.data).insertAfter(this.box),r=new i(this.manager,a);this.manager.initSliders(),n.resolve(r)},this)),n},i.prototype["delete"]=function(t){t.stopPropagation(),t.preventDefault(),this.manager.deleteSliders([this.getId()],[this])},i.prototype.deleted=function(){this.box.remove()},i.prototype.invertSelection=function(t){t&&t.preventDefault(),this.selected?this.deSelect():this.select()},i.prototype.select=function(){this.selected||(this.selected=!0,this.box.addClass("n2-selected"),this.manager.addSelection(this))},i.prototype.deSelect=function(){this.selected&&(this.selected=!1,this.box.removeClass("n2-selected"),this.manager.removeSelection(this))},e.NextendSmartSliderAdminSlider=i}(n2,window),function(t,e){function i(e,i){this.element=t("#"+e),this.managerIdentifier=i,this.element.parent().on("click",t.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),this.name=this.element.siblings("input"),this.updateName(this.element.val()),NextendElement.prototype.constructor.apply(this,arguments)}function n(){i.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.show=function(e){e.preventDefault(),nextend[this.managerIdentifier].show(this.element.val(),t.proxy(this.save,this))},i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.save=function(t,e){this.val(e)},i.prototype.val=function(t){this.element.val(t),this.updateName(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.updateName(t),this.triggerInsideChange()},i.prototype.updateName=function(t){t=""==t?n2_("Disabled"):t.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(t)},e.NextendElementAnimationManager=i,n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.clear=function(t){t.preventDefault(),t.stopPropagation();var e=this.element.val().split("|*|");e[2]="",this.val(e.join("|*|"))},n.prototype.updateName=function(t){var e=t.split("|*|");t=e[2],t=""==t?n2_("Disabled"):t.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(t)},e.NextendElementPostAnimationManager=n}(n2,window),function(t,e){function i(e,i){this.value="",this.element=t("#"+e),this.$container=this.element.closest(".n2-form-tab"),this.panel=t("#"+e+"-panel"),this.setValue(i),this.options=this.panel.find(".n2-subform-image-option").on("click",t.proxy(this.selectOption,this)),this.active=this.getIndex(this.options.filter(".n2-active").get(0)),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.selectOption=function(e){var i=this.getIndex(e.currentTarget);if(i!=this.active){this.options.eq(i).addClass("n2-active"),this.options.eq(this.active).removeClass("n2-active"),this.active=i;var n=t(e.currentTarget).data("value");this.insideChange(n),this.setValue(n)}},i.prototype.setValue=function(t){this.$container.removeClass("n2-ss-background-type-"+this.value),this.value=t,this.$container.addClass("n2-ss-background-type-"+this.value)},i.prototype.insideChange=function(t){this.element.val(t),this.triggerInsideChange()},i.prototype.getIndex=function(e){return t.inArray(e,this.options)},e.NextendElementBackground=i}(n2,window),function(t,e){function i(e){this.status=0,this.element=t("#"+e),this.$container=t(".n2-ss-parent-picker"),this.overlays=null,this.aligns=this.element.parent().parent().siblings(),this.picker=this.element.siblings(".n2-ss-layer-picker").on({click:t.proxy(function(){this.change("")},this)}),NextendElement.prototype.constructor.apply(this,arguments)}var n={INITIALIZED:0,PICK_PARENT:1,PICK_CHILD:2,PICK_PARENT_ALIGN:3,PICK_CHILD_ALIGN:4},a='<div class="n2-ss-picker-overlay-tile" data-align="left" data-valign="top" /><div class="n2-ss-picker-overlay-tile" data-align="center" data-valign="top" style="left:33%;top:0;" /><div class="n2-ss-picker-overlay-tile" data-align="right" data-valign="top" style="left:66%;top:0;width:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="left" data-valign="middle" style="left:0;top:33%;" /><div class="n2-ss-picker-overlay-tile" data-align="center" data-valign="middle" style="left:33%;top:33%; " /><div class="n2-ss-picker-overlay-tile" data-align="right" data-valign="middle" style="left:66%;top:33%;width:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="left" data-valign="bottom" style="left:0;top:66%;height:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="center" data-valign="bottom" style="left:33%;top:66%;height:34%;" /><div class="n2-ss-picker-overlay-tile" data-align="right" data-valign="bottom" style="left:66%;top:66%;width:34%;height:34%;" />';i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.click=function(e){return t("#n2-admin").hasClass("n2-ss-mode-desktopPortrait")?void(this.status==n.INITIALIZED?(this.data={parent:null,parentVAlign:null,parentHAlign:null,child:null,childVAlign:null,childHAlign:null},t("body").on("mousedown.n2-ss-parent-linker",t.proxy(function(e){var i=t(e.target);i.parent();i.hasClass("n2-ss-picker-overlay")||i.hasClass("n2-ss-picker-overlay-tile")||this.destroy()},this)),NextendEsc.add(t.proxy(function(){return this.destroy(),!1},this)),this.pickParent(e)):(this.data=null,this.change(""),this.destroy())):void nextend.notificationCenter.notice("To chain layers together, please switch to desktop portrait mode!")},i.prototype.pickParent=function(e){var i=nextend.smartSlider.layerManager,a=t(i.mainLayerGroup.getChildLayersRecursive(!0));if(0==a.length)this.destroy();else{this.status=n.PICK_PARENT,nextend.tooltipMouse.show("Pick the parent layer!",e);t('<div class="n2-ss-picker-overlay"></div>').appendTo(a).on("click",t.proxy(function(e){e.preventDefault(),e.stopPropagation();var i=t(e.currentTarget).parent();i.data("layerObject");this.data.parent=i,this._destroy(),this.pickParentAlign(e)},this))}},i.prototype.pickParentAlign=function(e){this.status=n.PICK_PARENT_ALIGN,nextend.tooltipMouse.show("Pick the align point of the parent layer!",e);var i=t(a).appendTo(this.data.parent).on("click",t.proxy(function(e){e.preventDefault(),e.stopPropagation();var n=t(e.currentTarget);this.data.parentHAlign=n.data("align"),this.data.parentVAlign=n.data("valign"),n.off("click").addClass("n2-active"),i.not(n).remove(),this.pickChild(e)},this))},i.prototype.pickChild=function(e){this.status=n.PICK_CHILD,nextend.tooltipMouse.show("Pick the child layer!",e);var i=nextend.smartSlider.layerManager,a=t(i.mainLayerGroup.getChildLayersRecursive(!0)).not(this.data.parent),r=function(e){var i=e.data("layerObject").getProperty(!1,"parentid");i&&""!=i&&r(t("#"+i)),a=a.not(e)};if(r(this.data.parent),!a.length)return nextend.notificationCenter.error("There is no possible child layer for the selected parent layer!"),void this.destroy();var s=t('<div class="n2-ss-picker-overlay"></div>').appendTo(a).on("click",t.proxy(function(e){e.preventDefault(),e.stopPropagation();var i=t(e.currentTarget).parent();i.data("layerObject");this.data.child=i,s.remove(),this.pickChildAlign(e)},this))},i.prototype.pickChildAlign=function(e){this.status=n.PICK_CHILD_ALIGN,nextend.tooltipMouse.show("Pick the align point of the child layer!",e);t(a).appendTo(this.data.child).on("click",t.proxy(function(e){e.preventDefault(),e.stopPropagation();var i=t(e.currentTarget);this.data.childHAlign=i.data("align"),this.data.childVAlign=i.data("valign"),this.done()},this))},i.prototype._destroy=function(){t(".n2-ss-picker-overlay").remove(),t(".n2-ss-picker-overlay-tile").remove()},i.prototype.destroy=function(){nextend.tooltipMouse.hide(),this._destroy(),t("body").off(".n2-ss-parent-linker"),NextendEsc.pop(),this.status=n.INITIALIZED},i.prototype.done=function(){this.data.child.data("layerObject").parentPicked(this.data.parent.data("layerObject"),this.data.parentHAlign,this.data.parentVAlign,this.data.childHAlign,this.data.childVAlign),this.destroy()},i.prototype.change=function(t){this.element.val(t).trigger("change"),this._setValue(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this._setValue(t),this.triggerInsideChange()},i.prototype._setValue=function(t){t&&""!=t?this.$container.css("display",""):this.$container.css("display","none")},e.NextendElementLayerPicker=i}(n2,window),function(t,e){function i(e){this.element=t("#"+e),this.setAttribute(),this.element.on("nextendChange",t.proxy(this.setAttribute,this))}i.prototype.setAttribute=function(){t("#n2-admin").attr("data-slider-type",this.element.val()),"block"==this.element.val()&&t(".n2-fm-shadow").trigger("click")},e.NextendElementSliderType=i}(n2,window),function(t,e){function i(e){this.element=t("#"+e),this.area=t("#"+e+"_area"),this.areas=this.area.find(".n2-area"),this.areas.on("click",t.proxy(this.chooseArea,this)),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.chooseArea=function(e){var i=parseInt(t(e.target).data("area"));this.element.val(i),this.setSelected(i),this.triggerOutsideChange();
},i.prototype.insideChange=function(t){t=parseInt(t),this.element.val(t),this.setSelected(t),this.triggerInsideChange()},i.prototype.setSelected=function(t){this.areas.removeClass("n2-active"),this.areas.eq(t-1).addClass("n2-active")},e.NextendElementSliderWidgetArea=i}(n2,window),function(t,e){function i(e,i){this.element=t("#"+e),this.parameters=i,this.element.parent().on("click",t.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),this.name=this.element.siblings("input"),this.updateName(this.element.val()),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.show=function(e){e.preventDefault(),this.parameters.font&&nextend.splittextanimationManager.setConnectedFont(this.parameters.font),this.parameters.style&&nextend.splittextanimationManager.setConnectedStyle(this.parameters.style),nextend.splittextanimationManager.show(this.element.val(),t.proxy(this.save,this),{previewMode:"0",previewHTML:this.parameters.preview,group:this.parameters.group,transformOrigin:t("#"+this.parameters.transformOrigin)})},i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.save=function(t,e){this.val(e)},i.prototype.val=function(t){this.element.val(t),this.updateName(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.updateName(t),this.triggerInsideChange()},i.prototype.updateName=function(e){t.when(nextend.splittextanimationManager.getVisual(e)).done(t.proxy(function(t){this.name.val(t.name)},this))},e.NextendElementSplitTextAnimationManager=i}(n2,window),function(t,e){function i(e){this.element=t("#"+e+"-mode"),this.container=this.element.closest(".n2-form-element-mixed"),this.tabs=this.container.find("> .n2-mixed-group"),this.element.on("nextendChange",t.proxy(this.onChange,this)),this.onChange()}i.prototype.onChange=function(){var t=this.element.val();"advanced"==t?(this.tabs.eq(2).css("display",""),this.tabs.eq(1).css("display","none")):(this.tabs.eq(1).css("display",""),this.tabs.eq(2).css("display","none"))},e.NextendElementWidgetPosition=i}(n2,window),function(t,e,i,n){"use strict";function a(){this._refreshTimeout=null,this.modal=!1,this.group=0,t.generator=this;var i=t.$currentSlideElement.data("variables");if(i){this.variables=i;for(var n in this.variables)!isNaN(parseFloat(n))&&isFinite(n)&&(this.group=Math.max(this.group,parseInt(n)+1));this.fill=this.generatorFill,this.group>0&&(this.registerField=this.generatorRegisterField,this.button=e('<a href="#" class="n2-button n2-button-normal n2-button-xs n2-radius-s n2-button-blue n2-h5 n2-uc" style="position:absolute;right: -2px;top: -18px;">Variable</a>').on("click",e.proxy(function(t){t.preventDefault(),this.showModal()},this)),this.registerField(e("#slidetitle")),this.registerField(e("#slidedescription")),this.registerField(e("#slidethumbnail")),this.registerField(e("#slidebackgroundImage")),this.registerField(e("#slidebackgroundAlt")),this.registerField(e("#slidebackgroundTitle")),this.registerField(e("#slidebackgroundVideoMp4")),this.registerField(e("#slidebackgroundVideoWebm")),this.registerField(e("#slidebackgroundVideoOgg")),this.registerField(e("#linkslidelink_0")),this.registerField(e("#layergenerator-visible")),this.registerField(e("#layergroup-generator-visible")),e("body").addClass("n2-ss-dynamic-slide")),this.initSlideDataRefresh()}else this.variables=null}a.prototype.isDynamicSlide=function(){return this.group>0},a.prototype.splitTokens=function(t){for(var e=[],i="",n=0,a=0;a<t.length;a++){var r=t[a];","===r&&0===n?(e.push(i),i=""):(i+=r,"("===r?n++:")"===r&&n--)}return i.length&&e.push(i),e},a.prototype.fill=function(t){return t},a.prototype.generatorFill=function(t){return t.replace(/{((([a-z]+)\(([^}]+)\))|([a-zA-Z0-9][a-zA-Z0-9_\/]*))}/g,e.proxy(this.parseFunction,this))},a.prototype.parseFunction=function(t,e,i,n,a,r){if("undefined"==typeof r){for(var s=this.splitTokens(a),o=0;o<s.length;o++)s[o]=this.parseVariable(s[o]);return this[n].apply(this,s)}return this.parseVariable(r)},a.prototype.parseVariable=function(t){var e=t.match(/^("|')(.*)("|')$/);if(e)return e[2];var i=t.match(/((([a-z]+)\(([^}]+)\)))/);if(i)return this.parseFunction.apply(this,i);var n=t.match(/([a-zA-Z][0-9a-zA-Z_]*)(\/([0-9a-z]+))?/);if(n){var a=n[3];if("undefined"==typeof a)a=0;else{var r=parseInt(a);isNaN(r)||(a=Math.max(a,1)-1)}return"undefined"!=typeof this.variables[a]&&"undefined"!=typeof this.variables[a][n[1]]?this.variables[a][n[1]]:""}return t},a.prototype.fallback=function(t,e){return""==t?e:t},a.prototype.cleanhtml=function(t){return strip_tags(t,"<p><a><b><br /><br/><i>")},a.prototype.removehtml=function(t){return e("<div>"+t+"</div>").text()},a.prototype.splitbychars=function(t,e,i){return t.substr(e,i)},a.prototype.splitbywords=function(t,e,i){var n=t,a=n.length,r=Math.max(0,0==e?0:n.indexOf(" ",e)),s=Math.max(0,i>a?a:n.indexOf(" ",i));return n.substr(r,s)},a.prototype.findimage=function(t,e){var i=t,n=/(<img.*?src=[\'"](.*?)[\'"][^>]*>)|(background(-image)??\s*?:.*?url\((["|\']?)?(.+?)(["|\']?)?\))/gi,a=[],r=null;for(e="undefined"!=typeof e?parseInt(e)-1:0;r=n.exec(i);)"undefined"!=typeof r[2]?a.push(r[2]):"undefined"!=typeof r[6]&&a.push(r[6]);return a.length?a.length>e?a[e]:a[a.length-1]:""},a.prototype.findlink=function(t,e){var i=t,n=/href=["\']?([^"\'>]+)["\']?/gi,a=[],r=null;for(e="undefined"!=typeof e?parseInt(e)-1:0;r=n.exec(i);)"undefined"!=typeof r[1]&&a.push(r[1]);return a.length?a.length>e?a[e]:a[a.length-1]:""},a.prototype.removevarlink=function(t){var e=t,i=/<a href=\"(.*?)\">(.*?)<\/a>/g;return e.replace(i,"")},a.prototype.registerField=function(t){},a.prototype.generatorRegisterField=function(t){var i=t.parent();i.on({mouseenter:e.proxy(function(){this.activeField=t,this.button.prependTo(i)},this)})},a.prototype.getModal=function(){var t=this;if(!this.modal){var i={key:"",group:1,filter:"no",split:"no",splitStart:0,splitLength:300,findImage:0,findImageIndex:1,findLink:0,findLinkIndex:1,removeVarLink:0},n=function(){var t=i.key+"/"+i.group;return i.findImage&&(t="findimage("+t+","+Math.max(1,i.findImageIndex)+")"),i.findLink&&(t="findlink("+t+","+Math.max(1,i.findLinkIndex)+")"),i.removeVarLink&&(t="removevarlink("+t+")"),"no"!=i.filter&&(t=i.filter+"("+t+")"),"no"!=i.split&&i.splitStart>=0&&i.splitLength>0&&(t=i.split+"("+t+","+i.splitStart+","+i.splitLength+")"),"{"+t+"}"},a=e('<div class="n2-generator-result-container" />'),r=function(){a.html(e("<div/>").text(t.fill(n())).html())},s=t.group,o=null,l=null,d=e('<div class="n2-generator-insert-variable"/>'),h=NextendModal.prototype.createHeading(n2_("Choose the group")).appendTo(d),p=e('<div class="n2-group-container" />').appendTo(d);d.append(NextendModal.prototype.createHeading(n2_("Choose the variable")));var c=e('<div class="n2-variable-container" />').appendTo(d),u=e('<div class="n2-generator-functions-container n2-form-element-mixed" />').appendTo(e('<div class="n2-form" />').appendTo(d));d.append(NextendModal.prototype.createHeading(n2_("Result"))),a.appendTo(d),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Filter")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="filter" id="n2-generator-function-filter"><option selected="selected" value="no">'+n2_("No")+'</option><option value="cleanhtml">'+n2_("Clean HTML")+'</option><option value="removehtml">'+n2_("Remove HTML")+"</option></select></div></div></div>").appendTo(u);var y=u.find("#n2-generator-function-filter");y.on("change",e.proxy(function(){i.filter=y.val(),r()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Split by chars")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="split" id="n2-generator-function-split"><option selected="selected" value="no">'+n2_("No")+'</option><option value="splitbychars">'+n2_("Strict")+'</option><option value="splitbywords">'+n2_("Respect words")+'</option></select></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Start")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="0" id="n2-generator-function-split-start"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Length")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="300" id="n2-generator-function-split-length"></div></div></div>').appendTo(u);var f=u.find("#n2-generator-function-split");f.on("change",e.proxy(function(){i.split=f.val(),r()},this));var m=u.find("#n2-generator-function-split-start");m.on("change",e.proxy(function(){i.splitStart=parseInt(m.val()),r()},this));var g=u.find("#n2-generator-function-split-length");g.on("change",e.proxy(function(){i.splitLength=parseInt(g.val()),r()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find image")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findimage"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findimage-index"></div></div></div>').appendTo(u);var v=u.find("#n2-generator-function-findimage");v.on("nextendChange",e.proxy(function(){i.findImage=parseInt(v.val()),r()},this));var x=u.find("#n2-generator-function-findimage-index");x.on("change",e.proxy(function(){i.findImageIndex=parseInt(x.val()),r()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find link")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findlink"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findlink-index"></div></div></div>').appendTo(u);var b=u.find("#n2-generator-function-findlink");b.on("nextendChange",e.proxy(function(){i.findLink=parseInt(b.val()),r()},this));var S=u.find("#n2-generator-function-findlink-index");S.on("change",e.proxy(function(){i.findLinkIndex=parseInt(S.val()),r()},this)),e('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Remove links")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-removevarlink"></div></div></div>').appendTo(u);var w=u.find("#n2-generator-function-removevarlink");w.on("nextendChange",e.proxy(function(){i.removeVarLink=parseInt(w.val()),r()},this));var k=u.find("#n2-generator-function-removevarlink-index");k.on("change",e.proxy(function(){i.removeVarLinkIndex=parseInt(k.val()),r()},this));for(var L in this.variables[0])e('<a href="#" class="n2-button n2-button-normal n2-button-s n2-button-grey n2-radius-s">'+L+"</a>").on("click",e.proxy(function(t,n){n.preventDefault(),o.removeClass("n2-active"),e(n.currentTarget).addClass("n2-active"),i.key=t,r()},this,L)).appendTo(c);o=c.find("a"),o.eq(0).trigger("click"),1==s&&(h.css("display","none"),p.css("display","none"));for(var C=0;s>C;C++)e('<a href="#" class="n2-button n2-button-normal n2-button-s n2-button-grey n2-radius-s">'+(C+1)+"</a>").on("click",e.proxy(function(t,n){n.preventDefault(),l.removeClass("n2-active"),e(n.currentTarget).addClass("n2-active"),i.group=t+1,r()},this,C)).appendTo(p);l=p.find("a"),l.eq(0).trigger("click");var I=!1;this.modal=new NextendModal({zero:{size:[1e3,s>1?560:490],title:n2_("Insert variable"),back:!1,close:!0,content:d,controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green">'+n2_("Insert")+"</a>"],fn:{show:function(){I||(new NextendElementOnoff("n2-generator-function-findimage"),new NextendElementOnoff("n2-generator-function-findlink"),new NextendElementOnoff("n2-generator-function-removevarlink"),I=!0),this.controls.find(".n2-button").on("click",e.proxy(function(e){e.preventDefault(),t.insert(n()),this.hide(e)},this))}}}},!1),this.modal.setCustomClass("n2-ss-generator-modal")}return this.modal},a.prototype.showModal=function(){this.getModal().show()},a.prototype.insert=function(t){this.activeField.val(t).trigger("change")},a.prototype.initSlideDataRefresh=function(){var t=e("#slidetitle").on("nextendChange",e.proxy(function(){this.variables.slide.name=t.val(),this.refresh()},this)),i=e("#slidedescription").on("nextendChange",e.proxy(function(){this.variables.slide.description=i.val(),this.refresh()},this))},a.prototype.refresh=function(){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),this._refreshTimeout=setTimeout(e.proxy(this._refresh,this),100)},a.prototype._refresh=function(){for(var e=t.layerManager.layerList,i=0;i<e.length;i++)for(var n=e[i].items,a=0;a<n.length;a++)n[a].reRender()},i.SmartSliderAdminGenerator=a}(nextend.smartSlider,n2,window),function(t,e,i){function n(e){this.ajaxUrl=e,t("#generatorrecord-viewer").on("click",t.proxy(this.showRecords,this))}n.prototype.showRecords=function(e){e.preventDefault(),NextendAjaxHelper.ajax({type:"POST",url:this.ajaxUrl,data:t("#smartslider-form").serialize(),dataType:"json"}).done(function(t){var e=new NextendModal({zero:{size:[1300,700],title:"Records",content:t.data.html}},!0);e.content.css("overflow","auto")}).error(function(t){if(200==t.status){var e=new NextendModal({zero:{size:[1300,700],title:"Response",content:t.responseText}},!0);e.content.css("overflow","auto")}})},e.NextendSmartSliderGeneratorRecords=n}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"500px authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElement500pxToken=i}(n2,window),function(t,e){"use strict";function i(e,i){this.element=t("#"+e),this.select=this.element.parent().find("select"),this.relatedField=t("#generatordribbble-user-id").on("nextendChange",t.proxy(this.refreshList,this)),this.url=i}i.prototype.refreshList=function(e){NextendAjaxHelper.ajax({url:this.url,data:{method:"getProjects",userID:this.relatedField.val()}}).done(t.proxy(function(t){if(0!=t.data.length){this.select.find("option").remove();for(var e in t.data)this.select.append('<option value="'+e+'">'+t.data[e]+"</option>");this.select.val(this.select.find("option:first").val()).trigger("change")}},this))},e.NextendElementDribbbleProjects=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"YouTube authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementDribbbleToken=i}(n2,window),function(t,e){"use strict";function i(e,i){this.element=t("#"+e),this.select=this.element.parent().find("select"),this.relatedField=t("#generatorfacebook-id").on("nextendChange",t.proxy(this.refreshList,this)),this.url=i}i.prototype.refreshList=function(e){NextendAjaxHelper.ajax({url:this.url,data:{method:"getAlbums",facebookID:this.relatedField.val()}}).done(t.proxy(function(t){this.select.find("option").remove();for(var e in t.data)this.select.append('<option value="'+e+'">'+t.data[e]+"</option>");this.select.val(this.select.find("option:first").val()).trigger("change")},this))},e.NextendElementFacebookAlbums=i}(n2,window),function(t,e){"use strict";function i(e,i){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(location.protocol+"//"+location.hostname+(location.port?":"+location.port:""))}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=580,i=400,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Facebook authentication","width=580,height=400,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementFacebookToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1200,i=1e3,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Flickr authentication","width="+e+",height="+i+",toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementFlickrToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=580,i=400,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Instagram authentication","width=580,height=400,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementInstagramToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"Twitter authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementTwitterToken=i}(n2,window),function(t,e){"use strict";function i(e,i,n){this.element=t("#"+e),this.button=t("#"+e+"_button").on("click",t.proxy(this.requestToken,this)),this.url=i,t("#generatorcallback").html(n)}i.prototype.requestToken=function(e){e.preventDefault(),NextendAjaxHelper.ajax({url:this.url,data:t("#smartslider-form").serialize()}).done(function(t){var e=1e3,i=600,n=(screen.width-e)/2,a=(screen.height-i)/2;window.open(t.data.authUrl,"YouTube authentication","width=1000,height=600,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left="+n+",top="+a)})},e.NextendElementYoutubeToken=i}(n2,window),function(t,e,i,n){function a(t,a,r,s){this.item=t,this.layer=a,this.itemEditor=r,this.type=this.item.data("item"),this.values=this.item.data("itemvalues"),"object"!=typeof this.values&&(this.values=e.parseJSON(this.values)),i["NextendSmartSliderItemParser_"+this.type]!==n?this.parser=new i["NextendSmartSliderItemParser_"+this.type](this,r.getItemType(this.type)):this.parser=new i.NextendSmartSliderItemParser(this),this.item.data("item",this),"undefined"!=typeof s&&(0==this.layer.items.length||this.layer.items.length<=s?this.item.appendTo(this.layer.layer):this.layer.items[s].item.before(this.item)),"undefined"==typeof s||0==this.layer.items.length||this.layer.items.length<=s?this.layer.items.push(this):this.layer.items.splice(s,0,this),0===this.item.children().length&&this.reRender(),e("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item),e(window).trigger("ItemCreated")}a.prototype.changeValue=function(t,i){this==this.itemEditor.activeItem?e("#item_"+this.type+t).data("field").insideChange(i):this.values[t]=i},a.prototype.activate=function(t,e,i){this.itemEditor.setActiveItem(this,e,i)&&this.parser.activate()},a.prototype.deActivate=function(){this.parser.deActivate()},a.prototype.render=function(t,i,n){this.layer.layer.triggerHandler("itemRender"),this.item.html(this.parser.render(t,i)),this.values=n,e("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item);var a=this.parser.getName(i);a=a===!1?this.type:a.replace(/[<>]/gi,""),this.layer.rename(a,!1),this.layer.update()},a.prototype.reRender=function(t){var i={},n=this.itemEditor,a=n.getItemType(this.type),r=a.template;for(var s in this.values)i[s]=this.values[s];i=e.extend({},this.parser.getDefault(),i,t);var o=e.extend({},i);this.parser.parseAll(i,this),this.values=o;for(var l in i){var d=new RegExp("\\{"+l+"\\}","g");r=r.replace(d,i[l])}this.render(e(r),i,this.values)},a.prototype.duplicate=function(){this.layer.addItem(this.getHTML(),!0)},a.prototype["delete"]=function(){this.item.trigger("mouseleave"),this.item.remove(),this.itemEditor.activeItem==this&&(this.itemEditor.activeItem=null)},a.prototype.getHTML=function(t){var i="";return i=t?"["+this.type+' values="'+Base64.encode(JSON.stringify(this.values))+'"]':e('<div class="n2-ss-item n2-ss-item-'+this.type+'"></div>').attr("data-item",this.type).attr("data-itemvalues",JSON.stringify(this.values))},a.prototype.getData=function(){return{type:this.type,values:this.values}},a.prototype.history=function(t,i,n){switch(t){case"updateCurrentItem":this.reRender(e.extend(!0,{},i)),this.values=i,this.itemEditor.setActiveItem(this,null,!0)}},i.NextendSmartSliderItem=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t){this.suppressChange=!1,this.activeItemOriginalData=null,this.layerEditor=t,this._initInstalledItems(),this.form={},this.activeForm={form:e("<div></div>")}}a.prototype.setActiveItem=function(t,i,n){if(t!=this.activeItem||n){this.activeItemOriginalData=null;var a=t.type,r=t.values;this.activeForm.form.css("display","none"),this.activeForm=this.getItemType(a),this.activeItem&&this.activeItem.deActivate(),this.activeItem=t,this.suppressChange=!0;for(var s in r){var o=e("#item_"+a+s).data("field");o&&o.insideChange(r[s])}return this.suppressChange=!1,this.activeForm.form.css("display","block"),this.focusFirst(i),!0}return!1},a.prototype.focusFirst=function(t){var e=this.activeForm.fields.eq(0).data("field");nextend.smartSlider.generator.isDynamicSlide()&&e.connectedField&&e.connectedField instanceof NextendElementImage||this.activeForm.fields.eq(0).data("field").focus("undefined"!=typeof t&&t)},a.prototype._initInstalledItems=function(){e(".n2-ss-core-item").on("click",e.proxy(function(t){this.createLayerItem(this.layerEditor.getActiveGroup(),e(t.currentTarget).data("item"),"click")},this))},a.prototype.createLayerItem=function(n,a,r){n=n||this.layerEditor.getActiveGroup();var s=this.getItemType(a),o=this.layerEditor.createLayer(n,e(".n2-ss-core-item-"+a).data("layerproperties")),l=e("<div></div>").data("item",a).data("itemvalues",e.extend(!0,{},s.values)).addClass("n2-ss-item n2-ss-item-"+a),d=new i.NextendSmartSliderItem(l,o,this,0);return r&&"click"==r?o.layer.trigger("mousedown",["create"]).trigger("mouseup",["create"]).trigger("click",["create"]):o.activate(),t.sidebarManager.switchTab("item"),t.history.add(e.proxy(function(){return[this,"createLayer","create","delete",[n,d,a]]},this)),d},a.prototype.getItemType=function(t){if(this.form[t]===n){var i=e("#smartslider-slide-toolbox-item-type-"+t),a={form:i,template:i.data("itemtemplate"),values:i.data("itemvalues"),fields:i.find('[name^="item_'+t+'"]'),fieldNameRegexp:new RegExp("item_"+t+"\\[(.*?)\\]","")};a.fields.on({nextendChange:e.proxy(this.updateCurrentItem,this),keydown:e.proxy(this.updateCurrentItemDeBounced,this)}),this.form[t]=a}return this.form[t]},a.prototype.updateCurrentItem=function(i){if(!this.suppressChange){null===this.activeItemOriginalData&&(this.activeItemOriginalData=e.extend({},this.activeItem.values));var n={},a={},r=this.form[this.activeItem.type],s=r.template,o=this.activeItem.parser;r.fields.each(e.proxy(function(t,i){var i=e(i),s=i.attr("name").match(r.fieldNameRegexp)[1];a[s]=n[s]=i.val()},this)),n=e.extend({},o.getDefault(),n),o.parseAll(n,this.activeItem);for(var l in n){var d=new RegExp("\\{"+l+"\\}","g");s=s.replace(d,n[l])}i&&"nextendChange"==i.type&&(t.history.add(e.proxy(function(){return[this.activeItem,"updateCurrentItem",e.extend({},a),this.activeItemOriginalData,[]]},this)),this.activeItemOriginalData=null),this.activeItem.render(e(s),n,a)}},a.prototype.updateCurrentItemDeBounced=NextendDeBounce(function(t){this.updateCurrentItem(t)},100),a.prototype.history=function(e,i,n){switch(e){case"createLayer":switch(i){case"delete":n[1].layer["delete"]();break;case"create":var a=this.createLayerItem(n[0],n[2]);t.history.changeFuture(n[1].layer,a.layer),t.history.changeFuture(n[1],a)}}},i.NextendSmartSliderItemManager=a}(nextend.smartSlider,n2,window),function(t,e,i){function n(t,e){this.pre="div#"+nextend.smartSlider.frontend.sliderElement.attr("id")+" ",this.formData=e,this.item=t,this.fonts=[],this.styles=[],this.needFill=[],this.added()}n.prototype.getDefault=function(){return{}},n.prototype.added=function(){},n.prototype.addedFont=function(e,i){var n=t("#item_"+this.item.type+i);n.length&&(this.fonts.push({mode:e,name:i,field:n.data("field"),def:this.formData.values[i]}),t.when(nextend.fontManager.addVisualUsage(e,this.item.values[i],this.pre)).done(t.proxy(function(t){t||this.item.changeValue(i,"")},this)))},n.prototype.addedStyle=function(e,i){var n=t("#item_"+this.item.type+i);n.length&&(this.styles.push({mode:e,name:i,field:n.data("field"),def:this.formData.values[i]}),t.when(nextend.styleManager.addVisualUsage(e,this.item.values[i],this.pre)).done(t.proxy(function(t){t||this.item.changeValue(i,"")},this)))},n.prototype.parseAll=function(t,e){for(var i=0;i<this.fonts.length;i++)t[this.fonts[i].name+"class"]=nextend.fontManager.getClass(t[this.fonts[i].name],this.fonts[i].mode)+" ";for(var i=0;i<this.styles.length;i++)t[this.styles[i].name+"class"]=nextend.styleManager.getClass(t[this.styles[i].name],this.styles[i].mode)+" ";for(var i=0;i<this.needFill.length;i++)"undefined"!=typeof t[this.needFill[i]]&&(t[this.needFill[i]]=nextend.smartSlider.generator.fill(t[this.needFill[i]]+""))},n.prototype.render=function(t,e){return t},n.prototype.getName=function(t){return!1},n.prototype.resizeLayerToImage=function(e,i){t("<img/>").attr("src",i).load(function(){var t=e.layer.layerEditor.slideSize,i=t.width,n=t.height;if(this.width>0&&this.height>0){if(i=parseInt(Math.min(this.width,i)),n=parseInt(Math.min(this.height,n)),nextend.smartSlider.history.off(),t.width/t.height<=i/n)e.layer.setProperty("width",i),e.layer.setProperty("height",this.height*i/this.width);else{var a=Math.min(this.width*t.height/this.height,i);e.layer.setProperty("width",a),e.layer.setProperty("height",this.height*a/this.width)}nextend.smartSlider.history.on()}})},n.prototype.fitLayer=function(t){return!1},n.prototype.activate=function(){nextend.basicCSS.activate("ss3item"+this.item.type,this.item.values,{font:this.fonts,style:this.styles})},n.prototype.deActivate=function(){nextend.basicCSS.deActivate()},e.NextendSmartSliderItemParser=n}(n2,window),function(t,e,i){function n(e,i,n,a,r,s,o,l){if(""!=r)try{r=JSON.parse(Base64.decode(r))}catch(d){r=!1}else r=!1;if(""!=o)try{o=JSON.parse(Base64.decode(o))}catch(d){o=!1}else o=!1;r||t("#"+i).closest(".n2-ss-layer").triggerHandler("layerExtraAnimationRemoved"),(r||o)&&(NextendSmartSliderHeadingItemSplitText.prototype.constructor.call(this,e,i,n,a,r,s,o,l),this.slide.on("layerSetZero."+i,t.proxy(this.setZero,this)),this.layer.on("itemRender."+i,t.proxy(function(){this.layer.off("."+i)},this)),r&&(this.layer.on("timelineLoadedForLayer."+i,t.proxy(function(){this.layer.triggerHandler("layerExtraAnimationAdded",[s,"ST",t.proxy(this.changeIn,this),t.proxy(this.editIn,this)])},this)),this.layer.triggerHandler("layerExtraAnimationAdded",[s,"ST",t.proxy(this.changeIn,this),t.proxy(this.editIn,this)])))}n.prototype=Object.create(NextendSmartSliderHeadingItemSplitText.prototype),n.prototype.constructor=n,n.prototype.changeIn=function(e){t("#item_headingsplit-text-delay-in").val(1e3*e).trigger("change")},n.prototype.editIn=function(e){t("#item_headingsplit-text-animation-in").parent().find(".n2-form-element-button").trigger("click")},n.prototype.initSlide=function(){this.slide=this.node.closest(".n2-ss-static-slide, .n2-ss-slide")},n.prototype.off=function(){this.slide.off("."+this.id)},n.prototype.setZero=function(t,e){for(var i=this.splitText.vars.type.split(","),n=0;n<i.length;n++)NextendTween.set(this.splitText[i[n]],{opacity:1,scale:1,x:0,y:0,rotationX:0,rotationY:0,rotationZ:0})},n.prototype.extendTimelines=function(t,e){n2.contains(document,this.node[0])?NextendSmartSliderHeadingItemSplitText.prototype.extendTimelines.call(this,t,e):this.off()},e.NextendSmartSliderHeadingItemSplitTextAdmin=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.parseAll=function(t){""==t.width?t.width="100%":t.width+="px",""==t.height?t.height="100%":t.height+="px",t.colora=N2Color.hex2rgbaCSS(t.color),t.color2a=N2Color.hex2rgbaCSS(t.color2),t.borderWidth=t.borderWidth+"px",t.borderColora=N2Color.hex2rgbaCSS(t.borderColor),t.borderRadius=t.borderRadius+"px"},n.prototype.fitLayer=function(t){return!0},n.prototype.render=function(t,e){switch(e.gradient){case"horizontal":t.css("background","#"+e.color.substr(0,6)).css("background","-moz-linear-gradient(left, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background"," -webkit-linear-gradient(left, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","linear-gradient(to right, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.color.substr(0,6)+"', endColorstr='#"+e.color2.substr(0,6)+"',GradientType=1)");break;case"vertical":t.css("background","#"+e.color.substr(0,6)).css("background","-moz-linear-gradient(top, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background"," -webkit-linear-gradient(top, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","linear-gradient(to bottom, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.color.substr(0,6)+"', endColorstr='#"+e.color2.substr(0,6)+"',GradientType=0)");break;case"diagonal1":t.css("background","#"+e.color.substr(0,6)).css("background","-moz-linear-gradient(45deg, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background"," -webkit-linear-gradient(45deg, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","linear-gradient(45deg, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.color.substr(0,6)+"', endColorstr='#"+e.color2.substr(0,6)+"',GradientType=1)");
break;case"diagonal2":t.css("background","#"+e.color.substr(0,6)).css("background","-moz-linear-gradient(-45deg, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background"," -webkit-linear-gradient(-45deg, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","linear-gradient(-45deg, "+e.colora+" 0%,"+e.color2a+" 100%)").css("background","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+e.color.substr(0,6)+"', endColorstr='#"+e.color2.substr(0,6)+"',GradientType=1)")}return t},e.NextendSmartSliderItemParser_area=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content","url"],this.addedFont("link","font"),this.addedStyle("button","style"),nextend.smartSlider.generator.registerField(t("#item_buttoncontent")),nextend.smartSlider.generator.registerField(t("#linkitem_buttonlink_0"))},n.prototype.getName=function(t){return t.content},n.prototype.parseAll=function(t){var e=t.link.split("|*|");t.url=e[0],t.target=e[1],delete t.link,0|t.fullwidth?t.display="block;":t.display="inline-block;",t.extrastyle=0|t.nowrap?"white-space: nowrap;":"",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},e.NextendSmartSliderItemParser_button=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content","description","url","image"],this.addedFont("paragraph","fonttitle"),this.addedFont("paragraph","font"),nextend.smartSlider.generator.registerField(t("#item_captionimage")),nextend.smartSlider.generator.registerField(t("#item_captioncontent")),nextend.smartSlider.generator.registerField(t("#linkitem_captionlink_0"))},n.prototype.getName=function(t){return t.image.split("/").pop()},n.prototype.parseAll=function(e,i){e.uid=t.fn.uid();var n=e.link.split("|*|");e.url=n[0],e.target=n[1],delete e.link,e.colora=N2Color.hex2rgbaCSS(e.color),e.colorhex=e.color.substr(0,6);var a=e.animation.split("|*|");e.mode=a[0],e.direction=a[1],e.scale=parseInt(a[2]),NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),e.image=nextend.imageHelper.fixed(e.image),i&&"$system$/images/placeholder/image.png"==i.values.image&&e.image!=i.values.image&&this.resizeLayerToImage(i,e.image)},n.prototype.fitLayer=function(t){return this.resizeLayerToImage(t,nextend.imageHelper.fixed(t.values.image)),!0},e.NextendSmartSliderItemParser_caption=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{link:"#|*|_self",font:"",style:""}},n.prototype.added=function(){this.needFill=["heading","url"],this.addedFont("hover","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(t("#item_headingheading")),nextend.smartSlider.generator.registerField(t("#linkitem_headinglink_0"))},n.prototype.getName=function(t){return t.heading},n.prototype.parseAll=function(e){e.uid=t.fn.uid();var i=e.link.split("|*|");e.url=i[0],e.target=i[1],delete e.link,0|e.fullwidth?e.display="block;":e.display="inline-block;",e.extrastyle=0|e.nowrap?"white-space: nowrap;":"",e.heading=t("<div>"+e.heading+"</div>").text().replace(/\n/g,"<br />"),"undefined"==typeof e["split-text-animation-in"]&&(e["split-text-animation-in"]="",e["split-text-delay-in"]=0,e["split-text-animation-out"]="",e["split-text-delay-out"]=0,e["split-text-transform-origin"]="50|*|50|*|0",e["split-text-backface-visibility"]=1),e.splitTextIn=e["split-text-animation-in"],e.splitTextDelayIn=e["split-text-delay-in"]/1e3,e.splitTextOut=e["split-text-animation-out"],e.splitTextDelayOut=e["split-text-delay-out"]/1e3,e.splitTextTransformOrigin=e["split-text-transform-origin"].split("|*|").join("% ")+"%",e.splitTextBackfaceVisibility=parseInt(e["split-text-backface-visibility"])?"visible":"hidden",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),"#"==e.url?e.afontclass="":(e.afontclass=e.fontclass,e.fontclass="")},n.prototype.render=function(t,e){if("#"==e.url){var i=t.find("a");i.parent().html(i.html())}return t},e.NextendSmartSliderItemParser_heading=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["html"],nextend.smartSlider.generator.registerField(t("#item_htmlhtml"))},e.NextendSmartSliderItemParser_html=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.addedStyle("box","style")},n.prototype.parseAll=function(t){var e=t.size.split("|*|");t.width=e[0],t.height=e[1],delete t.size,t.opacity=N2Color.hex2alpha(t.color),t.color=t.color.substr(0,6);var i=t.icon.replace(/data\-style/g,"style").replace(/\{style\}/g,"fill:#"+t.color+";fill-opacity:"+t.opacity);t.image=Base64.encode(i),NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},e.NextendSmartSliderItemParser_icon=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["url"],nextend.smartSlider.generator.registerField(t("#item_iframeurl"))},n.prototype.getName=function(t){return t.url},n.prototype.parseAll=function(t){var e=t.size.split("|*|");t.width=e[0],t.height=e[1],delete t.size,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},e.NextendSmartSliderItemParser_iframe=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{size:"100%|*|auto",link:"#|*|_self",style:""}},n.prototype.added=function(){this.needFill=["image","url"],this.addedStyle("box","style"),nextend.smartSlider.generator.registerField(t("#item_imageimage")),nextend.smartSlider.generator.registerField(t("#item_imagealt")),nextend.smartSlider.generator.registerField(t("#item_imagetitle")),nextend.smartSlider.generator.registerField(t("#linkitem_imagelink_0"))},n.prototype.getName=function(t){return t.image.split("/").pop()},n.prototype.parseAll=function(t,e){var i=t.size.split("|*|");t.width=i[0],t.height=i[1],delete t.size;var n=t.link.split("|*|");t.url=n[0],t.target=n[1],delete t.link,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),e&&"$system$/images/placeholder/image.png"==e.values.image&&t.image!=e.values.image?(t.image=nextend.imageHelper.fixed(t.image),this.resizeLayerToImage(e,t.image)):t.image=nextend.imageHelper.fixed(t.image)},n.prototype.fitLayer=function(t){return this.resizeLayerToImage(t,nextend.imageHelper.fixed(t.values.image)),!0},n.prototype.render=function(t,e){return"#"==e.url&&t.html(t.children("a").html()),t},e.NextendSmartSliderItemParser_image=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["image","url"],nextend.smartSlider.generator.registerField(t("#item_imageareaimage")),nextend.smartSlider.generator.registerField(t("#linkitem_imagearealink_0"))},n.prototype.parseAll=function(t){NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),t.image=nextend.imageHelper.fixed(t.image)},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_imagearea=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{font:"",style:""}},n.prototype.added=function(){this.needFill=["placeholder"],this.addedStyle("heading","style"),this.addedFont("paragraph","inputfont"),this.addedStyle("heading","inputstyle"),this.addedFont("hover","buttonfont"),this.addedStyle("heading","buttonstyle"),nextend.smartSlider.generator.registerField(t("#item_inputplaceholder"))},n.prototype.getName=function(t){return t.placeholder},n.prototype.parseAll=function(t){t.fullwidthStyle=parseInt(t.fullwidth)?"width:100%;":"",0|t.fullwidth?t.display="block;":t.display="inline-block;",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},n.prototype.render=function(t,e){return""==e.buttonlabel&&t.find("td").eq(1).remove(),t},e.NextendSmartSliderItemParser_input=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content"],this.addedFont("paragraph","font"),this.addedStyle("heading","liststyle"),this.addedStyle("heading","itemstyle"),nextend.smartSlider.generator.registerField(t("#item_listcontent"))},n.prototype.getName=function(t){return t.content},n.prototype.parseAll=function(t){for(var e=t.content.split("\n"),i=0;i<e.length;i++)e[i]="<li>"+e[i]+"</li>";t.lis=e.join(""),NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},n.prototype.render=function(t,e){return t.find("li").addClass(e.itemstyleclass),t},e.NextendSmartSliderItemParser_list=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}function a(t){var e=!1,i=!1,n="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|details|menu|summary";return-1!==t.indexOf("<object")&&(t=t.replace(/<object[\s\S]+?<\/object>/g,function(t){return t.replace(/[\r\n]+/g,"")})),t=t.replace(/<[^<>]+>/g,function(t){return t.replace(/[\r\n]+/g," ")}),-1===t.indexOf("<pre")&&-1===t.indexOf("<script")||(e=!0,t=t.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(t){return t.replace(/(\r\n|\n)/g,"<wp-line-break>")})),-1!==t.indexOf("[caption")&&(i=!0,t=t.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(t){return t=t.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),t=t.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(t){return t.replace(/[\r\n\t]+/," ")}),t.replace(/\s*\n\s*/g,"<wp-temp-br />")})),t+="\n\n",t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(new RegExp("(<(?:"+n+")(?: [^>]*)?>)","gi"),"\n$1"),t=t.replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n"),t=t.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),t=t.replace(/\r\n|\r/g,"\n"),t=t.replace(/\n\s*\n+/g,"\n\n"),t=t.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),t=t.replace(/<p>\s*?<\/p>/gi,""),t=t.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),t=t.replace(/<p>(<li.+?)<\/p>/gi,"$1"),t=t.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),t=t.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),t=t.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)","gi"),"$1"),t=t.replace(new RegExp("(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),t=t.replace(/\s*\n/gi,"<br />\n"),t=t.replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1"),t=t.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),t=t.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),t=t.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(t,e,i){return i.match(/<p( [^>]*)?>/)?t:e+"<p>"+i+"</p>"}),e&&(t=t.replace(/<wp-line-break>/g,"\n")),i&&(t=t.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),t}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{contentmobile:"",contenttablet:"",font:"",style:""}},n.prototype.added=function(){this.needFill=["content","contenttablet","contentmobile"],this.addedFont("paragraph","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(t("#item_textcontent")),nextend.smartSlider.generator.registerField(t("#item_textcontenttablet")),nextend.smartSlider.generator.registerField(t("#item_textcontentmobile"))},n.prototype.getName=function(t){return t.content},n.prototype.parseAll=function(t){NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),t.p=a(t.content),t.ptablet=a(t.contenttablet),t.pmobile=a(t.contentmobile)},n.prototype.render=function(t,e){return""==e.contenttablet&&(t=t.filter(":not(.n2-ss-tablet)"),t.filter(".n2-ss-desktop").addClass("n2-ss-tablet")),""==e.contentmobile&&(t=t.filter(":not(.n2-ss-mobile)"),t.filter(".n2-ss-tablet, .n2-ss-desktop").last().addClass("n2-ss-mobile")),t.find("p").addClass(e.fontclass+" "+e.styleclass),t.find("a").on("click",function(t){t.preventDefault()}),t},e.NextendSmartSliderItemParser_text=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["image","image2"],nextend.smartSlider.generator.registerField(t("#item_transitionimage")),nextend.smartSlider.generator.registerField(t("#item_transitionimage2")),nextend.smartSlider.generator.registerField(t("#item_transitionalt")),nextend.smartSlider.generator.registerField(t("#linkitem_transitionlink_0"))},n.prototype.getName=function(t){return t.image.split("/").pop()},n.prototype.parseAll=function(e,i){e.uid=t.fn.uid();var n=e.link.split("|*|");e.url=n[0],e.target=n[1],delete e.link,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments);var a=e.image;e.image=nextend.imageHelper.fixed(e.image),e.image2=nextend.imageHelper.fixed(e.image2),i&&"$system$/images/placeholder/imagefront.png"==i.values.image&&a!=i.values.image&&this.resizeLayerToImage(i,e.image)},n.prototype.fitLayer=function(t){return this.resizeLayerToImage(t,nextend.imageHelper.fixed(t.values.image)),!0},e.NextendSmartSliderItemParser_transition=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["video_mp4","video_webm","video_ogg"],nextend.smartSlider.generator.registerField(t("#item_videovideo_mp4")),nextend.smartSlider.generator.registerField(t("#item_videovideo_webm")),nextend.smartSlider.generator.registerField(t("#item_videovideo_ogg"))},n.prototype.getName=function(t){return t.video_mp4},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_video=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["vimeourl"],nextend.smartSlider.generator.registerField(t("#item_vimeovimeourl"))},n.prototype.getName=function(t){return t.vimeourl},n.prototype.parseAll=function(e,i){var n=i.values.vimeourl!=e.vimeourl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==e.image&&(e.image="$system$/images/placeholder/video.png"),e.image=nextend.imageHelper.fixed(e.image),n&&""!=e.vimeourl){var a=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,r=e.vimeourl.match(a),s=!1;r?s=r[3]:e.vimeourl.match(/^[0-9]+$/)&&(s=e.vimeourl),s?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+encodeURI(s)+".json").done(t.proxy(function(e){t("#item_vimeoimage").val(e[0].thumbnail_large).trigger("change")},this)).fail(function(t){nextend.notificationCenter.error(t.responseText)}):nextend.notificationCenter.error("The provided URL does not match any known Vimeo url or code!")}},n.prototype.fitLayer=function(t){return!0},e.NextendSmartSliderItemParser_vimeo=n}(n2,window),function(t,e,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["youtubeurl","image","start"],nextend.smartSlider.generator.registerField(t("#item_youtubeyoutubeurl")),nextend.smartSlider.generator.registerField(t("#item_youtubeimage")),nextend.smartSlider.generator.registerField(t("#item_youtubestart"))},n.prototype.getName=function(t){return t.youtubeurl},n.prototype.parseAll=function(e,i){var n=i.values.youtubeurl!=e.youtubeurl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==e.image&&(e.image="$system$/images/placeholder/video.png"),e.image=nextend.imageHelper.fixed(e.image),n){var a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=e.youtubeurl.match(a);r?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(r[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(t.proxy(function(e){if(e.items.length){var n=e.items[0].snippet.thumbnails,a=n.maxres||n.standard||n.high||n.medium||n["default"],s=a.url;"{video_url}"==i.values.youtubeurl&&(s=s.replace(r[2],"{video_id}")),t("#item_youtubeimage").val(s).trigger("change")}},this)).fail(function(t){nextend.notificationCenter.error(t.error.errors[0].message)}):nextend.notificationCenter.error("The provided URL does not match any known YouTube url or code!")}},n.prototype.fitLayer=function(t){return!0},n.prototype.render=function(t,e){return parseInt(e.playbutton)||t.find(".n2-video-play").remove(),t},e.NextendSmartSliderItemParser_youtube=n}(n2,window),function(t,e,i,n){function a(){this.property={},this.deviceProperty={}}a.prototype.getMode=function(){return this.layerEditor.getMode()},a.prototype.getProperty=function(t,e){if(t){var i=this.deviceProperty[this.getMode()],n=this.deviceProperty.desktopPortrait;if("undefined"!=typeof i[e])return i[e];if("undefined"!=typeof n[e])return n[e]}return this.property[e]},a.prototype.store=function(i,n,a,r){var s=this.property[n];if(this.property[n]=a,i){var o=this.getMode();t.history.add(e.proxy(function(){return[this,"store",a,this.deviceProperty[o][n],[this.layer,i,n,o]]},this)),this.deviceProperty[o][n]=a}else t.history.add(e.proxy(function(){return[this,"store",a,s,[this.layer,i,n,this.getMode()]]},this));r&&this.render(n,a)},a.prototype.storeWithModifier=function(i,n,a,r){this.property[i]=n;var s=this.getMode();t.history.add(e.proxy(function(){return[this,"storeWithModifier",n,this.deviceProperty[s][i],[this.layer,i,s]]},this)),this.deviceProperty[s][i]=n,r&&this.renderWithModifier(i,n,a)},a.prototype.render=function(t,e){this["_sync"+t](e)},a.prototype.renderWithModifier=function(t,e,i){this["_sync"+t](Math.round(e*i))},a.prototype.isDimensionPropertyAccepted=function(t){return!(!(t+"").match(/[0-9]+%/)&&"auto"!=t)},a.prototype.history=function(t,e,i){switch(t){case"store":var n=this.getMode();i[1]&&i[3]!=n?this.deviceProperty[i[3]][i[2]]=e:this[t](i[1],i[2],e,!0),this._renderModeProperties(!0);break;case"storeWithModifier":var n=this.getMode(),a=1;switch(i[1]){case"width":case"left":a=this.layerEditor.getResponsiveRatio("h");break;case"height":case"top":a=this.layerEditor.getResponsiveRatio("v")}i[2]==n?this[t](i[1],e,a,!0):this.deviceProperty[i[2]][i[1]]=e,this._renderModeProperties(!0)}},i.NextendSmartSliderLayerDataStorageAbtract=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t,i){"undefined"==typeof this.layer&&(this.layer=null),this.layerEditor=t,i||(i=s),this.group=i,this.layers=[],this.zIndexList=[],this.$=e(this),this.createLayer(),this.layerContainerElement=this.layer,this.createLayerRow(),r=r.add(this.layersItemsUlElement),this.layersItemsUlElement.sortable({axis:"y",helper:"clone",distance:10,placeholder:"sortable-placeholder",forcePlaceholderSize:!1,tolerance:"intersect",connectWith:r,items:".n2-ss-layer-row",connectWith:this.layerEditor.layersItemsElement.find("ul"),start:e.proxy(this.layersSortableStart,this),stop:e.proxy(this.layersSortableStop,this)}).appendTo(this.layerRow)}var r=e(),s={zIndexList:[],reIndexLayers:function(){}};a.prototype.addLayerBeforeInit=function(t,e){this.moveLayerToGroup(t,e)},a.prototype.lateInit=function(t,e){this.layers.length||t?this.zIndex=t-(e-1):this.zIndex=this.group.zIndexList.length,"undefined"==typeof this.group.zIndexList[this.zIndex]?this.group.zIndexList[this.zIndex]=this:this.group.zIndexList.splice(this.zIndex,0,this),this.group.reIndexLayers(),this.layers.length>0&&this.reIndexLayers()},a.prototype.startWithExistingNodes=function(){this.layer.find("> div").each(e.proxy(function(t,i){var n=e(i);switch(n.data("type")){case"group":var a=new NextendSmartSliderLayerGroup(this.layerEditor,this,n,[]);a.lateInit(),a.startWithExistingNodes();break;case"layer":var r=new NextendSmartSliderLayer(this.layerEditor,this,n,this.layerEditor.itemEditor);this.layers.push(r)}},this)),this.layers.length>0&&this.reIndexLayers()},a.prototype.getChildLayersRecursive=function(t){for(var e=[],i=0;i<this.zIndexList.length;i++)this.zIndexList[i]instanceof NextendSmartSliderLayer?t?e.push(this.zIndexList[i].layer[0]):e.push(this.zIndexList[i]):e.push.apply(e,this.zIndexList[i].getChildLayersRecursive(t));return e},a.prototype.moveLayerToGroup=function(t,e){this.moveLayersToGroup([t],[e])},a.prototype.moveLayersToGroup=function(t,i){for(var n=[],a=0;a<t.length;a++){var r=t[a],s=r.group;if(this.layers.push(r),r.setGroup(this,i[a]),this!=s){for(var o=s.layers.length;o--;)s.layers[o]==r&&s.layers.splice(o,1);-1==e.inArray(s,n)&&n.push(s)}}for(var a=0;a<n.length;a++)n[a].reIndexLayers();this.reIndexLayers()},a.prototype.reIndexLayers=function(){this.zIndexList=this.zIndexList.filter(function(t){return t!=n});for(var t=this.zIndexList.length-1;t>=0;t--)this.zIndexList[t].setZIndex(t)},a.prototype.layersSortableStart=function(t,e){e.item.show(),e.placeholder.html("<div></div>"),e.item.data("startindex",e.item.index())},a.prototype.layersSortableStop=function(i,n){var a=n.item.parent().data("container");if(a instanceof NextendSmartSliderLayerGroup&&n.item.hasClass("n2-ss-layer-group-row"))this.layersItemsUlElement.sortable("cancel");else{var r=this.zIndexList.length-e(n.item).data("startindex")-1,s=a.zIndexList.length-e(n.item).index()-1;if(a!=this){s++;var o=this.zIndexList[r];a.moveLayerToGroup(o,s),t.history.add(e.proxy(function(){return[a,"changeZIndexWithContainer",[o,s,this,a],[o,r,a,this],[]]},this))}else r!=s&&(a.zIndexList.splice(s,0,a.zIndexList.splice(r,1)[0]),a.reIndexLayers(),t.history.add(e.proxy(function(){return[a,"changeZIndex",[r,s],[s,r],[]]},this)))}},a.prototype.activateFirst=function(){this.zIndexList.length>0&&this.zIndexList[this.zIndexList.length-1].activate()},a.prototype.childDeleted=function(t){for(var e=0;e<this.layers.length;e++)if(this.layers[e]==t){this.layers.splice(e,1);break}this.zIndexList.splice(t.zIndex,1)},a.prototype.history=function(i,n,a){switch(i){case"changeZIndex":var r=n[0],s=n[1];this.zIndexList.splice(s,0,this.zIndexList.splice(r,1)[0]),this.reIndexLayers();break;case"changeZIndexWithContainer":var o=n[0],s=(n[2],n[1]),l=n[3];l.moveLayerToGroup(o,s);break;case"createGroup":switch(n){case"create":var d=a[0],h=new NextendSmartSliderLayerGroup(this.layerEditor,this.layerEditor.mainLayerGroup,!1);t.history.changeFuture(this,h),h.lateInit(d,0);break;case"delete":this["delete"]()}break;case"deleteGroup":switch(n){case"create":var h=new NextendSmartSliderLayerGroup(this.layerEditor,this.layerEditor.mainLayerGroup,!1,{data:e.extend(!0,{},a[0])});h.lateInit(),t.history.changeFuture(this,h),this.layerEditor.fixActiveLayer();break;case"delete":this["delete"]()}}},i.NextendSmartSliderLayerContainerAbstract=a}(nextend.smartSlider,n2,window),function(t,e,i,n){"use strict";function a(t,i,n){this.$=e(this),this.animations=t,this.group=i,this.data=e.extend({},r,n)}var r={name:"Animation",duration:.8,delay:0,ease:"easeOutCubic",opacity:1,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0};a.prototype.edit=function(t){var i=this.animations.layer;i!=i.layerEditor.getSelectedLayer()?i.activate(t):i.showEditor(t),e('[data-tab="animations"]').trigger("click"),e('[data-tab="animations-'+this.group+'"]').trigger("click")},a.prototype.save=function(t){t!==!1&&(this.data=t,this.$.trigger("animationChanged"))},a.prototype["delete"]=function(t){t&&t.stopPropagation(),this.animations.removeAnimation(this),this.$.trigger("animationDeleted")},a.prototype.setDelay=function(t){this.data.delay=t,this.animations.layer.updateAnimations()},a.prototype.getDelay=function(){return this.data.delay},a.prototype.setDuration=function(t){this.data.duration=t,this.animations.layer.updateAnimations()},a.prototype.getOptimizedData=function(){return nextend.deepDiff.map(e.extend({},this.data),r)},i.NextendSmartSliderLayerAnimation=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(e){this.layerEditor=e,t.layerAnimationManager=this,new NextendSmartSliderAdminTimelineManager(e),new r(this)}function r(i){this.insideUpdate=!1,this.timeline=null,this.animationManager=i,this.mainTab=n2("#n2-tabbed-slide-editor-settings").on("changetab",e.proxy(this.changeMainTab,this)).data("pane"),this.tab=e("#n2-tabbed-animations-tabbed").on("changetab",e.proxy(this.changeTab,this)).data("pane"),this.activeLayer=null,this.activeTimeline=-1,this.animationManager.layerEditor.$.on("activeLayerChanged",e.proxy(this.loadDataForLayer,this)),this.$heading=e('<div class="n2-editor-header n2-h2 n2-uc"><span></span><div class="n2-ss-button-container"></div></div>'),this.$headingName=this.$heading.find("span"),this.$headingButtonsLeft=e('<div class="n2-ss-button-container-left"></div>').appendTo(this.$heading),this.playButton=e('<a class="n2-button-single-animation-play n2-button n2-button-icon n2-button-s n2-radius-s n2-h5 n2-uc n2-button-grey n2-button-blue-active" href="#"><i class="n2-i n2-i-play"></i></a>').on("click",e.proxy(function(t){t.preventDefault(),this.toggleTimeline()},this)).appendTo(this.$headingButtonsLeft),this.$headingButtonsRight=this.$heading.find(".n2-ss-button-container"),e('<a class="n2-button n2-button-icon n2-button-s n2-radius-s n2-button-darker n2-h5 n2-uc" href="#"><i class="n2-i n2-i-delete"></i></a>').on("click",e.proxy(function(t){t.preventDefault(),this.activeLayer.animation.clear(o[this.tab._active])},this)).appendTo(this.$headingButtonsRight),this.$form=e("#n2-tab-animations-form").detach(),this.form={duration:{input:this.$form.find("#layer-anim-duration"),set:function(t){this.input.val(parseInt(1e3*t))},get:function(){return this.input.val()/1e3}},delay:{input:this.$form.find("#layer-anim-delay"),set:function(t){this.input.val(parseInt(1e3*t))},get:function(){return this.input.val()/1e3}},ease:{input:this.$form.find("#layer-anim-ease"),set:function(t){this.input.data("field").insideChange(t)},get:function(){return this.input.val()}},opacity:{input:this.$form.find("#layer-anim-opacity"),set:function(t){this.input.val(parseInt(100*t))},get:function(){return this.input.val()/100}},x:{input:this.$form.find("#layer-anim-x"),set:function(t){this.input.val(t)},get:function(){return this.input.val()}},y:{input:this.$form.find("#layer-anim-y"),set:function(t){this.input.val(t)},get:function(){return this.input.val()}},rotationX:{input:this.$form.find("#layer-anim-rotationX"),set:function(t){this.input.val(t)},get:function(){return this.input.val()}},rotationY:{input:this.$form.find("#layer-anim-rotationY"),set:function(t){this.input.val(t)},get:function(){return this.input.val()}},rotationZ:{input:this.$form.find("#layer-anim-rotationZ"),set:function(t){this.input.val(t)},get:function(){return this.input.val()}},scaleX:{input:this.$form.find("#layer-anim-scaleX"),set:function(t){this.input.val(parseInt(100*t))},get:function(){return this.input.val()/100}},scaleY:{input:this.$form.find("#layer-anim-scaleY"),set:function(t){this.input.val(parseInt(100*t))},get:function(){return this.input.val()/100}}};for(var n in this.form)this.form[n].input.on("outsideChange.n2-editor",e.proxy(this.changeInlineField,this,n));this.globalForm={inPlayEvent:{input:e("#layerin-play-event"),set:function(t){this.input.data("field").insideChange(t)},get:function(){return this.input.val()}},outPlayEvent:{input:e("#layerout-play-event"),set:function(t){this.input.data("field").insideChange(t)},get:function(){return this.input.val()}},loopPlayEvent:{input:e("#layerloop-play-event"),set:function(t){this.input.data("field").insideChange(t)},get:function(){return this.input.val()}},loopPauseEvent:{input:e("#layerloop-pause-event"),set:function(t){this.input.data("field").insideChange(t)},get:function(){return this.input.val()}},loopStopEvent:{input:e("#layerloop-stop-event"),set:function(t){this.input.data("field").insideChange(t)},get:function(){return this.input.val()}}};var a=function(t,e){this.insideUpdate=!0;var i=this.activeLayer.animation,n={};n[t]=this.globalForm[t].get(),i.setData(n),this.insideUpdate=!1};for(var n in this.globalForm)this.globalForm[n].input.on("outsideChange.n2-editor",e.proxy(a,this,n));t.animationEditor=this}function s(t,e,i,n,a){this.parent=t,this.playOnce=a||!1,this.timeline=null,this.preview=e,this.group=i,this.currentVisual=n.animations,this.transformOrigin=n.transformOrigin||"0|*|0|*|0",this.specialZero=n.specialZero||0,this.ratio=1,this.createTimeline()}a.prototype.getActiveLayer=function(){return this.layerEditor.layerList[this.layerEditor.activeLayerIndex]},a.prototype.clear=function(t,e){e&&e.preventDefault(),this.getActiveLayer().animation.clear(t)},a.prototype.createAnimation=function(t,i){i&&i.preventDefault();var n=this.getActiveLayer(),a=n.layer,r=nextend.animationManager;r.controller.setPreviewSize(a.width(),a.height()).setGroup(t);var s={repeatable:1};"in"==t?(s.specialZero=1,s.playEvent=1,r.changeSetById(1e3),r.setTitle(n2_("In animation"))):"loop"==t?(s.repeat=1,s.playEvent=1,s.pauseEvent=1,s.stopEvent=1,r.changeSetById(1200),r.setTitle(n2_("Loop animation"))):"out"==t&&(s.playEvent=1,s.instantOut=1,r.changeSetById(1e3),r.setTitle(n2_("Out animation"))),r.show(s,{animations:[],transformOrigin:"50|*|50|*|0",specialZero:n.animation.data.specialZero,repeatCount:n.animation.data.repeatCount,repeatDelay:n.animation.data.repeatDelay,playEvent:"",pauseEvent:"",stopEvent:"",repeatable:n.animation.data.repeatable,instantOut:n.animation.data.instantOut},e.proxy(this.storeNewAnimation,this,t),{previewMode:!1,previewHTML:!1})},a.prototype.storeNewAnimation=function(t,i,n){if(n.animations.length>0){var a=this.getActiveLayer().animation;a.setTransformOrigin(t,n.transformOrigin),a.setRepeatable(n.repeatable),"in"==t?(a.setSpecialZero(t,n.specialZero),a.setEvent(t,"PlayEvent",n.playEvent)):"loop"==t?(a.setRepeatCount(t,n.repeatCount),a.setRepeatStartDelay(t,n.repeatStartDelay),a.setEvent(t,"PlayEvent",n.playEvent),a.setEvent(t,"PauseEvent",n.pauseEvent),a.setEvent(t,"StopEvent",n.stopEvent)):"out"==t&&(a.setEvent(t,"PlayEvent",n.playEvent),a.setInstantOut(n.instantOut));for(var r=0;r<n.animations.length;r++)a.addAnimation(t,n.animations[r]);e(window).triggerHandler("AnimationAdded")}},i.NextendSmartSliderLayerAnimationManager=a;var o={0:"in",1:"loop",2:"out"};r.prototype.changeMainTab=function(){this.loadDataForLayer()},r.prototype.changeTab=function(){this.loadDataForLayer()},r.prototype.loadDataForLayer=function(){var t=!1;if(3==this.mainTab._active){var e=this.animationManager.getActiveLayer();this.activeLayer!=e&&(this.activeLayer=e,t=!0),this.tab._active<3?(t||this.activeTimeline!=this.tab._active)&&this.updateCurrentTab():(t||this.activeTimeline!=this.tab._active)&&this.updateEventsTab();
}},r.prototype.updateEventsTab=function(){var t=this.activeLayer.animation;for(var e in t.data)"undefined"!=typeof this.globalForm[e]&&this.globalForm[e].get()!=t.data[e]&&this.globalForm[e].set(t.data[e])},r.prototype.updateCurrentTab=function(){if(this.activeLayer&&!this.insideUpdate){var t=this.tab.contents[this.tab._active],i=o[this.tab._active],n=this.activeLayer.animation,a=n[o[this.tab._active]+"s"];this.updateEventsTab(),this.$heading.detach(),this.$form.detach(),t.empty();var r=e("<div />").appendTo(t);if(a.length>0){if(1==a.length){this.$headingName.html(a[0].data.name),r.append(this.$heading);var l=a[0].data;for(var d in this.form)this.form[d].get()!=l[d]&&this.form[d].set(l[d]);r.append(this.$form),e('<div class="n2-ss-small-more n2-button n2-button-normal n2-button-s n2-button-grey n2-radius-s n2-h5 n2-uc">More</div>').on("click",e.proxy(function(){n.edit(i,0)},this)).appendTo(r)}else this.$headingName.html(n2_("Animation chain")),r.append(this.$heading),e('<div class="n2-button n2-button-normal n2-button-wide n2-button-l n2-button-green n2-radius-s n2-h4 n2-uc">Edit</div>').on("click",e.proxy(function(){n.edit(i,0)},this)).appendTo(r);this._play=e.proxy(function(t,a){this.destroyTimeline(),this.playButton.addClass("n2-active"),e("body").addClass("n2-ss-animation-play-single"),this.timeline=new s(this,this.activeLayer.layer.find(".n2-ss-layer-mask, .n2-ss-layer-parallax").addBack().last(),i,n.getGroupAnimationData(i))},this),this.$heading.off("singlepreview").on({"mouseleave.singlepreview":e.proxy(this.destroyTimeline,this)})}else{$ul=e('<ul class="n2-list"></ul>');var h=1e3;"loop"==i&&(h=1200),e.when(nextend.animationManager.sets[h]._loadVisuals()).done(e.proxy(function(){var t=nextend.animationManager.sets[h].visuals;for(var a in t)var o=e("<li></li>").on({mouseenter:e.proxy(function(t,n){this.destroyTimeline(),e("body").addClass("n2-ss-animation-play-single"),this.timeline=new s(this,this.activeLayer.layer.find(".n2-ss-layer-mask, .n2-ss-layer-parallax").addBack().last(),i,t.value)},this,t[a]),mouseleave:e.proxy(this.destroyTimeline,this)}).append(e('<a href="">'+t[a].name+"</a>").on({click:e.proxy(function(t,a){a.preventDefault(),this.destroyTimeline(),n.setAnimations(i,e.extend(!0,{},t.value))},this,t[a])})).appendTo($ul);$ul.appendTo(r)},this))}}},r.prototype.toggleTimeline=function(){this.timeline?this.destroyTimeline():this._play()},r.prototype._play=function(){},r.prototype.destroyTimeline=function(){this.timeline&&(e("body").removeClass("n2-ss-animation-play-single"),this.timeline.destroy()),this.timeline=null,this.playButton.removeClass("n2-active")},r.prototype.update=function(t){t==this.activeLayer&&this.updateCurrentTab()},r.prototype.changeInlineField=function(t,i){this.insideUpdate=!0;var n=o[this.tab._active],a=this.activeLayer.animation,r=a.getGroupAnimationData(n);r.animations[0][t]=this.form[t].get(),a.setAnimations(n,e.extend(!0,{},r)),this.insideUpdate=!1,this.destroyTimeline(),e("body").addClass("n2-ss-animation-play-single"),this.timeline=new s(this,this.activeLayer.layer.find(".n2-ss-layer-mask, .n2-ss-layer-parallax").addBack().last(),n,r,!0)};var l={opacity:1,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0};s.prototype.createTimeline=function(){this.timeline&&this.timeline.pause(0),this.timeline=new NextendTimeline({paused:1}),this.timeline.eventCallback("onComplete",e.proxy(function(){this.playOnce?this.parent.destroyTimeline():this.timeline.play(0,!1)},this)),this.timeline.set(this.preview.get(0),{transformOrigin:this.transformOrigin.split("|*|").join("% ")+"px"},0);var t=[];e.extend(!0,t,this.currentVisual);for(var i=0;i<t.length;i++)t[i]=e.extend({name:"Animation",duration:.8,delay:0,ease:"easeOutCubic",opacity:1,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0},t[i]),t[i].delay>.5&&(t[i].delay=.5);switch(this.group){case"in":this.buildTimelineIn(this.timeline,this.preview.get(0),t,this.ratio);break;case"loop":this.buildTimelineLoop(this.timeline,this.preview.get(0),t,this.ratio);break;case"out":this.buildTimelineOut(this.timeline,this.preview.get(0),t,this.ratio);break;default:console.log(this.group+" animation is not supported!")}this.timeline.totalDuration()>0&&this.timeline.play()},s.prototype.destroy=function(){this.timeline&&(this.timeline.pause(),this.repeatTimeout&&clearTimeout(this.repeatTimeout),this.timeline.progress(1,!0),NextendTween.set(this.preview.get(0),{opacity:1,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0})),this.timeline=null},s.prototype.setCurrentZero=function(t){NextendTween.set(t,e.extend({},this.currentZero))},s.prototype.buildTimelineIn=function(t,e,i,n){this.currentZero=l,"in"==this.group&&("solo"!=this.currentPreviewMode||this.currentTabIndex==this.currentVisual.length-1)&&this.specialZero&&i.length>0&&(this.currentZero=i.pop(),delete this.currentZero.name,this.currentZero.x=this.currentZero.x*n,this.currentZero.y=this.currentZero.y*n,this.currentZero.z=this.currentZero.z*n,this.currentZero.rotationX=-this.currentZero.rotationX,this.currentZero.rotationY=-this.currentZero.rotationY,this.currentZero.rotationZ=-this.currentZero.rotationZ,this.setCurrentZero(e));var a=0,r=this._buildAnimationChainIn(i,n,this.currentZero),s=0;if(r.length>0)for(t.fromTo(e,r[s].duration,r[s].from,r[s].to,a),a+=r[s].duration+r[s].to.delay,s++;s<r.length;s++)t.to(e,r[s].duration,r[s].to,a),a+=r[s].duration+r[s].to.delay},s.prototype._buildAnimationChainIn=function(t,i,n){for(var a=[{from:n}],r=t.length-1;r>=0;r--){var s=t[r],o=s.delay,l=s.duration,d=s.ease;delete s.delay,delete s.duration,delete s.ease,delete s.name;var h=a[0].from;s.x=-s.x*i,s.y=-s.y*i,s.z=-s.z*i,s.rotationX=-s.rotationX,s.rotationY=-s.rotationY,s.rotationZ=-s.rotationZ,a.unshift({duration:l,from:s,to:e.extend({},h,{ease:d,delay:o})})}return a.pop(),a},s.prototype.buildTimelineLoop=function(t,e,i,n){var a=this._buildAnimationChainLoop(i,n),r=0;if(a.length>0)for(t.fromTo(e,a[r].duration,a[r].from,a[r].to),r++;r<a.length;r++)t.to(e,a[r].duration,a[r].to)},s.prototype._buildAnimationChainLoop=function(t,i){if(delete t[0].name,1==t.length){var n=t[0],a=e.extend({},l);if(a.duration=n.duration,a.ease=n.ease,(360==n.rotationX||360==n.rotationY||360==n.rotationZ)&&1==n.opacity&&0==n.x&&0==n.y&&0==n.z&&1==n.scaleX&&1==n.scaleY&&1==n.scaleZ&&0==n.skewX)return[{duration:t[0].duration,from:e.extend({},l),to:t[0]}];t.unshift(a)}var r=0,s=[{duration:t[r].duration,to:t[r]}];for(r++;r<t.length;r++){var a=t[r],o=a.duration;delete a.duration,delete a.name;var d=e.extend({},s[s.length-1].to);delete d.delay,delete d.ease,a.x=a.x*i,a.y=a.y*i,a.z=a.z*i,s.push({duration:o,from:d,to:a})}return s.push({duration:s[0].duration,from:e.extend({},s[s.length-1].to),to:e.extend({},s[0].to)}),s.shift(),s},s.prototype.buildTimelineOut=function(t,e,i,n){var a=0,r=this._buildAnimationChainOut(i,n),s=0;if(r.length>0)for(t.fromTo(e,r[s].duration,r[s].from,r[s].to,a),a+=r[s].duration+r[s].to.delay,s++;s<r.length;s++)t.to(e,r[s].duration,r[s].to,a),a+=r[s].duration+r[s].to.delay},s.prototype._buildAnimationChainOut=function(t,i){for(var n=[{to:l}],a=0;a<t.length;a++){var r=t[a],s=r.duration;delete r.duration,delete r.name;var o=e.extend({},n[n.length-1].to);delete o.delay,delete o.ease,r.x=r.x*i,r.y=r.y*i,r.z=r.z*i,n.push({duration:s,from:o,to:r})}return n.shift(),n}}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t){this._loaded=!1,this.active=!1,this.layer=t,this.data=null,t.layer.data("adminLayerAnimations",this),this.ins=[],this.loops=[],this.outs=[]}var r={repeatable:0,"in":[],specialZeroIn:0,transformOriginIn:"50|*|50|*|0",inPlayEvent:"",loop:[],repeatCount:0,repeatStartDelay:0,transformOriginLoop:"50|*|50|*|0",loopPlayEvent:"",loopPauseEvent:"",loopStopEvent:"",out:[],transformOriginOut:"50|*|50|*|0",outPlayEvent:"",instantOut:1};a.prototype.activate=function(){},a.prototype.addAnimation=function(t,e){var i=new NextendSmartSliderLayerAnimation(this,t,e);this[t+"s"].push(i),this.layer.$.trigger("layerAnimationAdded",[t,i])},a.prototype.removeAnimation=function(t){var i=t.group,n=e.inArray(t,this[i+"s"]);-1!=n&&this[i+"s"].splice(n,1)},a.prototype.clearAll=function(){this._startHistory(),this._clear("in"),this._clear("loop"),this._clear("out"),this._endHistory(),this.layer.updateAnimations()},a.prototype.clear=function(t){this._startHistory(),this._clear(t),this._endHistory(),this.layer.updateAnimations()},a.prototype._clear=function(t){for(var e=this[t+"s"];e.length;)e[0]["delete"]()},a.prototype.getCurrentData=function(t){for(var e=[],i=0;i<this[t+"s"].length;i++)e.push(this[t+"s"][i].data);var n={animations:e,transformOrigin:this.data["transformOrigin"+this.ucfirst(t)],repeatable:this.data.repeatable};return"in"==t?(n.specialZero=this.data.specialZeroIn,n.playEvent=this.data.inPlayEvent):"loop"==t?(n.repeatCount=this.data.repeatCount,n.repeatStartDelay=this.data.repeatStartDelay,n.playEvent=this.data.loopPlayEvent,n.pauseEvent=this.data.loopPauseEvent,n.stopEvent=this.data.loopStopEvent):"out"==t&&(n.playEvent=this.data.outPlayEvent,n.instantOut=this.data.instantOut),n},a.prototype.getGroupAnimationData=function(t){for(var e=[],i=0;i<this[t+"s"].length;i++)e.push(this[t+"s"][i].data);var n={animations:e,transformOrigin:this.data["transformOrigin"+this.ucfirst(t)],repeatable:this.data.repeatable};return"in"==t&&(n.specialZero=this.data.specialZeroIn),n},a.prototype.edit=function(t,i){var n=nextend.animationManager;n.controller.setPreviewSize(this.layer.layer.width(),this.layer.layer.height()).setGroup(t);var a={repeatable:1},r=this.getGroupAnimationData(t);"in"==t?(a.specialZero=1,a.playEvent=1,r.playEvent=this.data.inPlayEvent,n.changeSetById(1e3),n.setTitle(n2_("In animation"))):"loop"==t?(a.repeat=1,r.repeatCount=this.data.repeatCount,r.repeatStartDelay=this.data.repeatStartDelay,a.playEvent=1,r.playEvent=this.data.loopPlayEvent,a.pauseEvent=1,r.pauseEvent=this.data.loopPauseEvent,a.stopEvent=1,r.stopEvent=this.data.loopStopEvent,n.changeSetById(1200),n.setTitle(n2_("Loop animation"))):"out"==t&&(a.playEvent=1,a.instantOut=1,r.playEvent=this.data.outPlayEvent,r.instantOut=this.data.instantOut,n.changeSetById(1e3),n.setTitle(n2_("Out animation"))),n.show(a,r,e.proxy(this.storeAnimations,this,t,r),{previewMode:!1,previewHTML:!1}),i>0&&n.controller.tabField.options.eq(i).trigger("click")},a.prototype.storeAnimations=function(i,n,a,r){t.history.add(e.proxy(function(){return[this.layer,"storeAnimations",e.extend(!0,{},r),e.extend(!0,{},n),[i]]},this));var s=0,o=this[i+"s"];for(this.setTransformOrigin(i,r.transformOrigin),this.setRepeatable(r.repeatable),"in"==i?(this.setSpecialZero(i,r.specialZero),this.setEvent(i,"PlayEvent",r.playEvent)):"loop"==i?(this.setRepeatCount(i,r.repeatCount),this.setRepeatStartDelay(i,r.repeatStartDelay),this.setEvent(i,"PlayEvent",r.playEvent),this.setEvent(i,"PauseEvent",r.pauseEvent),this.setEvent(i,"StopEvent",r.stopEvent)):"out"==i&&(this.setEvent(i,"PlayEvent",r.playEvent),this.setInstantOut(r.instantOut));s<r.animations.length&&s<o.length;s++)o[s].save(r.animations[s]);for(;s<r.animations.length;s++)this.addAnimation(i,r.animations[s]);for(;s<o.length;s++)o[s]["delete"]();this.layer.updateAnimations()},a.prototype.load=function(){if(this._loaded===!1){var t=this.layer.layer.data("animations");this.data={},e.extend(this.data,r);try{"undefined"!=typeof t&&e.extend(this.data,e.parseJSON(Base64.decode(t)))}catch(i){}this._load("in"),this._load("loop"),this._load("out"),this._loaded=!0,this.layer.updateAnimations()}},a.prototype._load=function(t){if("undefined"!=typeof this.data[t]){for(var e=0;e<this.data[t].length;e++)this.addAnimation(t,this.data[t][e]);delete this.data[t]}},a.prototype.setAnimations=function(t,e){this._clear(t);for(var i=0;i<e.animations.length;i++)this.addAnimation(t,e.animations[i]);for(var n in e)"animations"!=n&&(this.data[n]=e[n]);this.layer.updateAnimations()},a.prototype.setData=function(t){for(var e in t)"animations"!=e&&(this.data[e]=t[e]);this.layer.updateAnimations()},a.prototype.getAnimationsCode=function(){if(this._loaded===!1)return this.layer.layer.data("animations");for(var t=e.extend({},this.data,{"in":[],loop:[],out:[]}),i=0;i<this.ins.length;i++){var n=this.ins[i];t["in"].push(n.getOptimizedData())}for(var i=0;i<this.loops.length;i++){var n=this.loops[i];t.loop.push(n.getOptimizedData())}for(var i=0;i<this.outs.length;i++){var n=this.outs[i];t.out.push(n.getOptimizedData())}var a=nextend.deepDiff.map(t,r);return e.isEmptyObject(a)?"":Base64.encode(JSON.stringify(a))},a.prototype._startHistory=function(){this._oldData={"in":e.extend(!0,{},this.getCurrentData("in")),loop:e.extend(!0,{},this.getCurrentData("loop")),out:e.extend(!0,{},this.getCurrentData("out"))}},a.prototype._endHistory=function(){var i={"in":this.getCurrentData("in"),loop:this.getCurrentData("loop"),out:this.getCurrentData("out")};for(var n in i)t.history.add(e.proxy(function(){return[this.layer,"storeAnimations",e.extend(!0,{},i[n]),e.extend(!0,{},this._oldData[n]),[n]]},this));this._oldData=null},a.prototype.loadData=function(t){this._startHistory(),this._clear("in"),this._clear("loop"),this._clear("out"),this.data={},e.extend(this.data,r),e.extend(this.data,t),this._load("in"),this._load("loop"),this._load("out"),this._endHistory(),this.layer.updateAnimations()},a.prototype.getData=function(){for(var t=e.extend({},this.data,{"in":[],loop:[],out:[]}),i=0;i<this.ins.length;i++){var n=this.ins[i];t["in"].push(n.getOptimizedData())}for(var i=0;i<this.loops.length;i++){var n=this.loops[i];t.loop.push(n.getOptimizedData())}for(var i=0;i<this.outs.length;i++){var n=this.outs[i];t.out.push(n.getOptimizedData())}var a=nextend.deepDiff.map(t,r);return e.isEmptyObject(a)?"":a},a.prototype.setSpecialZero=function(t,e){e=parseInt(e)?1:0,e!=this.data["transformOrigin"+this.ucfirst(t)]&&(this.data.specialZeroIn=e,this.layer.$.trigger("layerAnimationSpecialZeroInChanged"))},a.prototype.setRepeatCount=function(t,e){this.data.repeatCount=e},a.prototype.setRepeatStartDelay=function(t,e){this.data.repeatStartDelay=e},a.prototype.setEvent=function(t,e,i){this.data[t+e]=i},a.prototype.setTransformOrigin=function(t,e){this.data["transformOrigin"+this.ucfirst(t)]=e},a.prototype.setRepeatable=function(t){this.data.repeatable=parseInt(t)?1:0},a.prototype.setInstantOut=function(t){this.data.instantOut=parseInt(t)?1:0},a.prototype.ucfirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a.prototype.hasAnimation=function(){return!!(this.ins.length||this.loops.length||this.outs.length)},i.NextendSmartSliderLayerAnimations=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t,i,n,a,s){if(this.status=h.UNDEFINED,this.isDeleted=!1,this._triggerLayerResizedThrottled=NextendThrottle(this._triggerLayerResized,30),this.doThrottledTheResize=this.doTheResize,this.parent=!1,this.parentIsVisible=!0,this.$=e(this),this.layerEditor=t,this.group=i,this.timelineLayer=null,n){this.property={id:n.attr("id"),"class":n.data("class"),parentid:n.data("parentid"),parentalign:n.data("desktopportraitparentalign"),parentvalign:n.data("desktopportraitparentvalign"),name:n.data("name")+"",nameSynced:n.data("namesynced"),crop:n.data("crop"),rotation:n.data("rotation"),inneralign:n.data("inneralign"),parallax:n.data("parallax"),align:n.data("desktopportraitalign"),valign:n.data("desktopportraitvalign"),fontsize:n.data("desktopportraitfontsize"),adaptivefont:n.data("adaptivefont"),generatorvisible:n.data("generatorvisible")||"",desktopPortrait:parseFloat(n.data("desktopportrait")),desktopLandscape:parseFloat(n.data("desktoplandscape")),tabletPortrait:parseFloat(n.data("tabletportrait")),tabletLandscape:parseFloat(n.data("tabletlandscape")),mobilePortrait:parseFloat(n.data("mobileportrait")),mobileLandscape:parseFloat(n.data("mobilelandscape")),left:parseInt(n.data("desktopportraitleft")),top:parseInt(n.data("desktopportraittop")),responsiveposition:parseInt(n.data("responsiveposition")),responsivesize:parseInt(n.data("responsivesize")),mouseenter:n.data("mouseenter"),click:n.data("click"),mouseleave:n.data("mouseleave"),play:n.data("play"),pause:n.data("pause"),stop:n.data("stop")};var o=n.data("desktopportraitwidth");this.isDimensionPropertyAccepted(o)?this.property.width=o:this.property.width=parseInt(o);var l=n.data("desktopportraitheight");this.isDimensionPropertyAccepted(l)?this.property.height=l:this.property.height=parseInt(l)}else n=e('<div class="n2-ss-layer" style="z-index: '+this.group.zIndexList.length+';"></div>').appendTo(this.group.layerContainerElement),this.property=e.extend({id:null,"class":"",parentid:null,parentalign:"center",parentvalign:"middle",name:"New layer",nameSynced:1,crop:"visible",rotation:0,inneralign:"left",parallax:0,align:"center",valign:"middle",fontsize:100,adaptivefont:0,generatorvisible:"",desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1,left:0,top:0,responsiveposition:1,width:"auto",height:"auto",responsivesize:1,mouseenter:r,click:r,mouseleave:r,play:r,pause:r,stop:r},s);this.layer=n,this.property.id||(this.property.id=null),this.subscribeParentCallbacks={},this.property.parentid?this.subscribeParent():this.property.parentid=null,this.property.parentalign||(this.property.parentalign="center"),this.property.parentvalign||(this.property.parentvalign="middle"),"undefined"==typeof this.property.nameSynced&&(this.property.nameSynced=1),"undefined"==typeof this.property.responsiveposition&&(this.property.responsiveposition=1),"undefined"==typeof this.property.responsivesize&&(this.property.responsivesize=1),this.property.inneralign||(this.property.inneralign="left"),this.property.crop||(this.property.crop="visible"),this.property.rotation||(this.property.rotation=0),this.property.parallax||(this.property.parallax=0),"undefined"==typeof this.property.fontsize&&(this.property.fontsize=100),"undefined"==typeof this.property.adaptivefont&&(this.property.adaptivefont=0),this.property.align||(this.property.align="left"),this.property.valign||(this.property.valign="top"),n.attr("data-align",this.property.align),n.attr("data-valign",this.property.valign),n.data("layerObject",this),n.css("visibility","hidden"),this.zIndex=parseInt(this.layer.css("zIndex")),isNaN(this.zIndex)&&(this.zIndex=0),this.deviceProperty={desktopPortrait:{left:this.property.left,top:this.property.top,width:this.property.width,height:this.property.height,align:this.property.align,valign:this.property.valign,parentalign:this.property.parentalign,parentvalign:this.property.parentvalign,fontsize:this.property.fontsize},desktopLandscape:{left:n.data("desktoplandscapeleft"),top:n.data("desktoplandscapetop"),width:n.data("desktoplandscapewidth"),height:n.data("desktoplandscapeheight"),align:n.data("desktoplandscapealign"),valign:n.data("desktoplandscapevalign"),parentalign:n.data("desktoplandscapeparentalign"),parentvalign:n.data("desktoplandscapeparentvalign"),fontsize:n.data("desktoplandscapefontsize")},tabletPortrait:{left:n.data("tabletportraitleft"),top:n.data("tabletportraittop"),width:n.data("tabletportraitwidth"),height:n.data("tabletportraitheight"),align:n.data("tabletportraitalign"),valign:n.data("tabletportraitvalign"),parentalign:n.data("tabletportraitparentalign"),parentvalign:n.data("tabletportraitparentvalign"),fontsize:n.data("tabletportraitfontsize")},tabletLandscape:{left:n.data("tabletlandscapeleft"),top:n.data("tabletlandscapetop"),width:n.data("tabletlandscapewidth"),height:n.data("tabletlandscapeheight"),align:n.data("tabletlandscapealign"),valign:n.data("tabletlandscapevalign"),parentalign:n.data("tabletlandscapeparentalign"),parentvalign:n.data("tabletlandscapeparentvalign"),fontsize:n.data("tabletlandscapefontsize")},mobilePortrait:{left:n.data("mobileportraitleft"),top:n.data("mobileportraittop"),width:n.data("mobileportraitwidth"),height:n.data("mobileportraitheight"),align:n.data("mobileportraitalign"),valign:n.data("mobileportraitvalign"),parentalign:n.data("mobileportraitparentalign"),parentvalign:n.data("mobileportraitparentvalign"),fontsize:n.data("mobileportraitfontsize")},mobileLandscape:{left:n.data("mobilelandscapeleft"),top:n.data("mobilelandscapetop"),width:n.data("mobilelandscapewidth"),height:n.data("mobilelandscapeheight"),align:n.data("mobilelandscapealign"),valign:n.data("mobilelandscapevalign"),parentalign:n.data("mobilelandscapeparentalign"),parentvalign:n.data("mobilelandscapeparentvalign"),fontsize:n.data("mobilelandscapefontsize")}},this.createRow();var d=n.data("status");null!==d&&"undefined"!=typeof d?this.changeStatus(d):this.changeStatus(h.NORMAL),this.itemEditor=a,this.initItems(),"left"!=this.property.inneralign&&this._syncinneralign(this.property.inneralign),this.property.rotation&&this._syncrotation(this.property.rotation),this.___makeLayerAlign(),this.___makeLayerResizeable(),this.___makeLayerDraggable();var p=null;this.chainParent=e('<div class="n2-ss-layer-chain-parent n2-button n2-button-icon n2-button-xs n2-radius-s n2-button-blue"><i class="n2-i n2-i-layerunlink"></i></div>').on({click:e.proxy(this.unlink,this),mouseenter:e.proxy(function(){p=e("#"+this.getProperty(!1,"parentid")).addClass("n2-highlight")},this),mouseleave:e.proxy(function(){p&&(p.removeClass("n2-highlight"),p=null)},this)}).appendTo(this.layer),t.layerList.push(this),"undefined"==typeof this.group.zIndexList[this.zIndex]?this.group.zIndexList[this.zIndex]=this:this.group.zIndexList.splice(this.zIndex,0,this),this.animation=new NextendSmartSliderLayerAnimations(this),this.layerEditor.$.trigger("layerCreated",this),e(window).triggerHandler("layerCreated"),this.animation.load(),this.layer.on({mousedown:e.proxy(nextend.context.setMouseDownArea,nextend.context,"layerClicked"),click:e.proxy(this.activate,this),dblclick:e.proxy(function(){e('[data-tab="item"]').trigger("click"),this.items[0].itemEditor.focusFirst("dblclick")},this)}),setTimeout(e.proxy(function(){this._resize(!0),this.status!=h.HIDDEN&&this.layer.css("visibility","")},this),300)}window.nextendPreventClick=!1;var r,s=!1,o=function(){var t=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var i,n=(new Date).getTime();return i=Math.max(0,16-(n-t)),t=n+i,setTimeout(function(){e(n+i)},i)}}(),l={raf:!1,ratios:null,isThrottled:!1,layers:[]},d=function(){l.raf===!1&&(l.raf=!0,o(function(){for(var t=0;t<l.layers.length;t++)l.layers[t].isDeleted||l.layers[t].doTheResize(l.ratios,!0,l.isThrottled);l={raf:!1,ratios:null,isThrottled:!1,layers:[]}}))},h={UNDEFINED:0,NORMAL:1,LOCKED:2,HIDDEN:3};a.prototype=Object.create(i.NextendSmartSliderLayerDataStorageAbtract.prototype),a.prototype.constructor=a,a.prototype.setGroup=function(t,e){t.layersItemsUlElement.append(this.layerRow),t.layerContainerElement.append(this.layer),this.group.zIndexList.splice(this.zIndex,1),this.group=t,"undefined"==typeof e&&(e=this.zIndex),"undefined"==typeof t.zIndexList[e]?t.zIndexList[e]=this:t.zIndexList.splice(e,0,this)},a.prototype.getIndex=function(){return this.layerEditor.layerList.indexOf(this)},a.prototype.getParent=function(){return e("#"+this.getProperty(!1,"parentid")).data("layerObject")},a.prototype.requestID=function(){var t=this.getProperty(!1,"id");return t||(t=e.fn.uid(),this.setProperty("id",t,"layer")),t},a.prototype.createRow=function(){var t=300,i=null,n=e('<div class="n2-ss-layer-status"></div>'),a=e('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Delete layer")+'"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></div>').on("click",e.proxy(this["delete"],this)),r=e('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Duplicate layer")+'"><i class="n2-i n2-i-duplicate n2-i-grey-opacity"></i></div>').on("click",e.proxy(function(){this.duplicate(!0,!1)},this));e('<a href="#" class="n2-ss-sc-hide n2-button n2-button-icon n2-button-m"><i class="n2-i n2-i-eye"></i></a>').appendTo(n).on("click",e.proxy(function(t){t.preventDefault(),this.status==h.HIDDEN?this.setStatusNormal():this.changeStatus(h.HIDDEN)},this)),this.layerRow=e('<li class="n2-ss-layer-row"></li>').data("layer",this).on({mouseenter:e.proxy(function(){this.layer.addClass("n2-highlight")},this),mouseleave:e.proxy(function(t){this.layer.removeClass("n2-highlight")},this),mousedown:e.proxy(nextend.context.setMouseDownArea,nextend.context,"layerRowClicked")}).appendTo(this.group.layersItemsUlElement),this.layerTitleSpan=e('<span class="n2-ucf">'+this.property.name+"</span>").on({mouseup:e.proxy(function(n){i?(clearTimeout(i),i=null,this.editName()):(this.activate(n),i=setTimeout(e.proxy(function(){i=null},this),t))},this)}),this.layerTitle=e('<div class="n2-ss-layer-title"></div>').append(this.layerTitleSpan).append(e('<div class="n2-actions-left"></div>').append(n)).append(e('<div class="n2-actions"></div>').append(r).append(a)).appendTo(this.layerRow).on({mouseup:e.proxy(function(t){"DIV"===t.target.tagName&&this.activate(t)},this)}),nextend.tooltip.add(this.layerRow)},a.prototype.editName=function(){var t=new NextendSmartSliderAdminInlineField;t.$input.on({valueChanged:e.proxy(function(t,e){this.rename(e,!0),this.layerTitleSpan.css("display","inline")},this),cancel:e.proxy(function(){this.layerTitleSpan.css("display","inline")},this)}),this.layerTitleSpan.css("display","none"),t.injectNode(this.layerTitle,this.property.name)},a.prototype.rename=function(t,e){if(this.property.nameSynced||e){if(e&&(this.property.nameSynced=0),""==t){if(e&&(this.property.nameSynced=1,this.items.length))return this.items[0].reRender(),!1;t="Layer #"+(this.layerEditor.layerList.length+1)}t=t.substr(0,35),this.property.name!=t&&(this.property.name=t,this.layerTitleSpan.html(t),this.$.trigger("layerRenamed",t))}},a.prototype.setZIndex=function(t){this.zIndex=t,this.layer.css("zIndex",t),this.group.layersItemsUlElement.append(this.layerRow),this.$.trigger("layerIndexed",t)},a.prototype.select=function(t){this.layerEditor.selectLayer(this,!0)},a.prototype.positionSidebar=function(){this.layerEditor.panel.show(this,this.layer)},a.prototype.showEditor=function(){this.layerEditor.panel._show()},a.prototype.activate=function(t,e,i){if(!s){if(document.activeElement&&document.activeElement.blur(),t&&(t.ctrlKey||t.metaKey)&&this.layerEditor.layerList[this.layerEditor.activeLayerIndex])return void this.select();if(!t||3!=t.which||!this.layerEditor.selectMode){i||this.layerEditor.exitSelectMode(),t&&this.positionSidebar(),0==this.items.length?console.error("The layer do not have item on it!"):this.items[0].activate(null,e);var n=this.getIndex();this.layerEditor.activeLayerIndex!==n&&(this.layerRow.addClass("n2-active"),this.layer.addClass("n2-active"),this.layer.triggerHandler("n2-ss-activate"),this.layerEditor.changeActiveLayer(n,i),nextend.activeLayer=this.layer,this.layerEditor.ui.onActivateLayer(this))}}},a.prototype.deActivate=function(){this.layer.removeClass("n2-active"),this.layerRow.removeClass("n2-active"),this.layer.triggerHandler("n2-ss-deactivate")},a.prototype.fit=function(){var t=this.layer.get(0);this.layerEditor.slideSize,this.layer.position();if(t.scrollWidth>0&&t.scrollHeight>0){for(var e=!1,i=0;i<this.items.length&&!(e=this.items[i].parser.fitLayer(this.items[i]));i++);if(!e){this.setProperty("width","auto","layer"),this.setProperty("height","auto","layer");var n=this.layer.width();Math.abs(this.layerEditor.layerContainerElement.width()-this.layer.position().left-n)<2&&this.setProperty("width",n,"layer")}}},a.prototype.hide=function(t){this.store(!1,t?t:this.getMode(),0,!0)},a.prototype.show=function(t){this.store(!1,t?t:this.getMode(),1,!0)},a.prototype.changeStatus=function(t){switch(t==this.status&&(t=h.NORMAL),this.status){case h.HIDDEN:this.layer.css("visibility",""),this.layerRow.removeClass("n2-ss-layer-status-hidden");break;case h.LOCKED:this.layer.nextenddraggable("enable"),this.layer.nextendResizable("enable"),this.layer.removeClass("n2-ss-layer-locked"),this.layerRow.removeClass("n2-ss-layer-status-locked")}switch(this.status=t,this.status){case h.HIDDEN:this.layer.css("visibility","hidden"),this.layerRow.addClass("n2-ss-layer-status-hidden");break;case h.LOCKED:this.layer.nextenddraggable("disable"),this.layer.nextendResizable("disable"),this.layer.addClass("n2-ss-layer-locked"),this.layerRow.addClass("n2-ss-layer-status-locked")}},a.prototype.setStatusNormal=function(){this.changeStatus(h.NORMAL)},a.prototype._hide=function(){this.layer.css("display","none")},a.prototype._show=function(){parseInt(this.property[this.layerEditor.getMode()])&&this.layer.css("display","block")},a.prototype.duplicate=function(i,n,a){var r=this.getHTML(!0,!1),s=r.attr("id");s&&(s=e.fn.uid(),r.attr("id",s)),n&&r.attr("data-parentid",n),r.data("desktopportraittop",r.data("desktopportraittop")+40),r.data("desktopportraitleft",r.data("desktopportraitleft")+40);var o=this.layerEditor._addLayer(this.group,r,!0);"undefined"==typeof a?a=[]:a.push(o),this.layer.triggerHandler("LayerDuplicated",[s,a]),this.layerRow.trigger("mouseleave"),i&&o.activate(),n||t.history.add(e.proxy(function(){return[this,"duplicateLayer","duplicate","delete",[o]]},this))},a.prototype["delete"]=function(i,n){this.layerEditor.getSelectedLayer()==this&&this.layerEditor.panel.hide(),t.history.add(e.proxy(function(){return[this,"deleteLayer","delete","create",[this.group,this.getData({layersIncluded:!0,itemsIncluded:!0})]]},this)),this.deActivate();for(var a=0;a<this.items.length;a++)this.items[a]["delete"]();this.group.childDeleted(this);var r=this.getProperty(!1,"parentid");r&&this.unSubscribeParent(!0),this.layer.trigger("mouseup"),this.isDeleted=!0,this.layerEditor.layerDeleted(this.getIndex()),"undefined"==typeof n?n=[]:n.push(this),this.layer.triggerHandler("LayerDeleted",["undefined"!=typeof i?i:!1,n]),this.layer.remove(),this.layerRow.remove(),this.$.trigger("layerDeleted"),delete this.layer,delete this.itemEditor,delete this.animation},a.prototype.getHTML=function(t,i){var n=e('<div class="n2-ss-layer"></div>').attr("style",this.getStyleText());for(var a in this.property)"width"!=a&&"height"!=a&&"left"!=a&&"top"!=a&&n.attr("data-"+a.toLowerCase(),this.property[a]);for(var a in this.deviceProperty)for(var r in this.deviceProperty[a])n.attr("data-"+a.toLowerCase()+r,this.deviceProperty[a][r]);n.css({position:"absolute",zIndex:this.zIndex+1});for(var a in this.deviceProperty.desktop)n.css(a,this.deviceProperty.desktop[a]+"px");if(t)for(var s=0;s<this.items.length;s++)n.append(this.items[s].getHTML(i));var o=this.getProperty(!1,"id");return o&&""!=o&&n.attr("id",o),this.status>h.NORMAL&&n.attr("data-status",this.status),n.attr("data-animations",this.animation.getAnimationsCode()),n},a.prototype.getData=function(t){var e={zIndex:this.zIndex+1};e.animations=this.animation.getData(),this.status>h.NORMAL&&(e.status=this.status);for(var i in this.property)switch(i){case"width":case"height":case"left":case"top":case"align":case"valign":case"parentalign":case"parentvalign":case"fontsize":break;default:e[i.toLowerCase()]=this.property[i]}for(var n in this.deviceProperty)for(var a in this.deviceProperty[n]){var r=this.deviceProperty[n][a];"undefined"!=typeof r&&("width"==a&&this.isDimensionPropertyAccepted(r)||"height"==a&&this.isDimensionPropertyAccepted(r)||"align"==a||"valign"==a||"parentalign"==a||"parentvalign"==a||(r=parseFloat(r)),e[n.toLowerCase()+a]=r)}if(t.itemsIncluded){e.items=[];for(var s=0;s<this.items.length;s++)e.items.push(this.items[s].getData())}return e},a.prototype.getDataWithChildren=function(t){return t.push(this.getData({layersIncluded:!0,itemsIncluded:!0})),this.layer.triggerHandler("LayerGetDataWithChildren",[t]),t},a.prototype.initItems=function(){this.items=[];for(var t=this.layer.find(".n2-ss-item"),e=0;e<t.length;e++)this.addItem(t.eq(e),!1)},a.prototype.addItem=function(t,e){e&&t.appendTo(this.layer),new NextendSmartSliderItem(t,this,this.itemEditor)},a.prototype.rename=function(t,e){if(this.property.nameSynced||e){if(e&&(this.property.nameSynced=0),
""==t){if(e&&(this.property.nameSynced=1,this.items.length))return this.items[0].reRender(),!1;t="Layer #"+(this.layerEditor.layerList.length+1)}t=t.substr(0,35),this.property.name!=t&&(this.property.name=t,this.layerTitleSpan.html(t),this.$.trigger("layerRenamed",t))}},a.prototype.setProperty=function(t,e,i){switch(t){case"responsiveposition":case"responsivesize":e=parseInt(e);case"id":case"parentid":case"class":case"inneralign":case"crop":case"rotation":case"parallax":case"adaptivefont":case"generatorvisible":case"mouseenter":case"click":case"mouseleave":case"play":case"pause":case"stop":this.store(!1,t,e,!0);break;case"parentalign":case"parentvalign":case"align":case"valign":case"fontsize":this.store(!0,t,e,!0);break;case"width":var n=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsivesize"))||(n=1);var a=e;this.isDimensionPropertyAccepted(e)||(a=~~e,a!=e&&this.$.trigger("propertyChanged",[t,a])),this.storeWithModifier(t,a,n,!0),this._resize(!1);break;case"height":var r=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsivesize"))||(r=1);var a=e;this.isDimensionPropertyAccepted(e)||(a=~~e,a!=e&&this.$.trigger("propertyChanged",[t,a])),this.storeWithModifier(t,a,r,!0),this._resize(!1);break;case"left":var s=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(s=1);var a=~~e;a!=e&&this.$.trigger("propertyChanged",[t,a]),this.storeWithModifier(t,a,s,!0);break;case"top":var o=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(o=1);var a=~~e;a!=e&&this.$.trigger("propertyChanged",[t,a]),this.storeWithModifier(t,a,o,!0);break;case"showFieldDesktopPortrait":this.store(!1,"desktopPortrait",parseInt(e),!0);break;case"showFieldDesktopLandscape":this.store(!1,"desktopLandscape",parseInt(e),!0);break;case"showFieldTabletPortrait":this.store(!1,"tabletPortrait",parseInt(e),!0);break;case"showFieldTabletLandscape":this.store(!1,"tabletLandscape",parseInt(e),!0);break;case"showFieldMobilePortrait":this.store(!1,"mobilePortrait",parseInt(e),!0);break;case"showFieldMobileLandscape":this.store(!1,"mobileLandscape",parseInt(e),!0)}"manager"!=i&&this.$.trigger("propertyChanged",[t,e])},a.prototype.render=function(t,e){this["_sync"+t](e)},a.prototype.renderWithModifier=function(t,e,i){"width"!=t&&"height"!=t||!this.isDimensionPropertyAccepted(e)?this["_sync"+t](Math.round(e*i)):this["_sync"+t](e)},a.prototype._syncclass=function(t){this.layer.removeClass(),this.layer.addClass("n2-ss-layer"),t&&""!=t&&this.layer.addClass(t)},a.prototype._syncid=function(t){t&&""!=t?this.layer.attr("id",t):this.layer.removeAttr("id")},a.prototype.subscribeParent=function(){var t=this;this.subscribeParentCallbacks={LayerResized:function(){t.resizeParent.apply(t,arguments)},LayerParent:function(){t.layer.addClass("n2-ss-layer-parent"),t.layer.triggerHandler("LayerParent")},LayerUnParent:function(){t.layer.removeClass("n2-ss-layer-parent"),t.layer.triggerHandler("LayerUnParent")},LayerDeleted:function(e,i,n){i?t["delete"](i,n):t.setProperty("parentid","","layer")},LayerDuplicated:function(e,i,n){t.duplicate(!1,i,n)},LayerShowChange:function(e,i,n){t.getMode()==i&&(t.parentIsVisible=n)},"n2-ss-activate":function(){t.layerRow.addClass("n2-parent-active")},"n2-ss-deactivate":function(){t.layerRow.removeClass("n2-parent-active")},LayerGetDataWithChildren:function(e,i){t.getDataWithChildren(i)}},this.parent=n2("#"+this.property.parentid).on(this.subscribeParentCallbacks),this.layer.addClass("n2-ss-layer-has-parent")},a.prototype.unSubscribeParent=function(t){if(this.layerRow.removeClass("n2-parent-active"),this.layer.removeClass("n2-ss-layer-has-parent"),this.parent&&this.parent.off(this.subscribeParentCallbacks),this.parent=!1,this.subscribeParentCallbacks={},!t){var e=this.layer.position();this.setPosition(e.left,e.top)}},a.prototype.unlink=function(t){t&&t.preventDefault(),this.setProperty("parentid","","layer")},a.prototype.parentPicked=function(t,e,i,n,a){this.setProperty("parentid","","layer"),this.setProperty("align",n,"layer"),this.setProperty("valign",a,"layer"),this.setProperty("parentalign",e,"layer"),this.setProperty("parentvalign",i,"layer"),this.setProperty("parentid",t.requestID(),"layer");var r;for(var s in this.deviceProperty)"desktopPortrait"!=s&&(this.deviceProperty[s].left=r,this.deviceProperty[s].top=r,this.deviceProperty[s].valign=r,this.deviceProperty[s].align=r)},a.prototype._syncparentid=function(t){t&&""!=t?0==e("#"+t).length?this.setProperty("parentid","","layer"):(this.layer.attr("data-parentid",t).addClass("n2-ss-layer-has-parent"),this.subscribeParent(),this.setPosition(this.layer.position().left,this.layer.position().top)):(this.layer.removeAttr("data-parentid"),this.unSubscribeParent(!1))},a.prototype._syncparentalign=function(t){this.layer.data("parentalign",t);var e=this.getParent();e&&e._resize(!1)},a.prototype._syncparentvalign=function(t){this.layer.data("parentvalign",t);var e=this.getParent();e&&e._resize(!1)},a.prototype._syncinneralign=function(t){this.layer.css("text-align",t)},a.prototype._synccrop=function(t){"auto"==t&&(t="hidden");var i=this.layer.find("> .n2-ss-layer-mask");if("mask"==t){if(t="hidden",!i.length){i=e("<div class='n2-ss-layer-mask'></div>").appendTo(this.layer);var n=this.layer.find(".n2-ss-layer-rotation");if(n.length)n.appendTo(i);else for(var a=0;a<this.items.length;a++)i.append(this.items[a].item)}}else if(i.length){var n=this.layer.find(".n2-ss-layer-rotation");if(n.length)n.appendTo(this.layer);else for(var a=0;a<this.items.length;a++)this.layer.append(this.items[a].item);i.remove()}this.layer.css("overflow",t)},a.prototype._syncrotation=function(t){var i=this.layer.find(".n2-ss-layer-rotation");if(0!=t){if(!i.length){i=e("<div class='n2-ss-layer-rotation'></div>").appendTo(this.layer.find(".n2-ss-layer-mask").addBack().last());for(var n=0;n<this.items.length;n++)i.append(this.items[n].item)}NextendTween.set(i[0],{rotationZ:t}),this.layer.data("rotation",t)}else{if(i.length){for(var n=0;n<this.items.length;n++)this.layer.find(".n2-ss-layer-mask").addBack().last().append(this.items[n].item);i.remove()}else NextendTween.set(i,{rotationZ:0});this.layer.data("rotation",0)}},a.prototype._syncparallax=function(t){},a.prototype._syncalign=function(t,e){"undefined"!==e&&t!=e&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-align",t)},a.prototype._syncvalign=function(t,e){"undefined"!==e&&t!=e&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-valign",t)},a.prototype._syncfontsize=function(t){this.adjustFontSize(this.getProperty(!1,"adaptivefont"),t,!0)},a.prototype._syncadaptivefont=function(t){this.adjustFontSize(t,this.getProperty(!0,"fontsize"),!0)},a.prototype.adjustFontSize=function(t,e,i){e=parseInt(e),parseInt(t)?this.layer.css("font-size",nextend.smartSlider.frontend.sliderElement.data("fontsize")*e/100+"px"):100!=e?this.layer.css("font-size",e+"%"):this.layer.css("font-size",""),i&&this.update()},a.prototype._syncgeneratorvisible=function(t){},a.prototype._syncleft=function(t){if(this.parent&&this.parentIsVisible){var e=this.parent.position(),i=this.getProperty(!0,"align"),n=this.getProperty(!0,"parentalign"),a=0;switch(n){case"right":a=e.left+this.parent.width();break;case"center":a=e.left+this.parent.width()/2;break;default:a=e.left}switch(i){case"right":this.layer.css({left:"auto",right:this.layer.parent().width()-a-t+"px"});break;case"center":this.layer.css({left:a+t-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:a+t+"px",right:"auto"})}}else switch(this.getProperty(!0,"align")){case"right":this.layer.css({left:"auto",right:-t+"px"});break;case"center":this.layer.css({left:this.layer.parent().width()/2+t-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:t+"px",right:"auto"})}this.triggerLayerResized()},a.prototype._synctop=function(t){if(this.parent&&this.parentIsVisible){var e=this.parent.position(),i=this.getProperty(!0,"valign"),n=this.getProperty(!0,"parentvalign"),a=0;switch(n){case"bottom":a=e.top+this.parent.height();break;case"middle":a=e.top+this.parent.height()/2;break;default:a=e.top}switch(i){case"bottom":this.layer.css({top:"auto",bottom:this.layer.parent().height()-a-t+"px"});break;case"middle":this.layer.css({top:a+t-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:a+t+"px",bottom:"auto"})}}else switch(this.getProperty(!0,"valign")){case"bottom":this.layer.css({top:"auto",bottom:-t+"px"});break;case"middle":this.layer.css({top:this.layer.parent().height()/2+t-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:t+"px",bottom:"auto"})}this.triggerLayerResized()},a.prototype._syncresponsiveposition=function(t){this._resize(!1)},a.prototype._syncwidth=function(t){this.layer.css("width",t+(this.isDimensionPropertyAccepted(t)?"":"px"))},a.prototype._syncheight=function(t){this.layer.css("height",t+(this.isDimensionPropertyAccepted(t)?"":"px"))},a.prototype._syncresponsivesize=function(t){this._resize(!1)},a.prototype._syncdesktopPortrait=function(t){this.__syncShowOnDevice("desktopPortrait",t)},a.prototype._syncdesktopLandscape=function(t){this.__syncShowOnDevice("desktopLandscape",t)},a.prototype._synctabletPortrait=function(t){this.__syncShowOnDevice("tabletPortrait",t)},a.prototype._synctabletLandscape=function(t){this.__syncShowOnDevice("tabletLandscape",t)},a.prototype._syncmobilePortrait=function(t){this.__syncShowOnDevice("mobilePortrait",t)},a.prototype._syncmobileLandscape=function(t){this.__syncShowOnDevice("mobileLandscape",t)},a.prototype.__syncShowOnDevice=function(t,e){if(this.getMode()==t){var e=parseInt(e);e?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[t,e]),this.triggerLayerResized()}},a.prototype._syncmouseenter=a.prototype._syncclick=a.prototype._syncmouseleave=a.prototype._syncplay=a.prototype._syncpause=a.prototype._syncstop=function(){},a.prototype.___makeLayerAlign=function(){e('<div class="n2-ss-layer-border" />').prependTo(this.layer),this.alignMarker=e('<div class="n2-ss-layer-cc" />').appendTo(this.layer)},a.prototype.___makeLayerResizeable=function(){this._resizableJustClick=!1,this.layer.nextendResizable({handles:"n, e, s, w, ne, se, sw, nw",_containment:this.layerEditor.layerContainerElement,start:e.proxy(this.____makeLayerResizeableStart,this),resize:e.proxy(this.____makeLayerResizeableResize,this),stop:e.proxy(this.____makeLayerResizeableStop,this),create:e.proxy(function(){this.layer.find(".ui-resizable-handle, .n2-ss-layer-cc").on({mousedown:e.proxy(function(t){this._resizableJustClick=[t.clientX,t.clientY]},this),mouseup:e.proxy(function(t){if(this._resizableJustClick&&Math.abs(Math.sqrt(Math.pow(this._resizableJustClick[0]-t.clientX,2)+Math.pow(this._resizableJustClick[1]-t.clientY,2)))<1){$target=e(t.currentTarget);var i=this.layerEditor.sidebar.layerFeatures;$target.hasClass("ui-resizable-nw")?(i.horizontalAlign("left",!1),i.verticalAlign("top",!1)):$target.hasClass("ui-resizable-w")?(i.horizontalAlign("left",!1),i.verticalAlign("middle",!1)):$target.hasClass("ui-resizable-sw")?(i.horizontalAlign("left",!1),i.verticalAlign("bottom",!1)):$target.hasClass("ui-resizable-n")?(i.horizontalAlign("center",!1),i.verticalAlign("top",!1)):$target.hasClass("n2-ss-layer-cc")?(i.horizontalAlign("center",!1),i.verticalAlign("middle",!1)):$target.hasClass("ui-resizable-s")?(i.horizontalAlign("center",!1),i.verticalAlign("bottom",!1)):$target.hasClass("ui-resizable-ne")?(i.horizontalAlign("right",!1),i.verticalAlign("top",!1)):$target.hasClass("ui-resizable-e")?(i.horizontalAlign("right",!1),i.verticalAlign("middle",!1)):$target.hasClass("ui-resizable-se")&&(i.horizontalAlign("right",!1),i.verticalAlign("bottom",!1))}this._resizableJustClick=!1},this)})},this),smartguides:e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5}).on({mousedown:e.proxy(function(t){!this.status!=h.LOCKED&&this.layerEditor.positionDisplay.css({left:t.pageX+10,top:t.pageY+10}).html("W: "+parseInt(this.layer.width())+"px<br />H: "+parseInt(this.layer.height())+"px").addClass("n2-active"),document.activeElement&&document.activeElement.blur()},this),mouseup:e.proxy(function(t){this.layerEditor.positionDisplay.removeClass("n2-active")},this)})},a.prototype.____makeLayerResizeableStart=function(t,i){s=!0,this.resizableDeferred=e.Deferred(),this.layerEditor.panel.hideWithDeferred(this.resizableDeferred),e("body").addClass("n2-ss-resize-layer"),this._resizableJustClick&&(this._resizableJustClick=!1),this.____makeLayerResizeableResize(t,i),this.layerEditor.positionDisplay.addClass("n2-active")},a.prototype.____makeLayerResizeableResize=function(t,e){this.layerEditor.positionDisplay.css({left:t.pageX+10,top:t.pageY+10}).html("W: "+e.size.width+"px<br />H: "+e.size.height+"px"),this.triggerLayerResized()},a.prototype.____makeLayerResizeableStop=function(t,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),e("body").removeClass("n2-ss-resize-layer"),this.resizableDeferred.resolve();var n=!1;if(i.originalSize.width==i.size.width){var a=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(a)&&(n=!0,this._syncwidth(a))}var r=!1;if(i.originalSize.height==i.size.height){var a=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(a)&&(r=!0,this._syncheight(a))}this.setPosition(i.position.left,i.position.top);var o=this.layerEditor.getResponsiveRatio("h"),l=this.layerEditor.getResponsiveRatio("v");if(parseInt(this.getProperty(!1,"responsivesize"))||(o=l=1),!n){var d=Math.round(i.size.width*(1/o));this.storeWithModifier("width",d,o,!1),this.$.trigger("propertyChanged",["width",d])}if(!r){var d=Math.round(i.size.height*(1/l));this.storeWithModifier("height",d,l,!1),this.$.trigger("propertyChanged",["height",d])}this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active"),setTimeout(function(){s=!1},80)},a.prototype.___makeLayerDraggable=function(){this.layer.nextenddraggable({_containment:this.layerEditor.layerContainerElement,start:e.proxy(this.____makeLayerDraggableStart,this),drag:e.proxy(this.____makeLayerDraggableDrag,this),stop:e.proxy(this.____makeLayerDraggableStop,this),smartguides:e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5})},a.prototype.____makeLayerDraggableStart=function(t,i){s=!0,this.draggableDeferred=e.Deferred(),this.layerEditor.panel.hideWithDeferred(this.draggableDeferred),e("body").addClass("n2-ss-move-layer"),this.layerEditor.draggableStart(i),this.____makeLayerDraggableDrag(t,i),this.layerEditor.positionDisplay.addClass("n2-active");var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&this.layer.width(this.layer.width()+.5);var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&this._syncheight(n)},a.prototype.____makeLayerDraggableDrag=function(t,e){this.layerEditor.positionDisplay.css({left:t.pageX+10,top:t.pageY+10}).html("L: "+parseInt(0|e.position.left)+"px<br />T: "+parseInt(0|e.position.top)+"px"),this.triggerLayerResized(),this.layerEditor.draggableDrag(e)},a.prototype.____makeLayerDraggableStop=function(t,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),e("body").removeClass("n2-ss-move-layer"),this.draggableDeferred.resolve(),this.setPosition(i.position.left,i.position.top);var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&this._syncwidth(n);var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&this._syncheight(n),this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active");var a=this.layerEditor.draggableStop(i);a?setTimeout(function(){s=!1},80):(s=!1,this.activate(t))},a.prototype.moveX=function(t){this.setDeviceBasedAlign(),this.setProperty("left",this.getProperty(!0,"left")+t,"layer"),this.triggerLayerResized()},a.prototype.moveY=function(t){this.setDeviceBasedAlign(),this.setProperty("top",this.getProperty(!0,"top")+t,"layer"),this.triggerLayerResized()},a.prototype.setPosition=function(t,e){var i=this.layerEditor.getResponsiveRatio("h"),n=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=n=1),this.setDeviceBasedAlign();var a=this.parent,r={left:0,leftMultiplier:1,top:0,topMultiplier:1};if(a&&a.is(":visible")){var s=a.position();switch(this.getProperty(!0,"parentalign")){case"right":r.left=s.left+a.width();break;case"center":r.left=s.left+a.width()/2;break;default:r.left=s.left}switch(this.getProperty(!0,"parentvalign")){case"bottom":r.top=s.top+a.height();break;case"middle":r.top=s.top+a.height()/2;break;default:r.top=s.top}}else{switch(a=this.layer.parent(),this.getProperty(!0,"align")){case"center":r.left+=a.width()/2;break;case"right":r.left+=a.width()}switch(this.getProperty(!0,"valign")){case"middle":r.top+=a.height()/2;break;case"bottom":r.top+=a.height()}}var t,o=!1;switch(this.getProperty(!0,"align")){case"left":t=-Math.round((r.left-t)*(1/i));break;case"center":t=-Math.round((r.left-t-this.layer.width()/2)*(1/i));break;case"right":t=-Math.round((r.left-t-this.layer.width())*(1/i)),o=!0}this.storeWithModifier("left",t,i,o),this.$.trigger("propertyChanged",["left",t]);var e,o=!1;switch(this.getProperty(!0,"valign")){case"top":e=-Math.round((r.top-e)*(1/n));break;case"middle":e=-Math.round((r.top-e-this.layer.height()/2)*(1/n));break;case"bottom":e=-Math.round((r.top-e-this.layer.height())*(1/n)),o=!0}this.storeWithModifier("top",e,n,o),this.$.trigger("propertyChanged",["top",e])},a.prototype.setDeviceBasedAlign=function(){var t=this.getMode();"undefined"==typeof this.deviceProperty[t].align&&this.setProperty("align",this.getProperty(!0,"align"),"layer"),"undefined"==typeof this.deviceProperty[t].valign&&this.setProperty("valign",this.getProperty(!0,"valign"),"layer")},a.prototype.snap=function(){this.layer.nextendResizable("option","smartguides",e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this)),this.layer.nextenddraggable("option","smartguides",e.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this))},a.prototype.changeEditorMode=function(t){var e=parseInt(this.property[t]);e?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[t,e]),this._renderModeProperties(!1)},a.prototype.resetMode=function(i,n){if("desktopPortrait"!=i){var a;t.history.add(e.proxy(function(){return[this,"resetMode","reset","restore",[i,e.extend({},this.deviceProperty[i])]]},this));for(var r in this.property)this.deviceProperty[i][r]=a;i==n&&this._renderModeProperties(!0)}},a.prototype.restoreMode=function(t,i,n){"desktopPortrait"!=t&&(this.deviceProperty[t]=e.extend({},n),t==i&&this._renderModeProperties(!0))},a.prototype._renderModeProperties=function(t){for(var e in this.property)this.property[e]=this.getProperty(!0,e),this.$.trigger("propertyChanged",[e,this.property[e]]);var i=this.getProperty(!0,"fontsize");this.adjustFontSize(this.getProperty(!1,"adaptivefont"),i,!1),this.layer.attr("data-align",this.property.align),this.layer.attr("data-valign",this.property.valign),t&&this._resize(!0)},a.prototype.copyMode=function(t,i){t!=i&&(this.deviceProperty[i]=e.extend({},this.deviceProperty[i],this.deviceProperty[t]))},a.prototype._resize=function(t){this.resize({slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},t)},a.prototype.doLinearResize=function(t){this.doThrottledTheResize(t,!0)},a.prototype.resize=function(t,e){this.parent&&!e||this.addToResizeCollection(this,t,!1)},a.prototype.doTheResize=function(t,e,i){var n=t.slideW,a=n,r=t.slideH,s=r;parseInt(this.getProperty(!1,"responsivesize"))||(a=s=1),this.renderWithModifier("width",this.getProperty(!0,"width"),a),this.renderWithModifier("height",this.getProperty(!0,"height"),s),parseInt(this.getProperty(!1,"responsiveposition"))||(n=r=1),this.renderWithModifier("left",this.getProperty(!0,"left"),n),this.renderWithModifier("top",this.getProperty(!0,"top"),r),e||this.triggerLayerResized(i,t)},a.prototype.resizeParent=function(t,e,i){this.addToResizeCollection(this,e,i)},a.prototype.addToResizeCollection=function(t,e,i){l.ratios=e,l.isThrottled=i;for(var n=0;n<l.layers.length;n++)if(l.layers[n]==this){l.layers.splice(n,1);break}l.layers.push(t),d(),this.triggerLayerResized(i,e)},a.prototype.update=function(){var t=this.parent;if("center"==this.getProperty(!0,"align")){var e=0;e=t?t.position().left+t.width()/2:this.layer.parent().width()/2;var i=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("left",e-this.layer.width()/2+this.getProperty(!0,"left")*i)}if("middle"==this.getProperty(!0,"valign")){var n=0;n=t?t.position().top+t.height()/2:this.layer.parent().height()/2;var i=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("top",n-this.layer.height()/2+this.getProperty(!0,"top")*i)}this.triggerLayerResized()},a.prototype.triggerLayerResized=function(t,e){t?this._triggerLayerResized(t,e):this._triggerLayerResizedThrottled(!0,e)},a.prototype._triggerLayerResized=function(t,e){this.isDeleted||this.layer.triggerHandler("LayerResized",[e||{slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},t||!1])},a.prototype.getStyleText=function(){var t="",e=this.property.crop;return"auto"!=e&&"mask"!=e||(e="hidden"),t+="overflow:"+e+";",t+="text-align:"+this.property.inneralign+";"},a.prototype.nextLayer=function(){var t=this.zIndex-1;0>t||"undefined"==typeof this.group.zIndexList[t]?this.group.nextLayer():this.group.zIndexList[t].activate()},a.prototype.previousLayer=function(){var t=this.zIndex+1;t>this.group.zIndexList.length-1||"undefined"==typeof this.group.zIndexList[t]?this.group.previousLayer():this.group.zIndexList[t].activate()},a.prototype.history=function(i,n,a,r){switch(NextendSmartSliderLayerDataStorageAbtract.prototype.history.apply(this,arguments),i){case"addLayer":switch(n){case"add":var s=a[0],o=e.extend(!0,{},a[1]);this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(o,s);t.history.changeFuture(this,l),t.history.changeFuture(this.items[0],l.items[0]),this.group.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"createLayer":switch(n){case"add":var s=a[0],o=e.extend(!0,{},a[1]);this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(o,s);t.history.changeFuture(this,l),t.history.changeFuture(this.items[0],l.items[0]),this.group.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"duplicateLayer":switch(n){case"duplicate":var d=[];this.duplicate(!0,!1,d);for(var h=0;h<d.length;h++)t.history.changeFuture(r.oldLayers[h],d[h]),t.history.changeFuture(r.oldLayers[h].items[0],d[h].items[0]);r.oldLayers=[];break;case"delete":var p=[];a[0]["delete"](!0,p),r.oldLayers=p}break;case"deleteLayer":switch(n){case"create":var s=a[0],o=e.extend(!0,{},a[1]);this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(o,s);t.history.changeFuture(this,l),t.history.changeFuture(this.items[0],l.items[0]),s.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"storeAnimations":this.animation.storeAnimations(a[0],null,null,e.extend(!0,{},n));break;case"resetMode":switch(n){case"reset":this.resetMode(a[0],this.layerEditor.getMode());break;case"restore":this.restoreMode(a[0],this.layerEditor.getMode(),a[1])}}},a.prototype.updateAnimations=function(){t.animationEditor.update(this),this.layerRow.toggleClass("n2-ss-layer-has-animations",this.animation.hasAnimation())},a.prototype._sortZIndex=function(t){return t.group==this.group?this.zIndex>=t.zIndex:t.group instanceof NextendSmartSliderLayerGroup&&this.group instanceof NextendSmartSliderLayerGroup?this.group.zIndex>=t.group.zIndex:t.group instanceof NextendSmartSliderLayerGroup?this.zIndex>=t.group.zIndex:this.group instanceof NextendSmartSliderLayerGroup?this.group.zIndex>=t.zIndex:this.zIndex>=t.zIndex},i.NextendSmartSliderLayer=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t,e){var i=parseFloat(t);return isNaN(i)?e:i}function r(i,n,r,s){s||(s={}),this.isMainGroup=!1,this.isDeleted=!1,this.opened=!0,r?(this.layer=r,this.property=e.extend({name:"Group",parallax:0,fontsize:100,adaptivefont:0,generatorvisible:"",desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1},{name:this.layer.data("name")+"",parallax:this.layer.data("parallax"),fontsize:this.layer.data("desktopportraitfontsize"),adaptivefont:this.layer.data("adaptivefont"),generatorvisible:this.layer.data("generatorvisible")||"",desktopPortrait:a(this.layer.data("desktopportrait"),1),desktopLandscape:a(this.layer.data("desktoplandscape"),1),tabletPortrait:a(this.layer.data("tabletportrait"),1),tabletLandscape:a(this.layer.data("tabletlandscape"),1),mobilePortrait:a(this.layer.data("mobileportrait"),1),mobileLandscape:a(this.layer.data("mobilelandscape"),1)}),this.property.name.length||(this.property.name="Group")):(this.layer=!1,"undefined"!=typeof s.data?this.property={name:s.data.name,fontsize:s.data.fontsize,adaptivefont:s.data.adaptivefont,generatorvisible:s.data.generatorvisible,desktopPortrait:s.data.desktopportrait,desktopLandscape:s.data.desktoplandscape,tabletPortrait:s.data.tabletportrait,tabletLandscape:s.data.tabletlandscape,mobilePortrait:s.data.mobileportrait,mobileLandscape:s.data.mobilelandscape}:this.property={name:"Group",fontsize:100,adaptivefont:0,generatorvisible:"",desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1}),NextendSmartSliderLayerContainerAbstract.prototype.constructor.call(this,i,n);var o=this.layer.data("opened");if(null!==o&&"undefined"!=typeof o&&(this.opened=!!o),this.deviceProperty={desktopPortrait:{fontsize:this.property.fontsize},desktopLandscape:{fontsize:this.layer.data("desktoplandscapefontsize")},tabletPortrait:{fontsize:this.layer.data("tabletportraitfontsize")},tabletLandscape:{fontsize:this.layer.data("tabletlandscapefontsize")},mobilePortrait:{fontsize:this.layer.data("mobileportraitfontsize")},mobileLandscape:{fontsize:this.layer.data("mobilelandscapefontsize")}},this.animation=new NextendSmartSliderLayerAnimations(this),this.layerEditor.$.trigger("layerCreated",this),e(window).triggerHandler("layerCreated"),this.animation.load(),i.layerList.push(this),this._opened(),"undefined"!=typeof s.layers){for(var l=t.history.add(e.proxy(function(){return[this,"createGroup","create","delete",[]]},this)),d=[],h=0;h<s.layers.length;h++)d.push(this.layerEditor.loadSingleData(s.layers[h],this.layerEditor.mainLayerGroup));this.groupLayersStartAndLateInit(d),l[4].push(this.zIndex)}}var s=!1;r.prototype=Object.create(NextendSmartSliderLayerContainerAbstract.prototype),r.prototype.constructor=r;for(var o in NextendSmartSliderLayerDataStorageAbtract.prototype)r.prototype[o]=NextendSmartSliderLayerDataStorageAbtract.prototype[o];r.prototype.groupLayersStartAndLateInit=function(i){for(var n=0,a=0,r=0;r<i.length;r++)i[r].group==this.layerEditor.mainLayerGroup&&(n=Math.max(n,i[r].zIndex),a++);isNaN(n)&&(n=0);for(var r=0;r<i.length;r++)t.history.add(e.proxy(function(t,e,i){return[this,"changeZIndexWithContainer",[t,r,e,this],[t,i,this,e],[]]},this,i[r],i[r].group,i[r].zIndex)),this.addLayerBeforeInit(i[r],r);this.lateInit(n,a)},r.prototype.createLayer=function(){this.layer||(this.layer=e('<div class="n2-ss-layer-group" style="z-index: '+this.group.zIndexList.length+';"></div>').appendTo(this.group.layerContainerElement))},r.prototype.createLayerRow=function(){var t=300,i=null;this.selectElement=e('<a href="#" class="n2-ss-layer-list-selector"><i class="n2-i n2-i-select"></i></a>').on("click",e.proxy(function(t){t.preventDefault(),this.select()},this));var n=e('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Delete layer")+'"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></div>').on("click",e.proxy(this["delete"],this)),a=e('<div class="n2-button n2-button-icon n2-button-m n2-button-m-narrow" data-n2tip="'+n2_("Duplicate layer")+'"><i class="n2-i n2-i-duplicate n2-i-grey-opacity"></i></div>').on("click",e.proxy(function(){this.duplicate(!0,!1)},this));this.openerElement=e('<a href="#" class="n2-button n2-button-icon n2-button-m n2-ss-layer-list-group-opener" onclick="return false;"><i class="n2-i n2-i-folderopened"></i></a>').on("click",e.proxy(this.switchOpened,this)),this.layerRow=e('<li class="n2-ss-layer-row n2-ss-layer-group-row"></li>').data("layer",this).appendTo(this.group.layersItemsUlElement),this.layerTitleSpan=e('<span class="n2-ucf">'+this.property.name+"</span>").on({mouseup:e.proxy(function(n){i?(clearTimeout(i),i=null,this.editName()):(this.activate(n),i=setTimeout(e.proxy(function(){i=null},this),t))},this)}),this.layerTitle=e('<div class="n2-ss-layer-title"></div>').append(this.layerTitleSpan).append(e('<div class="n2-actions-left"></div>').append(this.openerElement)).append(e('<div class="n2-actions"></div>').append(a).append(n)).appendTo(this.layerRow).on({mouseup:e.proxy(function(t){"DIV"===t.target.tagName&&this.activate(t)},this)}),this.layersItemsUlElement=e('<ul class="n2-list n2-h4 n2-list-orderable" />').data("container",this),nextend.tooltip.add(this.layerRow)},r.prototype.switchOpened=function(){this.opened=!this.opened,this._opened()},r.prototype._opened=function(){this.opened?(this.openerElement.removeClass("n2-closed"),this.layersItemsUlElement.css("display",""),this.layer.triggerHandler("opened")):(this.openerElement.addClass("n2-closed"),this.layersItemsUlElement.css("display","none"),this.layerEditor.$.trigger("groupHidden",this),this.layer.triggerHandler("closed"))},r.prototype.setZIndex=function(t){this.zIndex=t,this.layer.css("zIndex",t),this.group.layersItemsUlElement.append(this.layerRow),this.$.trigger("layerIndexed",t)},r.prototype.editName=function(){var t=new NextendSmartSliderAdminInlineField;t.$input.on({valueChanged:e.proxy(function(t,e){this.rename(e,!0),this.layerTitleSpan.css("display","inline")},this),cancel:e.proxy(function(){this.layerTitleSpan.css("display","inline")},this)}),this.layerTitleSpan.css("display","none"),t.injectNode(this.layerTitle,this.property.name)},r.prototype.rename=function(t){""==t&&(t="GROUP"),t=t.substr(0,35),this.property.name!=t&&(this.property.name=t,this.layerTitleSpan.html(t))},r.prototype.getData=function(t){var e={type:"group",zIndex:this.zIndex,layers:[],opened:this.opened};if(e.animations=this.animation.getData(),t.layersIncluded)for(var i=0;i<this.zIndexList.length;i++)e.layers.push(this.zIndexList[i].getData(t));for(var n in this.property)switch(n){case"fontsize":break;default:e[n.toLowerCase()]=this.property[n]}for(var a in this.deviceProperty)for(var r in this.deviceProperty[a]){var s=this.deviceProperty[a][r];"undefined"!=typeof s&&("width"==r&&this.isDimensionPropertyAccepted(s)||"height"==r&&this.isDimensionPropertyAccepted(s)||"align"==r||"valign"==r||"parentalign"==r||"parentvalign"==r||(s=parseFloat(s)),e[a.toLowerCase()+r]=s)}return e},r.prototype.positionSidebar=function(){this.layerEditor.panel.show(this,e("#n2-ss-layer-list"))},r.prototype.activate=function(t,e){if(!s){if(document.activeElement&&document.activeElement.blur(),t&&(t.ctrlKey||t.metaKey))return void this.select();if(!t||3!=t.which){e||this.layerEditor.exitSelectMode(),t&&this.positionSidebar();var i=this.getIndex();if(this.layerEditor.activeLayerIndex!==i){
this.layerRow.addClass("n2-active"),this.layer.triggerHandler("n2-ss-activate"),this.layerEditor.changeActiveLayer(i,e),nextend.activeLayer=this.layer;var n=this.layerEditor.mainLayerGroup.layersItemsUlElement.parent(),a=n.scrollTop(),r=this.layerRow.get(0).offsetTop;(a>r||r>a+n.height()-this.layerRow.height())&&n.scrollTop(r)}this.layerEditor.startSelection(!0),this.layerEditor.addSelection(this.layers,!0)}}},r.prototype.deActivate=function(){this.layerEditor.endSelection(!0),this.layerRow.removeClass("n2-active"),this.layer.triggerHandler("n2-ss-deactivate")},r.prototype.select=function(){this.layerEditor.selectLayer(this,!1),this.layerEditor.addSelection(this.layers,!1)},r.prototype.getIndex=function(){return this.layerEditor.layerList.indexOf(this)},r.prototype.nextLayer=function(){var t=this.zIndex-1;if(0>t||"undefined"==typeof this.group.zIndexList[t])this.group.nextLayer();else{var e=this.group.zIndexList[t];e.activate()}},r.prototype.previousLayer=function(){var t=this.zIndex+1;if(t>this.zIndexList.length-1||"undefined"==typeof this.group.zIndexList[t])this.group.previousLayer();else{var e=this.group.zIndexList[t];e.activate()}},r.prototype.dispatchActionToChildren=function(t,e){for(var i=0;i<this.layers.length;i++)this.layers[i][t].apply(this.layers[i],e)},r.prototype.snap=function(){},r.prototype["delete"]=function(){this.layerEditor.getSelectedLayer()==this&&this.layerEditor.panel.hide(),this.deActivate();for(var i=e.extend([],this.layers),n=0;n<i.length;n++)i[n]["delete"]();t.history.add(e.proxy(function(){return[this,"deleteGroup","delete","create",[this.getData({layersIncluded:!1,itemsIncluded:!1})]]},this)),this.group.childDeleted(this),this.layer.trigger("mouseup"),this.isDeleted=!0,this.layerEditor.layerDeleted(this.getIndex()),this.layer.triggerHandler("LayerDeleted"),this.layer.remove(),this.layerRow.remove(),this.$.trigger("layerDeleted"),delete this.layer,delete this.animation},r.prototype.duplicate=function(t,e){this.layerEditor.loadData([this.getData({layersIncluded:!0,itemsIncluded:!0})],!1)},r.prototype._syncparallax=function(t){},r.prototype._syncfontsize=function(t){this.adjustFontSize(this.getProperty(!1,"adaptivefont"),t,!0)},r.prototype._syncadaptivefont=function(t){this.adjustFontSize(t,this.getProperty(!0,"fontsize"),!0)},r.prototype.adjustFontSize=function(t,e,i){e=parseInt(e),parseInt(t)?this.layer.css("font-size",nextend.smartSlider.frontend.sliderElement.data("fontsize")*e/100+"px"):100!=e?this.layer.css("font-size",e+"%"):this.layer.css("font-size",""),i&&this.update()},r.prototype._syncgeneratorvisible=function(t){},r.prototype._syncdesktopPortrait=function(t){this.__syncShowOnDevice("desktopPortrait",t)},r.prototype._syncdesktopLandscape=function(t){this.__syncShowOnDevice("desktopLandscape",t)},r.prototype._synctabletPortrait=function(t){this.__syncShowOnDevice("tabletPortrait",t)},r.prototype._synctabletLandscape=function(t){this.__syncShowOnDevice("tabletLandscape",t)},r.prototype._syncmobilePortrait=function(t){this.__syncShowOnDevice("mobilePortrait",t)},r.prototype._syncmobileLandscape=function(t){this.__syncShowOnDevice("mobileLandscape",t)},r.prototype.__syncShowOnDevice=function(t,e){if(this.getMode()==t){var e=parseInt(e);e?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[t,e])}},r.prototype._hide=function(){this.layer.css("display","none")},r.prototype._show=function(){parseInt(this.property[this.layerEditor.getMode()])&&this.layer.css("display","block"),this.update()},r.prototype.update=function(){for(var t=0;t<this.layers.length;t++)this.layers[t].update()},r.prototype.setProperty=function(t,e,i){switch(t){case"parallax":case"generatorvisible":case"adaptivefont":this.store(!1,t,e,!0);break;case"fontsize":this.store(!0,t,e,!0);break;case"showFieldDesktopPortrait":this.store(!1,"desktopPortrait",parseInt(e),!0);break;case"showFieldDesktopLandscape":this.store(!1,"desktopLandscape",parseInt(e),!0);break;case"showFieldTabletPortrait":this.store(!1,"tabletPortrait",parseInt(e),!0);break;case"showFieldTabletLandscape":this.store(!1,"tabletLandscape",parseInt(e),!0);break;case"showFieldMobilePortrait":this.store(!1,"mobilePortrait",parseInt(e),!0);break;case"showFieldMobileLandscape":this.store(!1,"mobileLandscape",parseInt(e),!0)}"manager"!=i&&this.$.trigger("propertyChanged",[t,e])},r.prototype.changeEditorMode=function(t){var e=parseInt(this.property[t]);e?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[t,e]),this._renderModeProperties(!1)},r.prototype._renderModeProperties=function(t){for(var e in this.property)this.property[e]=this.getProperty(!0,e),this.$.trigger("propertyChanged",[e,this.property[e]]);var i=this.getProperty(!0,"fontsize");this.adjustFontSize(this.getProperty(!1,"adaptivefont"),i,!1)},r.prototype.updateAnimations=function(){t.animationEditor.update(this),this.layerRow.toggleClass("n2-ss-layer-has-animations",this.animation.hasAnimation())},r.prototype.showEditor=function(){this.layerEditor.panel._show()},r.prototype.doAction=function(t,i){for(var n=e.extend([],this.zIndexList),a=0;a<n.length;a++)n[a][t].apply(n[a],i)},r.prototype.history=function(t,e,i,n){NextendSmartSliderLayerDataStorageAbtract.prototype.history.apply(this,arguments),NextendSmartSliderLayerContainerAbstract.prototype.history.apply(this,arguments)},i.NextendSmartSliderLayerGroup=r}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(){this.isShown=!e.jStorage.get("ssLayersShown",!1),this.tlHeight=e.jStorage.get("ssLayersHeight")||200,this.$container=e("#n2-ss-layers"),this.fixScroll(),this.switchLayerList(),this.topBar=e(".n2-ss-layer-list-top-bar").on("mousedown",e.proxy(this.resizeStart,this)),this.topBar.find(".n2-ss-layer-list-opener").on("click",e.proxy(function(t){t.preventDefault(),this.switchLayerList()},this)),e(".n2-ss-slide-show-layers").on("click",e.proxy(function(t){t.preventDefault(),this.switchLayerList()},this)),this.onResize(),e(window).on("resize",e.proxy(this.onResize,this))}a.prototype.onResize=function(){this.$container.width(this.$container.parent().width()+2);var t=this.$container.height();this.paneLeft.height(t-48),this.paneRight.height(t-48)},a.prototype.onActivateLayer=function(t){var e=this.paneLeft.scrollTop(),i=t.layerRow.get(0).offsetTop;(e>i||i>e+this.paneLeft.height()-t.layerRow.height())&&(this.paneLeft.scrollTop(i),this.paneRight.scrollTop(i))},a.prototype.fixScroll=function(){this.paneLeft=e(".n2-ss-layers-sidebar-rows"),this.paneRight=e(".n2-ss-timeline-content-layers-container");var t=e.proxy(function(t){var e=this.paneLeft.scrollTop();t.originalEvent.deltaY>0?e+=40:e-=40,e=40*Math.round(e/40),this.paneLeft.scrollTop(e),this.paneRight.scrollTop(e),t.preventDefault()},this);this.paneLeft.on("mousewheel",t),this.paneLeft.on("scroll",e.proxy(function(t){var e=this.paneLeft.scrollTop();this.paneRight.scrollTop(e),t.preventDefault()},this)),this.paneRight.on("mousewheel",t)},a.prototype.resizeStart=function(t){this.isShown&&(t.target==this.topBar[0]||e(t.target).hasClass("n2-h2"))&&(t.preventDefault(),this.startY=t.clientY,this.height=this.$container.height(),e("body").on({"mousemove.n2-ss-tl-resize":e.proxy(this.resizeMove,this),"mouseup.n2-ss-tl-resize":e.proxy(this.resizeStop,this),"mouseleave.n2-ss-tl-resize":e.proxy(this.resizeStop,this)}))},a.prototype.resizeMove=function(t){t.preventDefault(),this.setTLHeight(this._calculateDesiredHeight(t))},a.prototype.resizeStop=function(t){t.preventDefault(),e("body").off(".n2-ss-tl-resize");var i=this._calculateDesiredHeight(t);this.setTLHeight(i),this.tlHeight=i,e.jStorage.set("ssLayersHeight",i),e("#n2-admin").triggerHandler("resize")},a.prototype._calculateDesiredHeight=function(t){var e=this.startY-t.clientY+this.height-48;return this.__calculateDesiredHeight(e)},a.prototype.__calculateDesiredHeight=function(t){return 40*Math.round(Math.min(Math.max(40,t),(window.innerHeight||document.documentElement.clientHeight)/2)/40)+48},a.prototype.switchLayerList=function(){this.isShown=!this.isShown,this.$container.toggleClass("n2-active",this.isShown),this.isShown?this.setTLHeight(this.tlHeight):this.setTLHeight(48),e.jStorage.set("ssLayersShown",this.isShown)},a.prototype.setTLHeight=function(t){t=Math.max(48,t),this.$container.height(t),t=this.$container.height(),this.paneLeft.height(t-48),this.paneRight.height(t-48),nextend.triggerResize()},a.prototype.activateAdd=function(t,e){this.$add.css({left:t,top:e}).appendTo(this.$container)},window.NextendSmartSliderAdminLayersUserInterface=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t){this.isMainGroup=!0,NextendSmartSliderLayerContainerAbstract.prototype.constructor.call(this,t,!1),this.lateInit(),this.startWithExistingNodes()}a.prototype=Object.create(NextendSmartSliderLayerContainerAbstract.prototype),a.prototype.constructor=a,a.prototype.createLayer=function(){this.layer||(this.layer=this.layerEditor.layerContainerElement)},a.prototype.createLayerRow=function(){this.layersItemsUlElement=this.layerEditor.layersItemsElement.find("ul").data("container",this)},a.prototype.nextLayer=function(){var t=this.zIndexList[this.zIndexList.length-1];t.activate()},a.prototype.previousLayer=function(){var t=this.zIndexList[0];t.activate()},i.NextendSmartSliderMainLayerGroup=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i,n,a,r,s){this.activeLayerIndex=-1,this.snapToEnabled=!0,this.staticSlide=n,this.initSelectMode(),this.$=e(this),t.layerManager=this,this.responsive=t.frontend.responsive,this.panel=new NextendSmartSliderSidebar(this),this.layerList=[],this.layersItemsElement=e("#n2-ss-layer-list"),this.frontendSlideLayers=i,this.frontendSlideLayers.setZero(),this.layerContainerElement=t.$currentSlideElement.find(".n2-ss-layers-container"),this.layerContainerElement.length||(this.layerContainerElement=t.$currentSlideElement),this.layerContainerElement.parent().prepend('<div class="n2-ss-slide-border n2-ss-slide-border-left" /><div class="n2-ss-slide-border n2-ss-slide-border-top" /><div class="n2-ss-slide-border n2-ss-slide-border-right" /><div class="n2-ss-slide-border n2-ss-slide-border-bottom" />'),this.slideSize={width:this.layerContainerElement.width(),height:this.layerContainerElement.height()},t.frontend.sliderElement.on("SliderResize",e.proxy(this.refreshSlideSize,this)),this.sidebar=new NextendSmartSliderAdminSlideSidebarSettings(this),new NextendSmartSliderLayerAnimationManager(this),this.ui=new NextendSmartSliderAdminLayersUserInterface(this),t.itemEditor=this.itemEditor=new NextendSmartSliderItemManager(this),this.positionDisplay=e('<div class="n2 n2-ss-position-display"/>').appendTo("body"),this.mainLayerGroup=new NextendSmartSliderMainLayerGroup(this),e("#smartslider-slide-toolbox-layer").on("mouseenter",function(){e("#n2-admin").addClass("smartslider-layer-highlight-active")}).on("mouseleave",function(){e("#n2-admin").removeClass("smartslider-layer-highlight-active")}),this._initDeviceModeChange(),this.initSettings(),this.sidebar.startFeatures();var l=e("#n2-ss-layer-adaptive-font").on("click",e.proxy(function(){this.sidebar.forms.layer.adaptivefont.data("field").onoff.trigger("click")},this));this.sidebar.forms.layer.adaptivefont.on("nextendChange",e.proxy(function(){1==this.sidebar.forms.layer.adaptivefont.val()?l.addClass("n2-active"):l.removeClass("n2-active")},this)),new NextendElementNumber("n2-ss-layer-font-size",-Number.MAX_VALUE,Number.MAX_VALUE),new NextendElementAutocompleteSlider("n2-ss-layer-font-size",{min:50,max:300,step:5});var p=e("#n2-ss-layer-font-size").on("outsideChange",e.proxy(function(){var t=parseInt(p.val());this.sidebar.forms.layer.fontsize.val(t).trigger("change")},this));this.sidebar.forms.layer.fontsize.on("nextendChange",e.proxy(function(){p.data("field").insideChange(this.sidebar.forms.layer.fontsize.val())},this)),e(".n2-ss-slide-duplicate-layer").on("click",e.proxy(function(t){t.preventDefault(),this.duplicate()},this)),e(".n2-ss-slide-delete-layer").on("click",e.proxy(function(t){t.preventDefault(),this["delete"]()},this)),e(window).on({keydown:e.proxy(function(i){if(!("TEXTAREA"==i.target.tagName||"INPUT"==i.target.tagName||t.timelineControl&&t.timelineControl.isActivated())&&-1!=this.activeLayerIndex){var n=i.keyCode;if(n>=49&&57>=n){var a=i.originalEvent.location||i.originalEvent.keyLocation||0;3==a&&(n+=48)}if(46==n||8==n)this["delete"](),i.preventDefault();else if(35==n)this.duplicate(),i.preventDefault();else if(16==n)o[n]=1;else if(38==n){if(!o[n]){var r=e.proxy(function(){this.doActionOnActiveLayer("moveY",[-1*(o[16]?10:1)])},this);r(),o[n]=setInterval(r,100)}i.preventDefault()}else if(40==n){if(!o[n]){var r=e.proxy(function(){this.doActionOnActiveLayer("moveY",[o[16]?10:1])},this);r(),o[n]=setInterval(r,100)}i.preventDefault()}else if(37==n){if(!o[n]){var r=e.proxy(function(){this.doActionOnActiveLayer("moveX",[-1*(o[16]?10:1)])},this);r(),o[n]=setInterval(r,100)}i.preventDefault()}else if(39==n){if(!o[n]){var r=e.proxy(function(){this.doActionOnActiveLayer("moveX",[o[16]?10:1])},this);r(),o[n]=setInterval(r,100)}i.preventDefault()}else if(n>=97&&105>=n){var s=d[n],l=h[n],p=!1;this.sidebar.forms.layer.align.val()==s&&this.sidebar.forms.layer.valign.val()==l&&(p=!0),this.sidebar.layerFeatures.horizontalAlign(s,p),this.sidebar.layerFeatures.verticalAlign(l,p)}else 34==n?(i.preventDefault(),this.layerList[this.activeLayerIndex].nextLayer()):33==n?(i.preventDefault(),this.layerList[this.activeLayerIndex].previousLayer()):65==n?(i.preventDefault(),this.layerList[this.activeLayerIndex].fit()):(i.ctrlKey||i.metaKey)&&(90==n?i.shiftKey?t.history.redo():t.history.undo():67==n?this.copy():86==n?this.paste(0):71==n&&(this.createGroupFromSelected(),i.preventDefault()))}},this),keyup:e.proxy(function(t){"undefined"!=typeof o[t.keyCode]&&o[t.keyCode]&&(clearInterval(o[t.keyCode]),o[t.keyCode]=0)},this)}),this.addContextMenu(),a||t.frontend.sliderElement.fileupload({url:r,pasteZone:!1,dropZone:t.frontend.sliderElement,dataType:"json",paramName:"image",add:e.proxy(function(t,e){e.formData={path:"/"+s},e.submit()},this),done:e.proxy(function(t,e){var i=e.result;if(i.data&&i.data.name){var n=this.itemEditor.createLayerItem(!1,"image");n.reRender({image:i.data.url}),n.activate(null,null,!0)}else NextendAjaxHelper.notification(i)},this),fail:e.proxy(function(t,e){NextendAjaxHelper.notification(e.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:function(){setTimeout(function(){NextendAjaxHelper.stopLoading()},100)}});var c=this;window.validateLayers=function(){console.group();for(var t=0;t<c.mainLayerGroup.zIndexList.length;t++)console.log(t,c.mainLayerGroup.zIndexList[t].layerRow.get(0));console.groupEnd()},this.$.on("layerCreated",e.proxy(function(){this.editorVisibilityRefresh()},this)),this.editorVisibilityRefresh(),e("body").on("mousedown",e.proxy(function(t){"main"==nextend.context.getCurrentWindow()&&nextend.context.mouseDownArea===!1&&this.panel.hide()},this))}function r(t){this.mode=c.UNDEFINED,this.forms={undefined:null},this.layerEditor=t,this.toolboxElement=e("#smartslider-slide-toolbox-layer"),this.startLayer(),this.startGroup()}function s(t){this.fields=t,this.initParentLinker(),this.initAlign(),this.initEvents()}var o={16:0,38:0,40:0,37:0,39:0},l={left:0,center:1,right:2,top:0,middle:1,bottom:2},d={97:"left",98:"center",99:"right",100:"left",101:"center",102:"right",103:"left",104:"center",105:"right"},h={97:"bottom",98:"bottom",99:"bottom",100:"middle",101:"middle",102:"middle",103:"top",104:"top",105:"top"},p={OFF:0,ON:1,GROUP:2};a.prototype.getMode=function(){return this.mode},a.prototype._getMode=function(){return this.responsive.getNormalizedModeString()},a.prototype.getResponsiveRatio=function(t){return"h"==t?this.responsive.lastRatios.slideW:"v"==t?this.responsive.lastRatios.slideH:0},a.prototype.isGroup=function(t){return t instanceof NextendSmartSliderLayerGroup},a.prototype.getActiveGroup=function(){var t=this.getSelectedLayer();return this.isGroup(t)?t:t?t.group:this.mainLayerGroup},a.prototype.createLayer=function(t,e){var i=this.sidebar.layerFeatures.layerDefault;for(var n in i)null!==i[n]&&(e[n]=i[n]);var a=new NextendSmartSliderLayer(this,t,!1,this.itemEditor,e);return t.reIndexLayers(),a},a.prototype.addLayer=function(i,n,a){var r=this._addLayer(i,n,a);return t.history.add(e.proxy(function(){return[r,"addLayer","add","delete",[i,r.getData({layersIncluded:!0,itemsIncluded:!0})]]},this)),r},a.prototype._addLayer=function(t,i,n){var a=e(i);this.layerContainerElement.append(a);var r=new NextendSmartSliderLayer(this,t,a,this.itemEditor);return t!=this.mainLayerGroup&&t.moveLayerToGroup(r,r.zIndex),n&&(this.mainLayerGroup.reIndexLayers(),this.refreshMode()),r},a.prototype.switchToLayerTab=function(){t.slide._changeView(1)},a.prototype._initDeviceModeChange=function(){var i=e("#layerresettodesktop").on("click",e.proxy(this.__onResetToDesktopClick,this));this.resetToDesktopTRElement=i.closest("tr"),this.resetToDesktopGlobalElement=e("#n2-ss-layer-reset-to-desktop").on("click",e.proxy(function(){"block"==this.resetToDesktopTRElement.css("display")&&i.trigger("click")},this));var n=e("#n2-ss-layer-show-on"),a={},r=t.frontend.responsive.parameters.deviceModes;for(var s in r)r[s]&&(a[s]=e('<div class="n2-radio-option"><i class="n2-i n2-it n2-i-'+s+'"></i></div>').on("click",e.proxy(function(t){this.sidebar.forms.layer["showField"+t.charAt(0).toUpperCase()+t.substr(1)].data("field").onoff.trigger("click")},this,s)).appendTo(n));n.children().first().addClass("n2-first"),n.children().last().addClass("n2-last"),this.globalShowOnDeviceCB=function(t){"undefined"!=typeof a[t]&&a[t].toggleClass("n2-active",1==this.sidebar.forms.layer["showField"+t.charAt(0).toUpperCase()+t.substr(1)].val())},this.sidebar.forms.layer.showFieldDesktopPortrait.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"desktopPortrait")),this.sidebar.forms.layer.showFieldDesktopLandscape.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"desktopLandscape")),this.sidebar.forms.layer.showFieldTabletPortrait.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"tabletPortrait")),this.sidebar.forms.layer.showFieldTabletLandscape.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"tabletLandscape")),this.sidebar.forms.layer.showFieldMobilePortrait.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"mobilePortrait")),this.sidebar.forms.layer.showFieldMobileLandscape.on("nextendChange",e.proxy(this.globalShowOnDeviceCB,this,"mobileLandscape")),e("#layershow").data("field").setAvailableDevices(r),e("#layergroup-show").data("field").setAvailableDevices(r),this.__onChangeDeviceOrientation(),t.frontend.sliderElement.on("SliderDeviceOrientation",e.proxy(this.__onChangeDeviceOrientation,this)),t.frontend.sliderElement.on("SliderResize",e.proxy(this.__onResize,this))},a.prototype.refreshMode=function(){this.__onChangeDeviceOrientation(),t.frontend.responsive.reTriggerSliderDeviceOrientation()},a.prototype.__onChangeDeviceOrientation=function(){this.mode=this._getMode(),this.globalShowOnDeviceCB(this.mode),this.resetToDesktopTRElement.css("display","desktopPortrait"==this.mode?"none":"block"),this.resetToDesktopGlobalElement.css("display","desktopPortrait"==this.mode?"none":"");for(var t=0;t<this.layerList.length;t++)this.layerList[t].changeEditorMode(this.mode)},a.prototype.__onResize=function(t,e){for(var i=this.getSortedLayers(),n=0;n<i.length;n++)i[n].doLinearResize(e)},a.prototype.__onResetToDesktopClick=function(){if(-1!=this.activeLayerIndex){var t=this.getMode();this.layerList[this.activeLayerIndex].resetMode(t,t)}},a.prototype.copyOrResetMode=function(t){var e=this.getMode();if("desktopPortrait"!=t&&t==e)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(t,e);else if("desktopPortrait"!=t&&"desktopPortrait"==e)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(t,e);else if(t!=e)for(var i=0;i<this.layerList.length;i++)this.layerList[i].copyMode(e,t)},a.prototype.refreshSlideSize=function(){this.slideSize.width=t.frontend.dimensions.slide.width,this.slideSize.height=t.frontend.dimensions.slide.height},a.prototype.initSettings=function(){this.settings={};var t=e("#n2-ss-slide-canvas-settings").on("mouseleave",e.proxy(function(){t.removeClass("n2-active")},this));t.find("> a").on("click",function(e){e.preventDefault(),t.toggleClass("n2-active")}),this.$settingsPanel=t.find(".n2-ss-settings-panel-inner"),this.initSnapTo(),this.initEditorTheme(),this.initRuler()},a.prototype.addSettings=function(t,i,n,a){this.settings[t]=parseInt(e.jStorage.get(t,n));var r=e('<a href="">'+i+'<span class="n2-setting-tick"><i class="n2-i n2-it n2-i-tick2"></i></span></a>').on("click",e.proxy(function(i){i.preventDefault(),this.settings[t]=1==this.settings[t]?0:1,e.jStorage.set(t,this.settings[t]),r.toggleClass("n2-setting-enabled",1==this.settings[t]),a(this.settings[t])},this)).appendTo(this.$settingsPanel);r.toggleClass("n2-setting-enabled",1==this.settings[t]),a(this.settings[t])},a.prototype.addAction=function(t,i){e('<a href="" class="n2-panel-action">'+t+"</a>").on("click",e.proxy(function(t){t.preventDefault(),i()},this)).appendTo(this.$settingsPanel)},a.prototype.initRuler=function(){var t=e("#n2-tab-smartslider-editor");this.addSettings("n2-ss-ruler-enabled","Ruler",1,e.proxy(function(e){t.toggleClass("n2-ss-has-ruler",1==e),nextend.triggerResize()},this)),this.addSettings("n2-ss-show-guides","Show Guides",1,e.proxy(function(e){nextend.ruler.showGuides=e,t.toggleClass("n2-ss-show-guides",1==e)},this)),this.addSettings("n2-ss-lock-guides","Lock Guides",0,e.proxy(function(e){t.toggleClass("n2-ss-lock-guides",1==e)},this)),this.addAction("Clear Guides",e.proxy(function(){nextend.ruler.clearGuides()},this))},a.prototype.initSnapTo=function(){this.addSettings("n2-ss-snap-to-enabled","Smart Snap",1,e.proxy(function(t){for(var e=0;e<this.layerList.length;e++)this.layerList[e].snap()},this))},a.prototype.getSnap=function(){return this.settings["n2-ss-snap-to-enabled"]?e(this.staticSlide?".n2-ss-static-slide .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):not(.n2-ss-layer-selected):visible, .n2-ruler-guide":".n2-ss-slide.n2-ss-slide-active .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):not(.n2-ss-layer-selected):visible, .n2-ruler-guide"):!1},a.prototype.initEditorTheme=function(){var t=e("#n2-tab-smartslider-editor");this.addSettings("n2-ss-theme-dark","Dark Mode",0,function(e){t.toggleClass("n2-ss-theme-dark",1==e)})},a.prototype.deleteLayers=function(){for(var t=this.mainLayerGroup.zIndexList.length-1;t>=0;t--)this.mainLayerGroup.zIndexList[t]["delete"]()},a.prototype.layerDeleted=function(t){var e=this.layerList[t];e.group.reIndexLayers();for(var i=this.selectedLayers.length;i--;)e==this.selectedLayers[i]&&this.selectedLayers.splice(i,1);this.layerList.splice(t,1),t===this.activeLayerIndex&&(this.activeLayerIndex=-1),this.afterLayerDeleted(t),this.editorVisibilityRefresh()},a.prototype.editorVisibilityRefresh=function(){switch(this.layerList.length>0){case!1:e("body").removeClass("n2-ss-has-layers"),nextend.triggerResize();break;default:e("body").addClass("n2-ss-has-layers"),nextend.triggerResize()}},a.prototype.afterLayerDeleted=NextendDeBounce(function(t){var e=this.getSelectedLayer();!e||e.isDeleted?this.resetActiveLayer():e&&(this.activeLayerIndex=e.getIndex())},50),a.prototype.getSortedLayers=function(){for(var t=this.mainLayerGroup.getChildLayersRecursive(!1),e={},i=t.length-1;i>=0;i--)"undefined"!=typeof t[i].property.parentid&&t[i].property.parentid&&("undefined"==typeof e[t[i].property.parentid]&&(e[t[i].property.parentid]=[]),e[t[i].property.parentid].push(t[i]),t.splice(i,1));for(var i=0;i<t.length;i++)"undefined"!=typeof t[i].property.id&&t[i].property.id&&"undefined"!=typeof e[t[i].property.id]&&(e[t[i].property.id].unshift(0),e[t[i].property.id].unshift(i+1),t.splice.apply(t,e[t[i].property.id]),delete e[t[i].property.id]);return t},a.prototype.getActiveLayerData=function(){var t=[];if("undefined"!=typeof this.layerList[this.activeLayerIndex])if(this.selectMode==p.ON)for(var e=0;e<this.selectedLayers.length;e++)this.selectedLayers[e].getDataWithChildren(t);else this.layerList[this.activeLayerIndex].getDataWithChildren(t);return t},a.prototype.getHTML=function(){for(var t=e("<div></div>"),i=this.layerList,n=0;n<i.length;n++)t.append(i[n].getHTML(!0,!0));return t.html()},a.prototype.getData=function(){for(var t=[],e=this.mainLayerGroup.zIndexList,i=0;i<e.length;i++)t.push(e[i].getData({layersIncluded:!0,itemsIncluded:!0}));return t},a.prototype.loadData=function(i,n,a){a=a||this.mainLayerGroup,t.history.add(e.proxy(function(){return[this,"fixActiveLayer","","",[]]},this));var r=e.extend(!0,[],i);n&&this.deleteLayers(),this._zIndexOffset=this.mainLayerGroup.zIndexList.length,this._idTranslation={};for(var s=0;s<r.length;s++)"group"==r[s].type?this.loadSingleGroupData(r[s]):this.loadSingleData(r[s],this.mainLayerGroup);this.mainLayerGroup.reIndexLayers(),this.refreshMode(),-1==this.activeLayerIndex&&this.layerList.length>0&&this.layerList[0].activate(),t.history.add(e.proxy(function(){return[this,"fixActiveLayer","","",[]]},this))},a.prototype.loadSingleGroupData=function(t){return new NextendSmartSliderLayerGroup(this,this.mainLayerGroup,!1,t)},a.prototype.loadSingleData=function(t,i){var n=e('<div class="n2-ss-layer"></div>').attr("style",t.style),a=n.css("zIndex");if("auto"!=a&&""!=a||(a=t.zIndex?t.zIndex:1),n.css("zIndex",a+this._zIndexOffset),t.id){var r=e.fn.uid();this._idTranslation[t.id]=r,n.attr("id",r)}t.parentid&&("undefined"!=typeof this._idTranslation[t.parentid]?t.parentid=this._idTranslation[t.parentid]:t.parentid="");for(var s=0;s<t.items.length;s++)e('<div class="n2-ss-item n2-ss-item-'+t.items[s].type+'"></div>').data("item",t.items[s].type).data("itemvalues",t.items[s].values).appendTo(n);delete t.style,delete t.items,t.animations=Base64.encode(JSON.stringify(t.animations));for(var o in t)n.data(o,t[o]);return this.addLayer(i,n,!1)},a.prototype.getSelectedLayer=function(){return-1==this.activeLayerIndex?!1:this.layerList[this.activeLayerIndex]},a.prototype.fixActiveLayer=function(){var t=this.getSelectedLayer();(0==t||t.isDeleted)&&this.resetActiveLayer()},a.prototype.resetActiveLayer=function(){this.mainLayerGroup.zIndexList.length>0?this.mainLayerGroup.zIndexList[this.mainLayerGroup.zIndexList.length-1].activate():this.changeActiveLayer(-1)},a.prototype.changeActiveLayer=function(t,i){var n=this.activeLayerIndex;if(-1!=n){var a=this.layerList[n];a&&(a.$.off("propertyChanged.layerEditor"),a.deActivate())}if(this.activeLayerIndex=t,i||this.exitSelectMode(),-1!=t){var r=this.layerList[t];r instanceof NextendSmartSliderLayerGroup?this.sidebar.changeMode("GROUP"):this.sidebar.changeMode("LAYER"),r.$.on("propertyChanged.layerEditor",e.proxy(this.sidebar.activatePropertyChanged,this.sidebar)),r.animation.activate();var s=r.property;for(var o in s)this.sidebar.activatePropertyChanged({target:r},o,s[o])}this.$.trigger("activeLayerChanged")},a.prototype.eye=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("changeStatus",[3])},a.prototype.lock=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("changeStatus",[2])},a.prototype["delete"]=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("delete")},a.prototype.duplicate=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.doActionOnActiveLayer("duplicate",[this.selectMode!=p.ON,!1])},a.prototype.copy=function(t){"undefined"==typeof t&&(t=this.getCopied());var i=this.getActiveLayerData();if(i.length){for(t.unshift({name:i[0].name,layers:i});t.length>5;)t.pop();e.jStorage.set("copied",JSON.stringify(t))}},a.prototype.paste=function(t,e){"undefined"==typeof e&&(e=this.getCopied()),e.length&&"undefined"!=typeof e[t]&&nextend.smartSlider.layerManager.loadData(e[t].layers,!1)},a.prototype.getCopied=function(){var t=e.jStorage.get("copied");return null===t?[]:JSON.parse(t)},a.prototype.addContextMenu=function(){var t=this;e.contextMenu({selector:"#n2-ss-0",className:"n2",autoHide:!0,build:function(i,n){var a=null,r=e(n.target).closest(".n2-ss-layer");r.length?(a=r.data("layerObject"),a.activate(n)):a=t.layerList[t.activeLayerIndex]||!1;var s={};a&&(s["delete"]={name:"Delete layer",icon:"delete"},s.duplicate={name:"Duplicate layer",icon:"duplicate"},s.copy={name:"Copy layer",icon:"copy"});var o=t.getCopied();if(1==o.length)s.paste={name:"Paste layer",icon:"paste",callback:e.proxy(t.paste,this,0,o)};else if(o.length>1){for(var l={},d=0;d<o.length;d++)l["paste"+d]={name:o[d].name,callback:e.proxy(t.paste,this,d,o)};s.paste={name:"Paste layer",icon:"paste",items:l}}return e.isEmptyObject(s)?!1:{animation:{duration:0,show:"show",hide:"hide"},zIndex:1e6,callback:function(e,i){t[e]()},positionSubmenu:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"left+2 top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};t.css(i)}},items:s}}})},a.prototype.history=function(t,e,i){switch(t){case"fixActiveLayer":this.fixActiveLayer()}},a.prototype.initSelectMode=function(){this.selectMode=p.OFF,this.selectedLayers=[],e(".n2-ss-layer-list-top-bar .n2-button").on("mousedown",e.proxy(function(t){switch(t.preventDefault(),e(t.currentTarget).data("action")){case"delete":this["delete"]();break;case"duplicate":this.duplicate();break;case"group":this.createGroupFromSelected();break;case"cancel":this.exitSelectMode()}},this))},a.prototype.startSelection=function(t){t?(this.selectMode==p.ON&&this.exitSelectMode(),this.changeSelectMode(p.GROUP)):this.changeSelectMode(p.ON)},a.prototype.changeSelectMode=function(t){var i=this.selectMode;i!=t&&(i==p.ON?e("#n2-admin").removeClass("n2-ss-select-layer-mode-on"):i==p.GROUP&&e("#n2-admin").removeClass("n2-ss-select-layer-mode-group"),this.selectMode=t,i==p.GROUP&&t==p.ON&&this.selectedLayers[0].activate(null,null,!0),t==p.OFF?e("#n2-admin").removeClass("n2-ss-select-layer-mode"):(e("#n2-admin").addClass("n2-ss-select-layer-mode"),t==p.ON?e("#n2-admin").addClass("n2-ss-select-layer-mode-on"):t==p.GROUP&&e("#n2-admin").addClass("n2-ss-select-layer-mode-group")),this.selectMode==p.OFF?e("body").off(".n2-ss-selection"):e("body").on("mousedown.n2-ss-selection",e.proxy(function(t){"main"==nextend.context.getCurrentWindow()&&nextend.context.mouseDownArea===!1&&this.exitSelectMode()},this)))},a.prototype.endSelection=function(t){t&&this.selectMode==p.GROUP&&this.exitSelectMode()},a.prototype.selectLayer=function(t,e){this.selectMode!=p.ON&&(this.startSelection(!1),e&&this.selectedLayers.push(this.layerList[this.activeLayerIndex])),this._selectLayer(t)},a.prototype._selectLayer=function(t){var i=e.inArray(t,this.selectedLayers);if(-1!=i){if(this.selectMode==p.ON&&this.selectedLayers.length<=1)return this.exitSelectMode(),!1;var n=this.selectedLayers[i];if(this.selectedLayers.splice(i,1),t.layerRow.removeClass("n2-selected"),t.layer.removeClass("n2-ss-layer-selected"),this.selectMode==p.ON&&this.selectedLayers.length<=1)return this.selectedLayers[0].activate(),this.exitSelectMode(),!1;n===this.layerList[this.activeLayerIndex]&&this.selectedLayers[0].activate(!1,null,!0)}else{for(var a=this.selectedLayers.length,r=0;r<this.selectedLayers.length;r++)if(this.selectedLayers[r]._sortZIndex(t)){a=r;break}this.selectedLayers.splice(a,0,t)}for(var r=0;r<this.selectedLayers.length;r++)this.selectedLayers[r].layerRow.addClass("n2-selected"),this.selectedLayers[r].layer.addClass("n2-ss-layer-selected")},a.prototype.addSelection=function(t,e){e||this.changeSelectMode(p.ON);for(var i=0;i<t.length;i++)this._selectLayer(t[i],!1)},a.prototype.exitSelectMode=function(){if(this.selectMode){for(var t=0;t<this.selectedLayers.length;t++)this.selectedLayers[t]!=this.layerList[this.activeLayerIndex]&&this.selectedLayers[t].layerRow.removeClass("n2-active"),
this.selectedLayers[t].layerRow.removeClass("n2-selected"),this.selectedLayers[t].layer.removeClass("n2-ss-layer-selected");e("#n2-admin").removeClass("n2-ss-select-layer-mode"),this.selectedLayers=[],this.changeSelectMode(p.OFF)}},a.prototype.doActionOnActiveLayer=function(t,i){if(this.selectMode==p.ON)for(var n=e.extend([],this.selectedLayers),a=0;a<n.length;a++)n[a][t].apply(n[a],i);else"function"==typeof this.layerList[this.activeLayerIndex][t]?this.layerList[this.activeLayerIndex][t].apply(this.layerList[this.activeLayerIndex],i):this.layerList[this.activeLayerIndex].doAction(t,i)},a.prototype.draggableStart=function(t){if(this.selectMode){for(var e=!1,i=0;i<this.selectedLayers.length;i++){var n=this.selectedLayers[i],a=n.layer;if(a[0]!=t.helper[0]){var r=a.css("display");"none"==r&&a.css("display","block"),n._originalPosition=a.position(),"none"==r&&a.css("display",r)}else e=!0}e||this.exitSelectMode()}},a.prototype.draggableDrag=function(t){if(this.selectMode)for(var e={left:t.position.left-t.originalPosition.left,top:t.position.top-t.originalPosition.top},i=0;i<this.selectedLayers.length;i++){var n=this.selectedLayers[i],a=n.layer;n instanceof NextendSmartSliderLayerGroup||a[0]!=t.helper[0]&&(a.css({left:n._originalPosition.left+e.left,top:n._originalPosition.top+e.top,bottom:"auto",right:"auto"}),n.triggerLayerResized())}},a.prototype.draggableStop=function(t){if(this.selectMode){for(var e={left:t.position.left-t.originalPosition.left,top:t.position.top-t.originalPosition.top},i=0;i<this.selectedLayers.length;i++){var n=this.selectedLayers[i],a=n.layer;if(n instanceof NextendSmartSliderLayerGroup);else if(a[0]!=t.helper[0]){var r=a.css("display");"none"==r&&a.css("display","block"),n.setPosition(n._originalPosition.left+e.left,n._originalPosition.top+e.top),n.triggerLayerResized(),"none"==r&&a.css("display",r)}}return!0}return!1},a.prototype.createGroupFromSelected=function(){var i;switch(this.selectMode){case p.ON:i=new NextendSmartSliderLayerGroup(this,this.mainLayerGroup,!1);var n=t.history.add(e.proxy(function(){return[i,"createGroup","create","delete",[]]},this));i.groupLayersStartAndLateInit(this.selectedLayers),n[4].push(i.zIndex),this.exitSelectMode(),i.activate();break;case p.OFF:var a=this.layerList[this.activeLayerIndex];if(a.group instanceof NextendSmartSliderLayerGroup)a.group.activate();else{i=new NextendSmartSliderLayerGroup(this,this.mainLayerGroup,!1);var n=t.history.add(e.proxy(function(){return[i,"createGroup","create","delete",[]]},this));i.groupLayersStartAndLateInit([a]),n[4].push(i.zIndex),i.activate()}break;case p.GROUP:}},i.NextendSmartSliderAdminSlideLayerManager=a;var c={UNDEFINED:0,LAYER:1,GROUP:2},u={0:"UNDEFINED",1:"LAYER",2:"GROUP"};r.prototype.changeMode=function(t){this.mode!=c[t]&&(e("body").removeClass("n2-ss-editor-mode-"+u[this.mode]).addClass("n2-ss-editor-mode-"+t),c[t]==c.LAYER?e("#n2-tabbed-slide-editor-settings").data("pane").showTabs(["item","style","animations","position"]):c[t]==c.GROUP&&e("#n2-tabbed-slide-editor-settings").data("pane").showTabs(["group","animations"]),this.mode=c[t])},r.prototype.activatePropertyChanged=function(t,e,i){switch(this.mode){case c.LAYER:this.activeLayerPropertyChanged(t,e,i);break;case c.GROUP:this.activeGroupPropertyChanged(t,e,i)}},r.prototype.getActiveForm=function(){switch(this.mode){case c.LAYER:return this.forms.layer;case c.GROUP:return this.forms.group}return!1},r.prototype.startLayer=function(){this.forms.layer={id:e("#layerid"),parentid:e("#layerparentid"),parentalign:e("#layerparentalign"),parentvalign:e("#layerparentvalign"),left:e("#layerleft"),top:e("#layertop"),responsiveposition:e("#layerresponsive-position"),width:e("#layerwidth"),height:e("#layerheight"),responsivesize:e("#layerresponsive-size"),"class":e("#layerclass"),generatorvisible:e("#layergenerator-visible"),showFieldDesktopPortrait:e("#layershow-desktop-portrait"),showFieldDesktopLandscape:e("#layershow-desktop-landscape"),showFieldTabletPortrait:e("#layershow-tablet-portrait"),showFieldTabletLandscape:e("#layershow-tablet-landscape"),showFieldMobilePortrait:e("#layershow-mobile-portrait"),showFieldMobileLandscape:e("#layershow-mobile-landscape"),crop:e("#layercrop"),rotation:e("#layerrotation"),inneralign:e("#layerinneralign"),parallax:e("#layerparallax"),align:e("#layeralign"),valign:e("#layervalign"),fontsize:e("#layerfont-size"),adaptivefont:e("#layeradaptive-font"),mouseenter:e("#layeronmouseenter"),click:e("#layeronclick"),mouseleave:e("#layeronmouseleave"),play:e("#layeronplay"),pause:e("#layeronpause"),stop:e("#layeronstop")};for(var t in this.forms.layer)this.forms.layer[t].on("outsideChange",e.proxy(this.activateLayerPropertyChanged,this,t));this.layerEditor.responsive.isEnabled("desktop","Landscape")||this.forms.layer.showFieldDesktopLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Portrait")||this.forms.layer.showFieldTabletPortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Landscape")||this.forms.layer.showFieldTabletLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Portrait")||this.forms.layer.showFieldMobilePortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Landscape")||this.forms.layer.showFieldMobileLandscape.closest(".n2-mixed-group").css("display","none")},r.prototype.activateLayerPropertyChanged=function(t,e){if(-1!=this.layerEditor.activeLayerIndex){var i=this.forms.layer[t].val();this.layerEditor.layerList[this.layerEditor.activeLayerIndex].setProperty(t,i,"manager")}else{var n=this.forms.layer[t].data("field");"undefined"!=typeof n&&null!==n&&n.insideChange("")}},r.prototype.activeLayerPropertyChanged=function(t,e,i){if("function"==typeof this["layerFormSet"+e])this["layerFormSet"+e](i,t.target);else{var n=this.forms.layer[e].data("field");"undefined"!=typeof n&&n.insideChange(i)}},r.prototype.layerFormSetname=function(t){},r.prototype.layerFormSetnameSynced=function(t){},r.prototype.layerFormSetdesktopPortrait=function(t,e){this.forms.layer.showFieldDesktopPortrait.data("field").insideChange(t)},r.prototype.layerFormSetdesktopLandscape=function(t,e){this.forms.layer.showFieldDesktopLandscape.data("field").insideChange(t)},r.prototype.layerFormSettabletPortrait=function(t,e){this.forms.layer.showFieldTabletPortrait.data("field").insideChange(t)},r.prototype.layerFormSettabletLandscape=function(t,e){this.forms.layer.showFieldTabletLandscape.data("field").insideChange(t)},r.prototype.layerFormSetmobilePortrait=function(t,e){this.forms.layer.showFieldMobilePortrait.data("field").insideChange(t)},r.prototype.layerFormSetmobileLandscape=function(t,e){this.forms.layer.showFieldMobileLandscape.data("field").insideChange(t)},r.prototype.startFeatures=function(){this.layerFeatures=new s(this.forms.layer)},r.prototype.startGroup=function(){this.forms.group={parallax:e("#layergroup-parallax"),showFieldDesktopPortrait:e("#layergroup-show-desktop-portrait"),showFieldDesktopLandscape:e("#layergroup-show-desktop-landscape"),showFieldTabletPortrait:e("#layergroup-show-tablet-portrait"),showFieldTabletLandscape:e("#layergroup-show-tablet-landscape"),showFieldMobilePortrait:e("#layergroup-show-mobile-portrait"),showFieldMobileLandscape:e("#layergroup-show-mobile-landscape"),fontsize:e("#layergroup-font-size"),adaptivefont:e("#layergroup-adaptive-font"),generatorvisible:e("#layergroup-generator-visible")};for(var t in this.forms.group)this.forms.group[t].on("outsideChange",e.proxy(this.activateGroupPropertyChanged,this,t));this.layerEditor.responsive.isEnabled("desktop","Landscape")||this.forms.group.showFieldDesktopLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Portrait")||this.forms.group.showFieldTabletPortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("tablet","Landscape")||this.forms.group.showFieldTabletLandscape.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Portrait")||this.forms.group.showFieldMobilePortrait.closest(".n2-mixed-group").css("display","none"),this.layerEditor.responsive.isEnabled("mobile","Landscape")||this.forms.group.showFieldMobileLandscape.closest(".n2-mixed-group").css("display","none")},r.prototype.activateGroupPropertyChanged=function(t,e){if(-1!=this.layerEditor.activeLayerIndex){var i=this.forms.group[t].val();this.layerEditor.layerList[this.layerEditor.activeLayerIndex].setProperty(t,i,"manager")}else{var n=this.forms.group[t].data("field");"undefined"!=typeof n&&null!==n&&n.insideChange("")}},r.prototype.activeGroupPropertyChanged=function(t,e,i){if("function"==typeof this["groupFormSet"+e])this["groupFormSet"+e](i,t.target);else{var n=this.forms.group[e].data("field");"undefined"!=typeof n&&n.insideChange(i)}},r.prototype.groupFormSetname=function(t){},r.prototype.groupFormSetdesktopPortrait=function(t){this.forms.group.showFieldDesktopPortrait.data("field").insideChange(t)},r.prototype.groupFormSetdesktopLandscape=function(t){this.forms.group.showFieldDesktopLandscape.data("field").insideChange(t)},r.prototype.groupFormSettabletPortrait=function(t){this.forms.group.showFieldTabletPortrait.data("field").insideChange(t)},r.prototype.groupFormSettabletLandscape=function(t){this.forms.group.showFieldTabletLandscape.data("field").insideChange(t)},r.prototype.groupFormSetmobilePortrait=function(t){this.forms.group.showFieldMobilePortrait.data("field").insideChange(t)},r.prototype.groupFormSetmobileLandscape=function(t){this.forms.group.showFieldMobileLandscape.data("field").insideChange(t)},i.NextendSmartSliderAdminSlideSidebarSettings=r,s.prototype.initParentLinker=function(){var t=this.fields.parentid.data("field");e("#n2-ss-layer-parent-linker").on({click:function(e){t.click(e)}})},s.prototype.initAlign=function(){this.layerDefault={align:null,valign:null};var t=e("#n2-ss-layer-horizontal-align .n2-radio-option"),i=e("#n2-ss-layer-vertical-align .n2-radio-option");t.add(i).on("click",e.proxy(function(n){if(n.ctrlKey||n.metaKey){var a=e(n.currentTarget),r=a.hasClass("n2-sub-active"),s=a.data("align");switch(s){case"left":case"center":case"right":t.removeClass("n2-sub-active"),r?(e.jStorage.set("ss-item-horizontal-align",null),this.layerDefault.align=null):(e.jStorage.set("ss-item-horizontal-align",s),this.layerDefault.align=s,a.addClass("n2-sub-active"));break;case"top":case"middle":case"bottom":i.removeClass("n2-sub-active"),r?(e.jStorage.set("ss-item-vertical-align",null),this.layerDefault.valign=null):(e.jStorage.set("ss-item-vertical-align",s),this.layerDefault.valign=s,a.addClass("n2-sub-active"))}}else if(-1!=this.activeLayerIndex){var s=e(n.currentTarget).data("align");switch(s){case"left":case"center":case"right":this.horizontalAlign(s,!0);break;case"top":case"middle":case"bottom":this.verticalAlign(s,!0)}}},this)),this.fields.align.on("nextendChange",e.proxy(function(){switch(t.removeClass("n2-active"),this.fields.align.val()){case"left":t.eq(0).addClass("n2-active");break;case"center":t.eq(1).addClass("n2-active");break;case"right":t.eq(2).addClass("n2-active")}},this)),this.fields.valign.on("nextendChange",e.proxy(function(){switch(i.removeClass("n2-active"),this.fields.valign.val()){case"top":i.eq(0).addClass("n2-active");break;case"middle":i.eq(1).addClass("n2-active");break;case"bottom":i.eq(2).addClass("n2-active")}},this));var n=e.jStorage.get("ss-item-horizontal-align",null),a=e.jStorage.get("ss-item-vertical-align",null);null!=n&&(t.eq(l[n]).addClass("n2-sub-active"),this.layerDefault.align=n),null!=a&&(i.eq(l[a]).addClass("n2-sub-active"),this.layerDefault.valign=a)},s.prototype.horizontalAlign=function(t,e){this.fields.align.val()!=t?this.fields.align.data("field").options.eq(l[t]).trigger("click"):e&&this.fields.left.val(0).trigger("change")},s.prototype.verticalAlign=function(t,e){this.fields.valign.val()!=t?this.fields.valign.data("field").options.eq(l[t]).trigger("click"):e&&this.fields.top.val(0).trigger("change")},s.prototype.initEvents=function(){var t=e("#n2-tab-events"),i=t.find(".n2-h3"),n=i.html(),a=e('<div class="n2-editor-header n2-h2 n2-uc"><span>'+n+"</span></div>");i.replaceWith(a)}}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i,n,a,r){this.loadDefaults(),this.timelineLayerManager=i,this.animation=n,this.direction=a,this.delay=e('<span class="n2-ss-animation-delay n2-h5"></span>'),this.setDelay(n.data.delay),this.duration=e('<span class="n2-ss-animation-duration n2-h5"></span>'),this.setDuration(n.data.duration),this.bar=e('<div class="n2-ss-layer-animation n2-ss-layer-animation-'+n.group+'"></div>').css(nextend.rtl.marginLeft,t.durationToOffsetX(n.data.delay)).css({width:t.durationToOffsetX(n.data.duration)}).data("animation",this).append(this.delay).append(this.duration).draggable({scroll:!0,axis:"x",start:e.proxy(function(t,i){if(1==this.timelineLayerManager.layer.layerEditor.selectMode){var n=this.timelineLayerManager.layer;o=e.grep(this.timelineLayerManager.layer.layerEditor.selectedLayers,function(t){return t!=n});for(var a=0;a<o.length;a++)o[a].timelineLayer.shiftStart()}i.originalPosition[nextend.rtl.marginLeft]=parseInt(i.helper.css(nextend.rtl.marginLeft)),i.originalPosition.delay=this.animation.getDelay()},this),drag:e.proxy(function(e,i){if(nextend.rtl.isRtl)var n=Math.max(0,-1*(i.position.left-i.originalPosition[nextend.rtl.marginLeft]));else var n=Math.max(0,i.position.left+i.originalPosition[nextend.rtl.marginLeft]);var a=t.normalizeOffsetX(n);i.position.left=0,i.helper.css(nextend.rtl.marginLeft,a),i.position[nextend.rtl.marginLeft]=a;var r=t.offsetXToDuration(a);if(this.setDelay(r),o)for(var s=r-i.originalPosition.delay,l=0;l<o.length;l++)o[l].timelineLayer.shiftDrag(s)},this),stop:e.proxy(this.onBarDragStop,this)}),this.resizable&&this.bar.resizable({handles:"e, w",start:function(t,e){e.originalPosition[nextend.rtl.marginLeft]=parseInt(e.helper.css(nextend.rtl.marginLeft))},resize:e.proxy(function(e,i){if(nextend.rtl.isRtl){i.size.width=i.originalSize.width-(i.size.width-i.originalSize.width);var n=Math.max(0,-1*(i.position.left-i.originalPosition[nextend.rtl.marginLeft]))}else var n=Math.max(0,i.position.left+i.originalPosition[nextend.rtl.marginLeft]);var a=t.normalizeOffsetX(n),r=n-a;i.size.width=t.normalizeOffsetX(i.size.width+r),this.setDuration(t.offsetXToDuration(i.size.width)),i.position.left=0,i.helper.css(nextend.rtl.marginLeft,a),i.position[nextend.rtl.marginLeft]=a,this.setDelay(t.offsetXToDuration(a))},this),stop:e.proxy(this.onBarResizeStop,this)}),this.bar.on("click",e.proxy(this.click,this)),n.$.on("animationChanged",e.proxy(this.animationChanged,this)).on("animationMoved",e.proxy(this.animationMoved,this)).on("animationDeleted",e.proxy(this.animationDeleted,this))}function r(t){this.loops=[];var i={group:"loop",data:{duration:0,delay:0},animations:t.layer.animation,$:e(""),setDelay:e.proxy(function(t){this.timelineLayerManager.layer.animation.data.repeatStartDelay=t},this),setDuration:function(){},getDelay:e.proxy(function(){return this.timelineLayerManager.layer.animation.data.repeatStartDelay},this)};a.prototype.constructor.call(this,t,i,"loop","data")}function s(t,i,n){this.timelineLayerManager=t,this.animation=i,this.loopDummy=n,i.$.on("animationChanged",e.proxy(this.loopDummy.refresh,this.loopDummy)).on("animationMoved",e.proxy(this.animationMoved,this)).on("animationDeleted",e.proxy(this.loopDummy.remove,this.loopDummy,this))}var o=null;a.prototype.loadDefaults=function(){this.resizable=!0},a.prototype.getBar=function(){return this.bar},a.prototype.click=function(t){t.stopPropagation(),this.animation.edit(t)},a.prototype.onBarResizeStop=function(e,i){this.animation.animations._startHistory();var n=t.offsetXToDuration(i.position[nextend.rtl.marginLeft]),a=t.offsetXToDuration(i.size.width);this.animation.setDelay(n),this.animation.setDuration(a),this.setDelay(n),this.setDuration(a),this.fixTimelineTotalDuration(),this.animation.animations._endHistory()},a.prototype.onBarDragStop=function(e,i){this.animation.animations._startHistory();var n=t.offsetXToDuration(i.position[nextend.rtl.marginLeft]);if(this.animation.setDelay(n),this.setDelay(n),o)for(var a=n-i.originalPosition.delay,r=0;r<o.length;r++)o[r].timelineLayer.shiftEnd(a);this.fixTimelineTotalDuration(),this.animation.animations._endHistory()},a.prototype.animationChanged=function(){this.bar.css(nextend.rtl.marginLeft,t.durationToOffsetX(this.animation.data.delay)).css({width:t.durationToOffsetX(this.animation.data.duration)}),this.setDelay(this.animation.data.delay),this.setDuration(this.animation.data.duration),this.fixTimelineTotalDuration()},a.prototype.setDelayAndUpdate=function(e){e=Math.max(e,0),this.animation.setDelay(e),this.bar.css(nextend.rtl.marginLeft,t.durationToOffsetX(e)),this.setDelay(e)},a.prototype.setDelay=function(e){.15>e?this.delay.css("display","none"):this.delay.css("display","inline").html(Math.round(e*t.oneSecMs))},a.prototype.setDuration=function(e){this.duration.html(Math.round(e*t.oneSecMs))},a.prototype.animationMoved=function(t,e,i,n,a){this.direction!=n&&console.error("Unable to change the animation group");var r=this.timelineLayerManager[this.direction];this.bar.detach().removeClass("n2-ss-layer-animation-"+e).addClass("n2-ss-layer-animation-"+n),"out"==n&&"in"==this.direction&&(a+=r.find(".n2-ss-layer-animation-in").length),0==a?this.bar.prependTo(r):this.bar.insertAfter(r.children().eq(a-1)),"in"==this.direction&&this.timelineLayerManager.specialZeroInChanged(),this.fixTimelineTotalDuration()},a.prototype.animationDeleted=function(){this.bar.remove(),this.animation.$.off("animationChanged animationMoved animationDeleted"),this.timelineLayerManager.animationDeleted(this.direction)},a.prototype.fixTimelineTotalDuration=function(){this.timelineLayerManager.fixTimelineTotalDuration(this.direction)},i.NextendSmartSliderTimelineAnimation=a,r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.prototype.loadDefaults=function(){a.prototype.loadDefaults.call(this),this.resizable=!1},r.prototype.click=function(t){this.loops[0].animation.edit(t)},r.prototype.add=function(t){this.loops.push(t),this.bar.appendTo(this.timelineLayerManager[this.direction]),this.refresh()},r.prototype.remove=function(t){var i=e.inArray(t,this.loops);this.loops.splice(i,1),this.refresh(),this.timelineLayerManager.animationDeleted(this.direction)},r.prototype.refresh=function(){if(0==this.loops.length)return void this.bar.detach();var t=0,e=0,i=this.loops.length;if(1==i){var n=this.loops[0].animation.data;e=360!=n.rotationX&&360!=n.rotationY&&360!=n.rotationZ||1!=n.opacity||0!=n.x||0!=n.y||0!=n.z||1!=n.scaleX||1!=n.scaleY||1!=n.scaleZ||0!=n.skewX?2*(n.duration+n.delay):n.duration+n.delay}else{t=this.loops[this.loops.length-1].animation.data.duration;for(var a=0;i>a;a++){var r=this.loops[a].animation.data;e+=r.duration+r.delay}}var s=this.timelineLayerManager.layer.animation.data;0!=s.repeatCount&&(e*=s.repeatCount),this.animation.data.duration=e+t,this.animation.data.delay=s.repeatStartDelay,this.animationChanged()},r.prototype.animationMoved=function(t,e){var i=this.loops[t];this.loops.splice(t,1),this.loops.splice(e,0,i),this.refresh()},r.prototype.setDuration=function(e){var i;i=0==this.timelineLayerManager.layer.animation.data.repeatCount?n2_("LOOP"):Math.round(e*t.oneSecMs),this.duration.html(i)},i.NextendSmartSliderTimelineAnimationLoopDummy=r,s.prototype.animationMoved=function(t,e,i,n,a){this.loopDummy.animationMoved(i,a)},i.NextendSmartSliderTimelineAnimationLoop=s}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(t){t.timelineLayer=this,this.layer=t,this.sidebar=t.layerRow,this.contentArea=this.content=e('<div class="n2-ss-timeline-content-layers"></div>').on({mouseenter:e.proxy(function(){this.layer.layerRow.trigger("mouseenter")},this),mouseleave:e.proxy(function(){this.layer.layerRow.trigger("mouseleave")},this),click:e.proxy(function(t){this.layer.activate()},this)}),t instanceof NextendSmartSliderLayerContainerAbstract&&(this.contentArea=e('<div class="n2-ss-timeline-content-layers-area"></div>').append(this.contentArea)),this.layer.layer.on({"n2-ss-activate":e.proxy(function(){var t=this.sidebar.parent(),e=t.scrollTop(),i=this.sidebar.get(0).offsetTop;(e>i||i>e+t.height()-this.sidebar.height())&&t.scrollTop(i)},this),"n2-ss-deactivate":e.proxy(function(){},this),opened:e.proxy(function(){this.contentArea.removeClass("n2-ss-group-closed")},this),closed:e.proxy(function(){this.contentArea.addClass("n2-ss-group-closed")},this)}),this["in"]=e("<div></div>").appendTo(this.content),this.loop=e("<div></div>").appendTo(this.content),this.out=e("<div></div>").appendTo(this.content),e('<div data-n2tip="'+n2_("Add animation")+'" class="n2-ss-animation-action n2-button n2-button-icon n2-button-m n2-button-m-narrow n2-radius-s"><i class="n2-i n2-i-animation"></i></div>').on("click",e.proxy(function(i){t!=this.layer.layerEditor.getSelectedLayer()?t.activate(i):t.showEditor(i),e('[data-tab="animations"]').trigger("click")},this)).appendTo(this.layer.layerRow.find(".n2-actions")),e('<div data-n2tip="'+n2_("Remove animations")+'" class="n2-ss-animation-clear-action n2-button n2-button-icon n2-button-m n2-button-m-narrow n2-radius-s"><i class="n2-i n2-i-clearanimation"></i></div>').on("click",e.proxy(function(t){this.layer.animation.clearAll()},this)).appendTo(this.layer.layerRow.find(".n2-actions")),nextend.tooltip.add(this.layer.layerRow),t.$.on("layerDeleted",e.proxy(this.deleted,this)).on("layerIndexed",e.proxy(this.indexed,this)).on("layerAnimationAdded",e.proxy(this.animationAdded,this)).on("layerAnimationSpecialZeroInChanged",e.proxy(this.specialZeroInChanged,this)),this.initExtraAnimation(),t.layer.triggerHandler("timelineLoadedForLayer"),this.indexed(),t.timelineLayerManager=this}a.prototype.initExtraAnimation=function(){var i=this.layer;this.extraAnimationBar=null,i.layer.on("layerExtraAnimationAdded",e.proxy(function(n,a,r,s,o){this.extraAnimationBar?this.extraAnimationBar.css("left",t.durationToOffsetX(a)):this.extraAnimationBar=e('<div class="n2-ss-layer-extra-animation n2-ss-layer-extra-animation-'+r+'"><span class="n2-ss-animation-duration n2-h5">'+r+"</span></div>").css("left",t.durationToOffsetX(a)).appendTo(this.content).draggable({scroll:!0,axis:"x",drag:function(e,i){i.position.left=Math.max(0,t.normalizeOffsetX(i.position.left))},stop:function(e,n){i.activate(),s(t.offsetXToDuration(n.position.left))}}).on("click",function(){i.activate(),o()})},this)).on("layerExtraAnimationRemoved",e.proxy(function(){this.extraAnimationBar&&(this.extraAnimationBar.remove(),this.extraAnimationBar=null)},this))},a.prototype.indexed=function(){t.timelineManager.appendRow(this.layer,this.contentArea)},a.prototype.deleted=function(){this.contentArea.remove(),this.layer.$.off("layerDeleted layerIndexed layerAnimationAdded layerAnimationSpecialZeroInChanged")},a.prototype.animationAdded=function(t,e,i){var n;"loop"==e?(this.loopDummy||(this.loopDummy=new NextendSmartSliderTimelineAnimationLoopDummy(this,"","loop",this.layer.animation.data)),n=this.loopDummy,this.loopDummy.add(new NextendSmartSliderTimelineAnimationLoop(this,i,this.loopDummy))):n=new NextendSmartSliderTimelineAnimation(this,i,e,this.layer.animation.data),this[e].append(n.getBar()),"in"==e&&this.specialZeroInChanged(),this.fixTimelineTotalDuration()},a.prototype.animationDeleted=function(t){!this.layer.animation.ins.length&&!this.layer.animation.loops.length&&!this.layer.animation.outs.length},a.prototype.fixTimelineTotalDuration=function(){t.timelineManager.refreshDuration()},a.prototype.getTotalDuration=function(){var e=this.content.find(".n2-ss-layer-animation:visible:last");if(0==e.length)return 0;var i=parseInt(e.position().left)+parseInt(e.css("marginLeft"))-20;return t.offsetXToDuration(i+e.outerWidth())},a.prototype.specialZeroInChanged=function(){this.isLayerSpecialZeroIn()?this["in"].find(".n2-ss-layer-animation-in").css("display","").last().css("display","none"):(this["in"].find(".n2-ss-layer-animation-in").css("display",""),this.fixTimelineTotalDuration())},a.prototype.isLayerSpecialZeroIn=function(){return this.layer.animation.data.specialZeroIn},a.prototype.shiftStart=function(){this._currentlyShiftedAnimation=this.content.find(".n2-ss-layer-animation").data("animation"),this._currentlyShiftedAnimation?(this._currentlyShiftedAnimationDelay=this._currentlyShiftedAnimation.animation.data.delay,this.layer.animation._startHistory()):this._currentlyShiftedAnimation=!1},a.prototype.shiftDrag=function(t){this._currentlyShiftedAnimation&&this._currentlyShiftedAnimation.setDelayAndUpdate(this._currentlyShiftedAnimationDelay+t)},a.prototype.shiftEnd=function(t){this._currentlyShiftedAnimation&&(this._currentlyShiftedAnimation.setDelayAndUpdate(this._currentlyShiftedAnimationDelay+t),this.layer.animation._endHistory(),delete this._currentlyShiftedAnimationDelay),delete this._currentlyShiftedAnimation},i.NextendSmartSliderTimelineLayer=a}(nextend.smartSlider,n2,window),function(t,e,i,n){function a(i){this.layerEditor=i,this.element=e("#n2-ss-layers-table"),this.element.on({enterPreviewMode:e.proxy(this.onEnterPreview,this),exitPreviewMode:e.proxy(this.onExitPreview,this)}),this.scrollable=this.element.find(".n2-ss-timeline-content-scrollable"),this.contentContainer=e('<div class="n2-ss-timeline-content-layers-container"></div>').appendTo(this.scrollable),this.initTimeFrame(),this.initCurrentTimeIndicator(),t.timelineManager=this,this.layerEditor.$.on("layerCreated",e.proxy(this.layerCreated,this)),this.control=new r(this),this.makeScrollable(),this.addContextMenu()}function r(i){this.timelineVisible=!0,this.status=0,t.timelineControl=this,this.timelineManager=i,this.frontendSlideLayers=i.layerEditor.frontendSlideLayers;e(".n2-ss-layer-list-topbar-control");this.$playButton=e(".n2-play").on({mousedown:e.proxy(this.onPlayButton,this),click:function(t){t.preventDefault()}}),e(window).on("keydown",e.proxy(function(t){"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName&&(0==t.keyCode||32==t.keyCode?this.onPlayButton(t):27==t.keyCode&&this.onStopButton(t))},this)),e(".n2-ss-timeline-content-layers-container, .n2-ss-timeline-duration-marker, .n2-ss-layer-list-opener").on("mousedown",e.proxy(this.exitPreviewMode,this,!1))}a.prototype.initTimeFrame=function(){this.timeMarker=this.element.find(".n2-ss-timeline-content-timeframe").on("mousedown",e.proxy(function(i){var n=t.offsetXToDuration(i.pageX-e(i.currentTarget).offset().left-21);this.disablePreviewModeWidthCTI(n)||this.setCTI(n),this.slideCTI.trigger(i),e(document).one("mouseup",e.proxy(function(t){this.control.unHold(),this.slideCTI.trigger(t)},this))},this)),this._extendTimeFrame(0)},a.prototype.refreshDuration=NextendDeBounce(function(){this._extendTimeFrame(this.getMinimumSlideDuration())},200),a.prototype._extendTimeFrame=function(i){i=Math.floor(i)+1;var n=this.timeMarker.find(".n2-time-marker"),a=n.length;for(10>i&&(i=10),a>i&&(n.slice(i).remove(),a=i);i>=a;a++)e('<div class="n2-time-marker n2-h5">'+a+"s</div>").appendTo(this.timeMarker);this.scrollable.css("width",a*t.oneSecWidth+21),nextend.triggerResize()},a.prototype.getMinimumSlideDuration=function(){for(var t=this.layerEditor.layerList,e=0,i=0;i<t.length;i++)t[i]instanceof NextendSmartSliderLayer&&(e=Math.max(e,t[i].timelineLayerManager.getTotalDuration()));return e},a.prototype.initCurrentTimeIndicator=function(){this.slideCTI=e('<div class="n2-ss-timeline-cti"></div>').append('<div class="n2-ss-timeline-cti-dot"></div>').appendTo(this.scrollable).draggable({axis:"x",cursor:"ew-resize",start:e.proxy(function(e,i){this.control.enterPreviewMode(),this.control.pause(),this.slideDurationPx=this.control.timeline.totalDuration()*t.oneSecWidth},this),drag:e.proxy(function(e,i){i.position.left=Math.max(i.position.left,-.05*t.oneSecWidth),i.position.left=Math.min(i.position.left,this.slideDurationPx),this.setCTI(t.offsetXToDuration(i.position.left))},this),stop:e.proxy(function(e,i){this.control.unHold(),this.disablePreviewModeWidthCTI(t.offsetXToDuration(i.position.left)),delete this.slideDurationPx},this)})},a.prototype.disablePreviewModeWidthCTI=function(t){return null==t||0>t?this.control.exitPreviewMode():!1},a.prototype.setCTI=function(t){this.control.setPosition(Math.max(0,t)),this.control.hold()},a.prototype.onEnterPreview=function(){},a.prototype.onExitPreview=function(){this.slideCTI.css(nextend.rtl.left,-10)},a.prototype.makeScrollable=function(){var t=e(".n2-ss-timeline-content");this.tinyscrollbar=t.tinyscrollbar({axis:"x",wheel:!1,wheelLock:!1}).data("plugin_tinyscrollbar"),"function"==typeof t.get(0).move&&(t.get(0).move=null)},a.prototype.layerCreated=function(t,e){new NextendSmartSliderTimelineLayer(e)},a.prototype.appendRow=function(t,e){t.group.isMainGroup?this.contentContainer.append(e):t.group.timelineLayer.contentArea.append(e)},a.prototype.addContextMenu=function(){e.contextMenu({selector:".n2-ss-layer-row",className:"n2",autoHide:!0,build:function(t,i){var n={},a=t.data("layer");a.timelineLayer;n.copy={name:"Copy animations",icon:"copy"};var r=e.jStorage.get("layerAnimationCopied");if(null!==r)n.paste={name:"Paste animations",icon:"paste",callback:function(){a.animation.loadData(JSON.parse(r))}};else if(!a.animation.hasAnimation())return!1;return{animation:{duration:0,show:"show",hide:"hide"},zIndex:1e6,callback:function(t,i){e.jStorage.set("layerAnimationCopied",JSON.stringify(a.animation.getData()))},items:n}}})},i.NextendSmartSliderAdminTimelineManager=a;var s={DISABLED:0,PAUSED:1,HOLD_PAUSED:2,PLAYING:3,HOLD_PLAYING:4};r.prototype.isActivated=function(){return this.status!=s.DISABLED},r.prototype.onStopButton=function(t){t.preventDefault(),t.stopPropagation(),this.status!=s.DISABLED&&this.exitPreviewMode()},r.prototype.onPlayButton=function(t){switch(t.preventDefault(),this.status){case s.DISABLED:this.enterPreviewMode();case s.PAUSED:this.play();break;case s.PLAYING:this.exitPreviewMode()}},r.prototype.enterPreviewMode=function(){if(this.status==s.DISABLED){e("body").on("mousedown.n2-ss-preview",e.proxy(function(t){e.contains(document.getElementById("n2-ss-layers"),t.target)||this.exitPreviewMode()},this)),t.$currentSlideElement.find(".n2-ss-layer").nextenddraggable("option","disabled",!0),e("body").addClass("n2-ss-preview-mode"),this.frontendSlideLayers.findLayers(),this.frontendSlideLayers.refresh(),this.timeline=this.frontendSlideLayers.getTimeline("layerAnimationPlayIn"),this.timeline.eventCallback("onComplete",e.proxy(function(){this.timeline.totalDuration()>0&&this.timeline.restart()},this));var i=this.timeline.totalDuration(),n={};n[nextend.rtl.left]=0;var a={ease:"linear"};a[nextend.rtl.left]=t.durationToOffsetX(i),this.timeline.fromTo(this.timelineManager.slideCTI,i,n,a,0),this.timeline.pause(0),this.$playButton.addClass("n2-button-blue"),this.timelineManager.element.triggerHandler("enterPreviewMode"),this.status=s.PAUSED}},r.prototype.exitPreviewMode=function(i){return this.status!=s.DISABLED?(i&&(i.preventDefault(),i.stopPropagation()),e("body").off(".n2-ss-preview"),this.status==s.PLAYING&&this.pause(),this.timeline.clear(),this.frontendSlideLayers.setZero(),t.$currentSlideElement.find(".n2-ss-layer").nextenddraggable("option","disabled",!1),e("body").removeClass("n2-ss-preview-mode"),this.$playButton.removeClass("n2-button-blue"),this.timelineManager.element.triggerHandler("exitPreviewMode"),this.status=s.DISABLED,!0):!1},r.prototype.play=function(){return this.status==s.PAUSED?(this.status=s.PLAYING,this.$playButton.addClass("n2-active"),this.timeline.play(),!0):!1},r.prototype.pause=function(){return this.status==s.PLAYING?(this.status=s.PAUSED,this.$playButton.removeClass("n2-active"),this.timeline.pause(),!0):!1},r.prototype.hold=function(){this.status==s.PAUSED?this.status=s.HOLD_PAUSED:this.status==s.PLAYING&&(this.status=s.HOLD_PLAYING,
this.timeline.pause())},r.prototype.unHold=function(){this.status==s.HOLD_PAUSED?this.status=s.PAUSED:this.status==s.HOLD_PLAYING&&(this.status=s.PLAYING,this.timeline.play())},r.prototype.setPosition=function(t){this.enterPreviewMode(),this.timeline.seek(t)},i.NextendSmartSliderAdminTimelineControl=r}(nextend.smartSlider,n2,window);